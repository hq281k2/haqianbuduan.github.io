System.register("chunks:///_virtual/arrayUtil.ts",["cc"],(function(n){"use strict";var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"e0ac7QwG3FDbK4MGwq8M3ni","arrayUtil",void 0);n("default",function(){function n(){}return n.noRepeated=function(n){for(var r=[n[0]],t=1;t<n.length;t++){for(var e=!1,o=0;o<r.length;o++)if(n[t]==r[o]){e=!0;break}e||r.push(n[t])}return r},n.copy2DArray=function(n){for(var r=[],t=0;t<n.length;t++)r.push(n[t].concat());return r},n.fisherYatesShuffle=function(n){for(var r=n.length;r;){var t=Math.floor(Math.random()*r--),e=n[r];n[r]=n[t],n[t]=e}return n},n.confound=function(n){return n.slice().sort((function(){return Math.random()-.5}))},n.flattening=function(n){for(;n.some((function(n){return Array.isArray(n)}));)n=[].concat.apply([],n);return n},n.removeItem=function(n,r){for(var t=n.concat(),e=0;e<t.length;e++){if(r==t[e]){n.splice(e,1);break}}},n.combineArrays=function(n,r){return[].concat(n,r)},n.getRandomValueInArray=function(n){return n[Math.floor(Math.random()*n.length)]},n.addkey=function(r,t){n.removekey(r,t),r.push(t)},n.removekey=function(n,r){var t=n.indexOf(r);-1!=t&&n.splice(t,1)},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/AttrShow.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"2e47aiP5/FMeo3gpSsdo/2w","AttrShow",void 0);t("AttrShow",(function(){this.id=void 0,this.image=void 0,this.name=void 0,this.valueshow=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/base64.ts",["cc"],(function(r){"use strict";var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"fc4f8p/GW9AKK57qAtrke88","base64",void 0),r("base64",function(){function r(){}return r.encode=function(r){var t,e,o,n,a,h,c,i="",f=0;for(r=this._utf8_encode(r);f<r.length;)n=(t=r.charCodeAt(f++))>>2,a=(3&t)<<4|(e=r.charCodeAt(f++))>>4,h=(15&e)<<2|(o=r.charCodeAt(f++))>>6,c=63&o,isNaN(e)?h=c=64:isNaN(o)&&(c=64),i=i+this._keyStr.charAt(n)+this._keyStr.charAt(a)+this._keyStr.charAt(h)+this._keyStr.charAt(c);return i},r.decode=function(r){var t,e,o,n,a,h,c="",i=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<r.length;)t=this._keyStr.indexOf(r.charAt(i++))<<2|(n=this._keyStr.indexOf(r.charAt(i++)))>>4,e=(15&n)<<4|(a=this._keyStr.indexOf(r.charAt(i++)))>>2,o=(3&a)<<6|(h=this._keyStr.indexOf(r.charAt(i++))),c+=String.fromCharCode(t),64!==a&&(c+=String.fromCharCode(e)),64!==h&&(c+=String.fromCharCode(o));return c=this._utf8_decode(c)},r._utf8_encode=function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var o=r.charCodeAt(e);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},r._utf8_decode=function(r){for(var t="",e=0,o=0,n=0,a=0;e<r.length;)(o=r.charCodeAt(e))<128?(t+=String.fromCharCode(o),e++):o>191&&o<224?(n=r.charCodeAt(e+1),t+=String.fromCharCode((31&o)<<6|63&n),e+=2):(n=r.charCodeAt(e+1),a=r.charCodeAt(e+2),t+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&a),e+=3);return t},r}())._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t._RF.pop()}}}));

System.register("chunks:///_virtual/battleData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Chara.ts","./Configs.ts","./uiManager.ts","./gameDef.ts","./ObjectUtil.ts","./gEvent.ts","./dataBase.ts","./gameData.ts","./heroData.ts","./playerData.ts"],(function(e){"use strict";var t,a,r,s,n,i,o,l,c,f,u,h,g,m,v,p,d,S,T,y,D,b,k;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose,r=e.createClass,s=e.asyncToGenerator},function(e){n=e.cclegacy,i=e._decorator},function(e){o=e.default},function(e){l=e.Configs},function(e){c=e.uiManager},function(e){f=e.eElement,u=e.eSeason,h=e.gameDef,g=e.eAttrType,m=e.eSkillType,v=e.AttrKV},function(e){p=e.default},function(e){d=e.gEvent},function(e){S=e.dataBase},function(e){T=e.gameData},function(e){y=e.playerHero,D=e.heroData},function(e){b=e.DataType,k=e.playerData}],execute:function(){var C;n._RF.push({},"f7c34S9EXRMiJ+CUDesDC9w","battleData",void 0);var w=i.ccclass,E=(i.property,e("battleTeam",(function(){this.heroIds=[],this.enemyElement=f.Size,this.season=u.Size,this.soulStone=0}))),H=e("battleRole",function(){function e(e,t,a){this.hero=void 0,this.states=[],this.team=void 0,this.index=void 0,this.hate=void 0,this.fc=0,this.rate=0,this.buffEffects=[],this.result=void 0,this.hero=e,this.states=T.compAttrKV(e.finalStatus,[new v(g.Crit,e.hero.crit),new v(g.FC,e.hero.fc)]),this.team=t,this.index=a,this.hate=e.hero.hate}var t=e.prototype;return t.getBuff=function(e){var t=this.buffEffects.findIndex((function(t,a,r){return t.cfg.attr==e.cfg.attr}));-1!=t&&this.buffEffects.splice(t,1),this.buffEffects.push(p.deepCopy(e))},t.passTurn=function(){for(var e=this.buffEffects.length-1;e>=0;--e)--this.buffEffects[e].lastTurn,this.buffEffects[e].lastTurn<=0&&this.buffEffects.splice(e,1)},t.getBuffValue=function(e){var t=this.buffEffects.find((function(t,a,r){return t.cfg.attr==e}));return t?t.cfg.val:0},e}());e("battleData",w("battleData")(C=function(e){function n(){var t;return(t=e.call(this)||this).teams=new Map,t._currectTeam=void 0,t.tempSelectHeros=void 0,t.roles=[[],[]],t.maxHate=void 0,t.totalFc=void 0,t.totalRate=void 0,t.totalDamage=void 0,t.addListener(),t.init(),t}t(n,e);var i=n.prototype;return i.addListener=function(){},i.init=function(){for(var e=1;e<=h.Battles_Count;++e)this.teams.set(e,new E)},i.saveTeam=function(e){null==e&&(e=this._currectTeam);var t=JSON.stringify(this.teams.get(e));console.log("savebattle"+this._currectTeam+":"+t),localStorage.setItem(b.battleData+e.toString(),t)},i.savedata=function(){for(var e,t=a(this.teams.keys());!(e=t()).done;){var r=e.value;localStorage.setItem(b.battleData+r.toString(),JSON.stringify(this.teams.get(r)))}var s={};s.currectTeam=this.currectTeam,localStorage.setItem(b.battleData,JSON.stringify(s))},i.loaddata=function(){var e=s(regeneratorRuntime.mark((function e(){var t,r,s,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this.teams.keys());case 1:if((r=t()).done){e.next=10;break}if(s=r.value,n=localStorage.getItem(b.battleData+s.toString())){e.next=7;break}return this.teams.set(s,new E),e.abrupt("continue",8);case 7:this.teams.set(s,JSON.parse(n));case 8:e.next=1;break;case 10:(i=localStorage.getItem(b.battleData))?(o=JSON.parse(i),this.currectTeam=o.currectTeam):this.currectTeam=1;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.deleteData=function(){for(var e,t=a(this.teams.keys());!(e=t()).done;){var r=e.value;localStorage.removeItem(b.battleData+r.toString())}localStorage.removeItem(b.battleData)},i.copyTeam=function(e,t){var a=p.deepCopy(this.teams.get(e));this.teams.set(t,a),t==this._currectTeam&&this.calcResult()},i.deleteTeam=function(e){this.teams.set(e,new E),e==this._currectTeam&&this.calcResult()},i.initSelectHeros=function(){for(this.tempSelectHeros=p.deepCopy(this.currectData.heroIds);this.tempSelectHeros.length<h.Battle_Hero_Count;)this.tempSelectHeros.push(null)},i.selectHero=function(e){var t=this.tempSelectHeros.indexOf(e);if(-1!=t)this.tempSelectHeros[t]=null;else{for(var a=!1,r=0;r<h.Battle_Hero_Count;++r)if(null==this.tempSelectHeros[r]){this.tempSelectHeros[r]=e,a=!0;break}if(!a)return void c.Ins.m_tips.showFormatedTip("最多上场5人!")}d.emit(d.UI_Battle_HeroSelect)},i.changeSelectHero=function(){for(var e=p.deepCopy(this.tempSelectHeros),t=e.length-1;t>=0;--t)null==e[t]&&e.splice(t,1);this.currectData.heroIds=e,this.calcResult()},i.updateOption=function(e){this.currectData.enemyElement=e.enemyElement,this.currectData.soulStone=e.soulStone,this.calcResult()},i.calcResult=function(){this.roles=[[],[]];var e=this.currectData;if(e){for(var t,r=a(e.heroIds);!(t=r()).done;){var s=t.value,n=k.Ins.heroData.heros.get(s);if(n){var i=new H(n,0,this.roles[0].length);this.roles[0].push(i)}}var c=new o;c.eleType=e.enemyElement,c.hp=0,c.mp=0,c.atk=0,c.def=0,this.roles[1].push(new H(new y(c),1,0));for(var f=0;f++<h.Battle_Turn_Count;){for(var u=0;u<this.roles[0].length;++u)this.castSkill(this.roles[0][u],2);for(var m,v=a(this.roles);!(m=v()).done;)for(var p,S=m.value,D=a(S);!(p=D()).done;){p.value.passTurn()}}var b=l.GetCfg(l.SoulStoneCfg,e.soulStone);this.maxHate=0,this.totalFc=0,this.totalRate=0,this.totalDamage=0;for(var C,w=a(this.roles[0]);!(C=w()).done;){var E,_=C.value;this.maxHate<_.hate&&(this.maxHate=_.hate);var B,R,x=T.getAttrValue(_.states,g.ATK),I=1+(-1!=b.element.indexOf(_.hero.hero.eleType)?b.attr[0]/100:0),F=Math.floor(x*I),O=0,V=0;if(0==(null==(E=_.hero.skills[1])?void 0:E.effect[0].cfg.skillType))O=(null==(B=_.hero.skills[1])?void 0:B.effect[0].cfg.val)/1e4,V=null==(R=_.hero.skills[1])?void 0:R.effect[0].hits;var A=Math.floor(F*_.rate);this.totalFc+=_.fc,this.totalRate+=_.rate,this.totalDamage+=A,_.result="基础攻击:\n"+x+"\n\n编成攻击:\n"+F+"\n\n"+(V>0?"技能Hits:\n"+V+"\n\n":"")+"FC:\n"+_.fc+"\n\n"+(O>0?"技能倍率:\n"+O+"\n\n":"")+"10T总倍率:\n"+_.rate.toFixed(3)+"\n\n总伤害:\n"+T.FormatNumber(A)}d.emit(d.UI_Battle_CalcEnd)}},i.getTarget=function(e,t){var r=t.target;switch(t.cfg.skillType){case m.Damage:case m.Buff:case m.StateBuff:break;case m.Heal:default:throw new Error("!skilltype:"+t.cfg.skillType+" ")}if("自身"==r)return[this.roles[e.team][e.index]];if(r.startsWith("我")){if(2!=r.length)throw new Error("!targetString:"+r+" ");var s,n=r.substring(1);if("全"==n)return this.roles[e.team];if(-1!=(s=h.ElementString.indexOf(n))){for(var i,o=[],l=a(this.roles[e.team]);!(i=l()).done;){var c=i.value;c.hero.hero.eleType==s&&o.push(c)}return o}if(-1!=(s=h.SeasonString.indexOf(n))){for(var f,u=[],g=a(this.roles[e.team]);!(f=g()).done;){var v=f.value;v.hero.hero.seasonType==s&&u.push(v)}return u}throw new Error("!targetString:"+r+" ")}if(r.startsWith("敌"))return[this.roles[1-e.team][0]];throw new Error("!targetString:"+r+" ")},i.castSkill=function(e,t){var r=e.hero.skills[t-1];e.hate+=r.hate;for(var s,n=a(r.effect);!(s=n()).done;){var i=s.value;switch(i.cfg.skillType){case m.Damage:var o=this.getTarget(e,i);0==e.fc&&(e.fc=i.hits*(T.getAttrValue(e.states,g.FC)+e.getBuffValue(g.FC))*o.length);for(var c,f=l.GetCfg(l.ElementRateCfg,e.hero.hero.eleType),u=T.getAttrValue(e.states,g.Crit)*(1+e.getBuffValue(g.CritPrecent)/1e4),h=D.calcRealCritRate(u),v=a(o);!(c=v()).done;){var p=c.value,d=i.cfg.val/1e4*(1+e.getBuffValue(g.ATKPrecent)/1e4)/(1+p.getBuffValue(g.DEFPrecent)/1e4)*(1+e.getBuffValue(g.GiveDamagePrecent)/1e4)*(1+p.getBuffValue(g.ReceiveDamagePrecent)/1e4)*(1+.5*h)*(f.rate[p.hero.hero.eleType]/100)*(e.hero.hero.seasonType==this.currectData.season?1.5:1);e.rate+=d}break;case m.Heal:break;case m.Buff:for(var S,y=a(this.getTarget(e,i));!(S=y()).done;){S.value.getBuff(i)}break;case m.StateBuff:for(var b,k=a(this.getTarget(e,i));!(b=k()).done;){b.value.getBuff(i)}break;default:throw new Error("!skilltype:"+i.cfg.skillType+" ")}}},r(n,[{key:"currectTeam",get:function(){return this._currectTeam},set:function(e){this._currectTeam=e,this.calcResult()}},{key:"currectData",get:function(){return this.teams.get(this._currectTeam)}}]),n}(S))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/battleHeroSelectWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiBattleHeroSelect.ts"],(function(t){"use strict";var e,i,o,n,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator},function(t){n=t.uiBase,r=t.eUILayer},function(t){c=t.uiBattleHeroSelect}],execute:function(){var l;i._RF.push({},"b9b5agyJJhDirCPFthxMOuT","battleHeroSelectWin",void 0);var a=o.ccclass;o.property,t("battleHeroSelectWin",a("battleHeroSelectWin")(l=function(t){function i(){var e;return(e=t.call(this)||this)._uiInfo.prefabPath="battle/prefabs/battleHeroSelect/battleHeroSelectWin",e._uiInfo.uiLayer=r.eUIL_Dialog,e}return e(i,t),i.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(c).init(this)},i}(n))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/battleOptionWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiBattleOption.ts"],(function(t){"use strict";var i,n,e,o,a,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator},function(t){o=t.uiBase,a=t.eUILayer},function(t){r=t.uiBattleOption}],execute:function(){var s;n._RF.push({},"4a2d85ZgZdEZ5pxxsP1GSJY","battleOptionWin",void 0);var u=e.ccclass;e.property,t("battleOptionWin",u("battleOptionWin")(s=function(t){function n(){var i;return(i=t.call(this)||this)._uiInfo.prefabPath="battle/prefabs/battleOptionWin",i._uiInfo.uiLayer=a.eUIL_Dialog,i}return i(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(r).init(this,this.m_args)},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/battleTeamSwitchWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./callBack.ts","./teamSwitchWin.ts"],(function(t){"use strict";var e,a,n,i,s,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,n=t._decorator},function(t){i=t.uiManager},function(t){s=t.playerData},function(t){c=t.callBack},function(t){o=t.teamSwitchWin}],execute:function(){var l;a._RF.push({},"57fb2mGPyBKxIxxxQX6GBDr","battleTeamSwitchWin",void 0);var r=n.ccclass;n.property,t("battleTeamSwitchWin",r("battleTeamSwitchWin")(l=function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var n=a.prototype;return n.initTeam=function(){this._selectTeam=s.Ins.battleData.currectTeam},n.realCopy=function(){this.onBtnCopy(),s.Ins.battleData.copyTeam(this._selectTeam,this._copyToTeam),i.Ins.m_tips.showFormatedTip("Team "+this._selectTeam+" copy to Team "+this._copyToTeam+" success!"),this._selectTeam=this._copyToTeam,this.onBtnCopy()},n.onBtnDelete=function(){i.Ins.open("messageWin","Are you sure to Delete Team "+this._selectTeam+"?","WARNING",new c(this.realDelete,this),null,null)},n.realDelete=function(){s.Ins.battleData.deleteTeam(this._selectTeam)},n.onBtnOk=function(){s.Ins.battleData.currectTeam=this._selectTeam,this.close()},a}(o))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/battleWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiBattle.ts"],(function(t){"use strict";var i,e,n,o,a,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){o=t.uiBase,a=t.eUILayer},function(t){r=t.uiBattle}],execute:function(){var u;e._RF.push({},"35497GA/bhARo7085UoPNa+","battleWin",void 0);var s=n.ccclass;n.property,t("battleWin",s("battleWin")(u=function(t){function e(){var i;return(i=t.call(this)||this)._uiInfo.prefabPath="battle/prefabs/battleWin",i._uiInfo.uiLayer=a.eUIL_Win,i._uiInfo.isAlphaBg=!1,i._uiInfo.isAnim=!1,i}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(r).init(this)},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/callBack.ts",["cc"],(function(c){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"45a69b7aBtP9acOCA0/Otre","callBack",void 0);c("callBack",function(){function c(c,t){this.caller=null,this.cb=null,this.caller=t,this.cb=c}return c.prototype.Call=function(){for(var c=arguments.length,t=new Array(c),l=0;l<c;l++)t[l]=arguments[l];this.caller?this.cb.call(this.caller,t):this.cb.call(t)},c}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Chara.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"0aad5Ewvd9KapSwcTaE92et","Chara",void 0);i("default",(function(){this.id=void 0,this.charaId=void 0,this.image=void 0,this.charaName=void 0,this.rarity=void 0,this.eleType=void 0,this.seasonType=void 0,this.weaponType=void 0,this.hp=void 0,this.mp=void 0,this.atk=void 0,this.def=void 0,this.crit=void 0,this.hate=void 0,this.fc=void 0,this.mp1=void 0,this.hate1=void 0,this.skill1=void 0,this.mp2=void 0,this.hate2=void 0,this.skill2=void 0,this.availableDate=void 0,this.info1=void 0,this.info2=void 0,this.info3=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ComponentList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentListItem.ts"],(function(t){"use strict";var i,e,s,n,o,h,r,l,a,c,_,d,w,u,I;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,h=t._decorator,r=t.ScrollView,l=t.Prefab,a=t.UITransform,c=t.Layout,_=t.Size,d=t.instantiate,w=t.Vec2,u=t.Component},function(t){I=t.ComponentListItem}],execute:function(){var T,g,f,v,y,V,p;o._RF.push({},"002b7hwzkRKLIB5ToFYbkbc","ComponentList",void 0);var U=h.ccclass,m=h.property;t("ComponentList",(T=U("ComponentList"),g=m(r),f=m(l),T((V=i((y=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),h=0;h<e;h++)o[h]=arguments[h];return(i=t.call.apply(t,[this].concat(o))||this)._win=null,s(i,"scrollView",V,n(i)),i._scrollViewUITrans=null,i._contentUITrans=null,i._layout=void 0,s(i,"prefab",p,n(i)),i._listdata=null,i._dataLength=void 0,i._listItems=[],i._ns=void 0,i._nodeOriSize=void 0,i._nodeScale=void 0,i._nodeAnchor=void 0,i}e(i,t);var o=i.prototype;return o.onDestroy=function(){this.prefab=null,this._listdata=null,this._listItems=[],this.scrollView=null,this._scrollViewUITrans=null,this._contentUITrans=null,this._win=null},o.init=function(t,i){this._win=t,this._listdata=i,this._init()},o._init=function(){var t;this.scrollView&&(this._scrollViewUITrans=this.scrollView.getComponent(a)),this._contentUITrans=this.node.getComponent(a),this._layout=this.node.getComponent(c);var i=this.node.children[0];this._nodeScale=i.scale;var e=i.getComponent(a);this._ns=new _(e.contentSize),this._nodeOriSize=new _(e.contentSize),this._nodeAnchor=e.anchorPoint,this._ns.x*=i.scale.x,this._ns.y*=i.scale.y;for(var s=0;s<this._listdata.length||s<this.node.children.length;++s){var n=this.createItem(s);this._listItems.push(n)}this._dataLength=this._listdata.length,null==(t=this._layout)||t.updateLayout(!0),this.scrollerToIndex(0,0)},o.createItem=function(t){var i,e=null==this.node.children[t];((i=e?d(this.prefab).getComponent(I):this.node.children[t].getComponent(I)).init(this._win,this._listdata[t],t),i.node.setScale(this._nodeScale),e)&&(this.node.addChild(i.node),i.node.getComponent(a)||i.node.addComponent(a).setContentSize(this._nodeOriSize));return i},o.scrollerToCenterIndex=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=!0),this.scrollView){var s=this.getItemCenter(t);this.scrollerToCenterPos(s,i,e)}},o.scrollerToCenterPos=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=!0),this.scrollView){t.x+=this._contentUITrans.width/2-this._scrollViewUITrans.width/2,t.y+=this._contentUITrans.height/2-this._scrollViewUITrans.height/2;var s=new w;s.x=t.x/(this._contentUITrans.width-this._scrollViewUITrans.width),s.y=t.y/(this._contentUITrans.height-this._scrollViewUITrans.height),this.scrollView.scrollTo(s,i,e)}},o.scrollerToIndex=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=!0),this.scrollView&&this._layout){var s=this._listItems[t].node.getPosition();s.x+=this._contentUITrans.width/2,s.y+=this._contentUITrans.height/2;var n=new w;this.scrollView.horizontal?this._layout.horizontalDirection==c.HorizontalDirection.RIGHT_TO_LEFT?n.x=(s.x+this._ns.width*(1-this._nodeAnchor.x)-this._scrollViewUITrans.width)/(this._contentUITrans.width-this._scrollViewUITrans.width):n.x=(s.x-this._ns.width*this._nodeAnchor.x)/(this._contentUITrans.width-this._scrollViewUITrans.width):n.x=0,this.scrollView.vertical?this._layout.verticalDirection==c.VerticalDirection.BOTTOM_TO_TOP?n.y=(s.y-this._ns.height*this._nodeAnchor.y)/(this._contentUITrans.height-this._scrollViewUITrans.height):n.y=(s.y+this._ns.height*(1-this._nodeAnchor.y)-this._scrollViewUITrans.height)/(this._contentUITrans.height-this._scrollViewUITrans.height):n.y=0,this.scrollView.scrollTo(n,i,e)}},o.scrollerToPage=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=!0),this.scrollView&&this._layout){var s=new w(t.x*(this.scrollView.horizontal?this._scrollViewUITrans.width:0),t.y*(this.scrollView.vertical?this._scrollViewUITrans.height:0));this.scrollerToPos(s,i,e)}},o.scrollerToPos=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=!0),this.scrollView&&this._layout){var s=new w;this.scrollView.horizontal?this._layout.horizontalDirection==c.HorizontalDirection.RIGHT_TO_LEFT?s.x=(this._contentUITrans.width-t.x-this._scrollViewUITrans.width)/(this._contentUITrans.width-this._scrollViewUITrans.width):s.x=t.x/(this._contentUITrans.width-this._scrollViewUITrans.width):s.x=0,this.scrollView.vertical?this._layout.verticalDirection==c.VerticalDirection.BOTTOM_TO_TOP?s.y=t.y/(this._contentUITrans.height-this._scrollViewUITrans.height):s.y=(this._contentUITrans.height-t.y-this._scrollViewUITrans.height)/(this._contentUITrans.height-this._scrollViewUITrans.height):s.y=0,this.scrollView.scrollTo(s,i,e)}},o.getItemCenter=function(t){if(0==this._listItems.length)return w.ZERO;var i=this._listItems[t].node.position;return new w(i.x+(.5-this._nodeAnchor.x)*this._ns.width,i.y+(.5-this._nodeAnchor.y)*this._ns.height)},o.refreshAll=function(){for(var t=0;t<this._listItems.length;++t)this.refreshItem(t)},o.refreshItem=function(t){var i;null==t&&(t=this._listdata.length-1),null==(i=this._listItems[t])||i.init(this._win,this._listdata[t],t)},o.refreshList=function(){var t;if(this._contentUITrans){this.refreshAll();for(var i=0;i<this.node.children.length;++i)this.refreshItem(i);if(this._listdata.length<=this._dataLength)this._dataLength=this._listdata.length;else{var e;this.scrollView&&this._dataLength>0&&(e=new w(this.node.position.x,this.node.position.y).add(this.getItemCenter(0)));for(var s=this.node.children.length;s<this._listdata.length;++s){var n=this.createItem(s);this._listItems.push(n)}null==(t=this._layout)||t.updateLayout(!0),this.scrollView&&this._dataLength>0&&(e=e.subtract(this.getItemCenter(0)),this.node.setPosition(e.x,e.y)),this._dataLength=this._listdata.length}}},o.refreshData=function(t){this._contentUITrans&&(this._listdata=t,this.refreshList())},i}(u)).prototype,"scrollView",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=i(y.prototype,"prefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/ComponentListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Component}],execute:function(){e._RF.push({},"7dfd0fa0PNI8LlmbUuxdWuI","ComponentListItem",void 0);i.ccclass,i.property,t("ComponentListItem",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._win=void 0,n._data=void 0,n._index=void 0,n}n(e,t);var i=e.prototype;return i.init=function(t,n,e){this._win=t,this._data=n,this._index=e,this.tryRefresh()},i.tryRefresh=function(){null!=this._data?(this.node.active=!0,this.refresh()):this.node.active=!1},i.refresh=function(){},i.onDestroy=function(){this._win=null},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/ComponentScrollList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentListItem.ts"],(function(t){"use strict";var s,i,e,o,h,n,r,l,_,a,c,w,d,g,I,f,m,u;return{setters:[function(t){s=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,h=t.createClass},function(t){n=t.cclegacy,r=t._decorator,l=t.ScrollView,_=t.Prefab,a=t.UITransform,c=t.Layout,w=t.Size,d=t.instantiate,g=t.Vec2,I=t.Vec3,f=t.math,m=t.Component},function(t){u=t.ComponentListItem}],execute:function(){var y,p,T,C,v,V;n._RF.push({},"afb9fOfN11PA7usJKopwGyd","ComponentScrollList",void 0);var S=r.ccclass,x=r.property,R=r.requireComponent;t("ComponentScrollList",(y=S("ComponentScrollList"),p=R(l),T=x(_),y(C=p((V=s((v=function(t){function s(){for(var s,i=arguments.length,h=new Array(i),n=0;n<i;n++)h[n]=arguments[n];return(s=t.call.apply(t,[this].concat(h))||this)._win=null,s._scrollView=null,s._scrollViewUITrans=null,s._content=null,s._contentUITrans=null,e(s,"prefab",V,o(s)),s._listdata=null,s._listItems=[],s._style=void 0,s._ns=void 0,s._nodeScale=void 0,s._spawnRow=void 0,s._totalRow=void 0,s._firstRowScrollerPos=void 0,s._firstRowIndex=0,s}i(s,t);var n=s.prototype;return n.init=function(t,s,i){this._win=t,this._listdata=s,this._style=i,this._init()},n.onDestroy=function(){this.prefab=null,this._listdata=null,this._listItems.forEach((function(t){})),this._listItems=[],this._style=null,this._scrollView=null,this._scrollViewUITrans=null,this._content=null,this._contentUITrans=null,this._win=null},n._init=function(){this._scrollView=this.getComponent(l),this._scrollViewUITrans=this._scrollView.getComponent(a),this._scrollView.node.on(a.EventType.SIZE_CHANGED,this.onSizeChanged,this),this._content=this._scrollView.content,this._contentUITrans=this._content.getComponent(a),this._style.rowItemsCount=Math.max(Math.floor(this._style.rowItemsCount),1);var t=this._content.getComponent(c);t&&(t.enabled=!1);var s=this._content.children[0];this._nodeScale=s.scale;var i=s.getComponent(a);this._ns=new w(i.contentSize),this._ns.x*=s.scale.x,this._ns.y*=s.scale.y,this.refreshListSize(),this._firstRowIndex=0;for(var e=0;e<this._listItems.length;++e)for(var o=0;o<this._style.rowItemsCount;++o)this.refreshItemAndPos(this._firstShowIndex+e*this._style.rowItemsCount+o);for(var h=this._listItems.length;h<this._spawnRow;++h){for(var n=[],r=0;r<this._style.rowItemsCount;++r){var _=h*this._style.rowItemsCount+r,d=null==this._content.children[_],g=this.createItem(this._content.children[_],_);d&&this._content.addChild(g.node);var I=this.getItemPositon(_);g.node.setPosition(I.x,I.y),g.node.setScale(this._nodeScale),n.push(g)}this._listItems.push(n)}for(var f=this._spawnRow*this._style.rowItemsCount;f<this._content.children.length;)this._content.removeChild(this._content.children[f]);this._firstRowScrollerPos=this.getScrollerPos(0),this.scrollerToIndex(0,0)},n.createItem=function(t,s){null==t&&(t=d(this.prefab));var i=t.getComponent(u);return this.tryRefreshItem(i,s),i},n.tryRefreshItem=function(t,s){s>=this._listdata.length||s<0?t.node.active=!1:(t.node.active=!0,t.init(this._win,this._listdata[s],s))},n.refreshListSize=function(){if(this._scrollView)if(this._spawnRow=Math.ceil(this._scrollView.horizontal?this._scrollViewUITrans.width/this.cw:this._scrollViewUITrans.height/this.ch)+1,this._totalRow=Math.ceil(this._listdata.length/this._style.rowItemsCount),this._scrollView.horizontal){this.setContentSize();var t=this._scrollViewUITrans.height-this.ch*this._style.rowItemsCount+this._style.spacing.y;this._style.autoCenter?this._style.padding.y=this._style.padding.height=t/2:this._style.bottomToTop?this._style.padding.height=t-this._style.padding.y:this._style.padding.y=t-this._style.padding.height}else{this.setContentSize();var s=this._scrollViewUITrans.width-this.cw*this._style.rowItemsCount+this._style.spacing.x;this._style.autoCenter?this._style.padding.x=this._style.padding.width=s/2:this._style.rightToLeft?this._style.padding.x=s-this._style.padding.width:this._style.padding.width=s-this._style.padding.x}},n.setContentSize=function(){this._scrollView.horizontal?(this._contentUITrans.height=this._scrollViewUITrans.height,this._contentUITrans.width=this.getContentLength()):(this._contentUITrans.width=this._scrollViewUITrans.width,this._contentUITrans.height=this.getContentLength())},n.ri=function(t){var s=Math.floor(t/this._style.rowItemsCount);return this._scrollView.horizontal?this._style.rightToLeft&&(s=this._totalRow-1-s):this._style.bottomToTop||(s=this._totalRow-1-s),s},n.ci=function(t){var s=t%this._style.rowItemsCount;return this._scrollView.horizontal?this._style.bottomToTop||(s=this._style.rowItemsCount-1-s):this._style.rightToLeft&&(s=this._style.rowItemsCount-1-s),s},n.getPaddingTop=function(){return this._scrollView.horizontal?this._style.rightToLeft?this._style.padding.width:this._style.padding.x:this._style.bottomToTop?this._style.padding.height:this._style.padding.y},n.getScrollLength=function(){return this._scrollView.horizontal?this._scrollViewUITrans.width:this._scrollViewUITrans.height},n.getContentLength=function(){return this._scrollView.horizontal?this._totalRow*this.cw-this._style.spacing.x+this._style.padding.x+this._style.padding.width:this._totalRow*this.ch-this._style.spacing.y+this._style.padding.y+this._style.padding.height},n.scrollerToCenterIndex=function(t,s,i){void 0===s&&(s=0),void 0===i&&(i=!0);var e=this.getItemAbsY(t);this.scrollerToCenterPos(e,s,i)},n.scrollerToCenterPos=function(t,s,i){var e;void 0===s&&(s=0),void 0===i&&(i=!0),e=this._scrollView.horizontal?new g((t-this._scrollViewUITrans.width/2)/(this.getContentLength()-this._scrollViewUITrans.width),0):new g(0,(t-this._scrollViewUITrans.height/2)/(this.getContentLength()-this._scrollViewUITrans.height)),this._scrollView.scrollTo(e,s,i)},n.scrollerToIndex=function(t,s,i){var e;void 0===s&&(s=0),void 0===i&&(i=!0),e=this._scrollView.horizontal?this._style.rightToLeft?new g((this.getItemAbsY(t)+this._ns.width/2-this._scrollViewUITrans.width)/(this.getContentLength()-this._scrollViewUITrans.width),0):new g((this.getItemAbsY(t)-this._ns.width/2)/(this.getContentLength()-this._scrollViewUITrans.width),0):this._style.bottomToTop?new g(0,(this.getItemAbsY(t)-this._ns.height/2)/(this.getContentLength()-this._scrollViewUITrans.height)):new g(0,(this.getItemAbsY(t)+this._ns.height/2-this._scrollViewUITrans.height)/(this.getContentLength()-this._scrollViewUITrans.height)),this._scrollView.scrollTo(e,s,i)},n.scrollerToPage=function(t,s,i){void 0===s&&(s=0),void 0===i&&(i=!0);var e=t*this.getScrollLength();this.scrollerToPos(e,s,i)},n.scrollerToPos=function(t,s,i){var e;void 0===s&&(s=0),void 0===i&&(i=!0),e=this._scrollView.horizontal?this._style.rightToLeft?new g((this._contentUITrans.width-t-this._scrollViewUITrans.width)/(this.getContentLength()-this._scrollViewUITrans.width),0):new g(t/(this.getContentLength()-this._scrollViewUITrans.width),0):this._style.bottomToTop?new g(0,t/(this.getContentLength()-this._scrollViewUITrans.height)):new g(0,(this._contentUITrans.height-t-this._scrollViewUITrans.height)/(this.getContentLength()-this._scrollViewUITrans.height)),this._scrollView.scrollTo(e,s,i)},n.getScrollerPos=function(t){return this._scrollView.horizontal?this._style.rightToLeft?this._contentUITrans.width/2-(this.getItemAbsY(t)+this._ns.width/2-this._scrollViewUITrans.width/2):this._contentUITrans.width/2+(this.getItemAbsY(t)-this._ns.width/2-this._scrollViewUITrans.width/2):this._style.bottomToTop?-this._scrollViewUITrans.height/2-(this.getItemAbsY(t)-this._ns.height/2-this._contentUITrans.height/2):this._scrollViewUITrans.height/2-(this.getItemAbsY(t)+this._ns.height/2-this._contentUITrans.height/2)},n.getItemAbsX=function(t){return this._scrollView.horizontal?this._style.padding.height+this.ch*this.ci(t)+this._ns.height/2:this._style.padding.x+this.cw*this.ci(t)+this._ns.width/2},n.getItemAbsY=function(t){return this._scrollView.horizontal?this._style.padding.x+this.cw*this.ri(t)+this._ns.width/2:this._style.padding.height+this.ch*this.ri(t)+this._ns.height/2},n.getItemPositon=function(t){return this._scrollView.horizontal?new I(this.getItemAbsY(t)-this._contentUITrans.width/2,this.getItemAbsX(t)-this._contentUITrans.height/2,0):new I(this.getItemAbsX(t)-this._contentUITrans.width/2,this.getItemAbsY(t)-this._contentUITrans.height/2,0)},n.update=function(t){if(this._content){var s;s=this._scrollView.horizontal?this._style.rightToLeft?Math.floor((this._content.position.x-this._firstRowScrollerPos)/this.cw):Math.floor((this._firstRowScrollerPos-this._content.position.x)/this.cw):this._style.bottomToTop?Math.floor((this._firstRowScrollerPos-this._content.position.y)/this.ch):Math.floor((this._content.position.y-this._firstRowScrollerPos)/this.ch);var i=f.clamp(s,0,Math.max(this._totalRow-this._listItems.length,0));this.changefirstRowIndex(i)}},n.onSizeChanged=function(){if(this._content){this._scrollView.stopAutoScroll();var t=(this._scrollView.horizontal?this._content.position.x:this._content.position.y)-this._firstRowScrollerPos;this.refreshListSize();for(var s=this._listItems.length;(s=this._listItems.length)<this._spawnRow;){for(var i=[],e=0;e<this._style.rowItemsCount;++e){var o=(this._firstRowIndex+s)*this._style.rowItemsCount+e,h=d(this.prefab).getComponent(u);this.tryRefreshItem(h,o),this._content.addChild(h.node);var n=this.getItemPositon(o);h.node.setPosition(n.x,n.y),h.node.setScale(this._nodeScale),i.push(h)}this._listItems.push(i)}for(;(s=this._listItems.length)>this._spawnRow;){for(var r=0;r<this._style.rowItemsCount;++r)this._content.removeChild(this._listItems[s-1][r].node);this._listItems.splice(s-1,1)}this._firstRowScrollerPos=this.getScrollerPos(0),t=Math.max(Math.min(this.getContentLength()-this.getScrollLength(),t),-this.getPaddingTop()),this._scrollView.horizontal?(this._content.setPosition(this._firstRowScrollerPos+t,0),this._scrollView.scrollToOffset(new g(this._firstRowScrollerPos+t,0))):(this._content.setPosition(0,this._firstRowScrollerPos+t),this._scrollView.scrollToOffset(new g(0,this._firstRowScrollerPos+t)))}},n.changefirstRowIndex=function(t,s){void 0===s&&(s=!1);var i=Math.max(this._listItems.length-Math.abs(t-this._firstRowIndex),0);if(0!=i){if(t>=this._firstRowIndex){for(;t>this._firstRowIndex;){var e=this._listItems.shift();this._listItems.push(e),++this._firstRowIndex;for(var o=0;o<e.length;++o)e[o].node.setSiblingIndex(e[o].node.parent.children.length-1),this.refreshItemAndPos(this._lastRowItemIndexStart+o)}if(!s)return;for(var h=0;h<i;++h)for(var n=0;n<this._listItems[h].length;++n)this.refreshItemAndPos(this._firstShowIndex+h*this._style.rowItemsCount+n)}else if(t<this._firstRowIndex){for(;t<this._firstRowIndex;){var r=this._listItems.pop();this._listItems.unshift(r),--this._firstRowIndex;for(var l=r.length-1;l>=0;--l)r[l].node.setSiblingIndex(0),this.refreshItemAndPos(this._firstShowIndex+l)}if(!s)return;for(var _=this._listItems.length-i;_<this._listItems.length;++_)for(var a=0;a<this._listItems[_].length;++a)this.refreshItemAndPos(this._firstShowIndex+_*this._style.rowItemsCount+a)}}else this.refreshAll(t)},n.refreshAll=function(t){this._firstRowIndex=t;for(var s=0;s<this._listItems.length;++s)for(var i=0;i<this._listItems[s].length;++i)this.refreshItemAndPos(this._firstShowIndex+s*this._style.rowItemsCount+i)},n.refreshItemAndPos=function(t){if(void 0===t&&(t=this._listdata.length-1),!(t<this._firstShowIndex||t>this._lastShowIndex)){var s=Math.floor((t-this._firstShowIndex)/this._style.rowItemsCount),i=t%this._style.rowItemsCount;this.tryRefreshItem(this._listItems[s][i],t),this._listItems[s][i].node.setPosition(this.getItemPositon(t))}},n.refreshItem=function(t){if(void 0===t&&(t=this._listdata.length-1),!(t<this._firstShowIndex||t>this._lastShowIndex)){var s=Math.floor((t-this._firstShowIndex)/this._style.rowItemsCount),i=t%this._style.rowItemsCount;this.tryRefreshItem(this._listItems[s][i],t)}},n.refreshList=function(){if(this._content){this._scrollView.stopAutoScroll();var t=Math.ceil(this._listdata.length/this._style.rowItemsCount),s=(this._scrollView.horizontal?this._content.position.x:this._content.position.y)-this._firstRowScrollerPos;this._totalRow=t,this.setContentSize(),this._firstRowScrollerPos=this.getScrollerPos(0),s=Math.max(Math.min(this.getContentLength()-this.getScrollLength(),s),-this.getPaddingTop()),this._scrollView.horizontal?(this._content.setPosition(this._firstRowScrollerPos+s,0),this._scrollView.scrollToOffset(new g(this._firstRowScrollerPos+s,0))):(this._content.setPosition(0,this._firstRowScrollerPos+s),this._scrollView.scrollToOffset(new g(0,this._firstRowScrollerPos+s)));var i=f.clamp(this._firstRowIndex,0,Math.max(this._totalRow-this._listItems.length,0));this.changefirstRowIndex(i,!0)}},n.refreshData=function(t){this._listdata=t,this.refreshList()},h(s,[{key:"_firstShowIndex",get:function(){return this._firstRowIndex*this._style.rowItemsCount}},{key:"_lastShowIndex",get:function(){return(this._firstRowIndex+this._spawnRow)*this._style.rowItemsCount-1}},{key:"_lastRowItemIndexStart",get:function(){return(this._firstRowIndex+this._spawnRow-1)*this._style.rowItemsCount}},{key:"cw",get:function(){return this._ns.width+this._style.spacing.x}},{key:"ch",get:function(){return this._ns.height+this._style.spacing.y}}]),s}(m)).prototype,"prefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C)||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigAnalyze.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./Singleton.ts","./gEvent.ts","./Configs.ts","./Weapon.ts"],(function(n){"use strict";var e,r,t,o,i,a,s,u,c,f,l;return{setters:[function(n){e=n.inheritsLoose,r=n.asyncToGenerator},function(n){t=n.cclegacy,o=n._decorator,i=n.JsonAsset},function(n){a=n.resManager},function(n){s=n.gameDef},function(n){u=n.Singleton},function(n){c=n.gEvent},function(n){f=n.Configs},function(n){l=n.Weapon}],execute:function(){var p;t._RF.push({},"b5605+Ry8FFLbZrzz8hXaKf","ConfigAnalyze",void 0);var g=o.ccclass;o.property,n("ConfigAnalyze",g("ConfigAnalyze")(p=function(n){function t(){var e;return(e=n.call(this)||this).iszip=void 0,e.cfgCount=void 0,e.isloaded=void 0,e.isloaded=!1,e}e(t,n);var o=t.prototype;return o.loadData=function(){var n=r(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isloaded){n.next=2;break}return n.abrupt("return");case 2:return this.iszip=!1,n.next=5,this.loadConfig();case 5:return this.isloaded=!0,c.emit(c.ConfigAnalyze_Loaded),n.abrupt("return",new Promise((function(n,e){n()})));case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),o.loadConfig=function(){var n=r(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Object.getOwnPropertyNames(f),this.cfgCount=e.length,console.log("loadConfig-----------"+this.cfgCount),n.next=5,this.loadMa();case 5:return n.next=7,this.loadWeapon();case 7:return n.abrupt("return",new Promise((function(n,e){n()})));case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),o.loadMa=function(){var n=r(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.GenericConfig(f.AttrShowCfg,"AttrShow");case 2:return n.next=4,this.GenericConfig(f.CharaCfg,"Chara");case 4:return n.next=6,this.GenericConfig(f.ElementRateCfg,"ElementRate");case 6:return n.next=8,this.GenericConfig(f.SkillCfg,"Skill");case 8:return n.next=10,this.GenericConfig(f.SoulStoneCfg,"SoulStone");case 10:return n.abrupt("return",new Promise((function(n,e){n()})));case 11:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),o.loadWeapon=function(){var n=r(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.asyncloadAsset(s.bundleCfg,s.weapon_list_json,i);case 2:e=n.sent,l.GenericConfig(f.WeaponCfg,e.json),f.mapDic.set(f.WeaponCfg,"WeaponCfg");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),o.GenericConfig=function(){var n=r(regeneratorRuntime.mark((function n(e,r,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t="id"),n.next=3,this.analyGenericConfig(e,r,t);case 3:return n.abrupt("return",new Promise((function(n,e){n()})));case 4:case"end":return n.stop()}}),n,this)})));return function(e,r,t){return n.apply(this,arguments)}}(),o.analyGenericConfig=function(){var n=r(regeneratorRuntime.mark((function n(e,r,t){var o,u,c,l,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t="id"),n.next=3,a.asyncloadAsset(s.bundleCfg,r,i);case 3:if(null!=(o=n.sent)){for(u=o.json,c=u.length,l=0;l<c;++l)null==(p=u[l])[t]?console.log(t+" Key is error!"):e.has(p[t])?console.warn(t+" Key is exist!"):e.set(p[t],p);f.mapDic.set(e,r),console.log(r+" loaded!")}else console.error(r+" is error!");return n.abrupt("return",new Promise((function(n,e){n()})));case 6:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),o.GenericConstantConfig=function(){var n=r(regeneratorRuntime.mark((function n(e){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.analyGenericConstantConfig(e),n.abrupt("return",new Promise((function(n,e){r?n(r):e()})));case 2:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),o.analyGenericConstantConfig=function(){var n=r(regeneratorRuntime.mark((function n(e){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.asyncloadAsset(s.bundleCfg,e,i);case 2:return r=n.sent,n.abrupt("return",new Promise((function(n,t){r?n(r.json):(console.error(e+" is error!"),t())})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),t}(u()))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/Configs.ts",["cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.cclegacy,t=e._decorator}],execute:function(){var r,o;n._RF.push({},"a4f2cuvOKREuInEGWXeyJwi","Configs",void 0);var a=t.ccclass;t.property,e("Configs",a("Configs")(((o=function(){function e(){}return e.GetCfg=function(n,t){var r=e.mapDic.get(n);if(!r)throw new Error("!GetCfg !map:"+n);if(n.has(t))return n.get(t);console.error("! Configs ["+r+"] get key:["+t+"]")},e}()).mapDic=new Map,o.AttrShowCfg=new Map,o.CharaCfg=new Map,o.ElementRateCfg=new Map,o.SkillCfg=new Map,o.SoulStoneCfg=new Map,o.WeaponCfg=new Map,r=o))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/dataBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.asyncToGenerator},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"862e0Y5qRFORow6KuaMi4sy","dataBase",void 0);t("dataBase",function(){function t(){}var n=t.prototype;return n.savedata=function(){},n.loaddata=function(){var t=e(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n.update=function(t){},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/dateutils.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"18879wVB1VMjZP9wxGTO0p7","dateutils",void 0);var e=t("dateutils",function(){function t(){}return t.formatMiniDateTime=function(r){return t.MINI_DATE_TIME_BASE+(2147483647&r)*t.MS_PER_SECOND},t.formatServerTime=function(r){return(r-t.MINI_DATE_TIME_BASE)/t.MS_PER_SECOND},t.GetFormatSecond=function(r,e){return void 0===e&&(e=1),t.getFormatBySecond(r,e)},t.getFormatBySecond=function(t,r,e,_){void 0===r&&(r=1),void 0===e&&(e=2),void 0===_&&(_="-");var o="",i=1e3*t;switch(r){case this.TIME_FORMAT_1:o=this.format_1(i);break;case this.TIME_FORMAT_2:o=this.format_2(i);break;case this.TIME_FORMAT_3:o=this.format_3(i);break;case this.TIME_FORMAT_4:o=this.format_4(i);break;case this.TIME_FORMAT_5:o=this.format_5(i,e);break;case this.TIME_FORMAT_6:o=this.format_6(i);break;case this.TIME_FORMAT_7:o=this.format_7(i);break;case this.TIME_FORMAT_8:o=this.format_8(i);break;case this.TIME_FORMAT_9:o=this.format_9(i);break;case this.TIME_FORMAT_11:o=this.format_11(i);break;case this.TIME_FORMAT_14:o=this.format_14(i);break;case this.TIME_FORMAT_15:o=this.format_15(i,_)}return o},t.format_1=function(r){var e=0,_="##:##:##";return e=Math.floor(r/t.MS_PER_HOUR),_=_.replace("##",t.formatTimeNum(e)),e&&(r-=e*t.MS_PER_HOUR),e=Math.floor(r/t.MS_PER_MINUTE),_=_.replace("##",t.formatTimeNum(e)),e&&(r-=e*t.MS_PER_MINUTE),e=Math.floor(r/1e3),_=_.replace("##",t.formatTimeNum(e))},t.format_2=function(t){t-=this.TIME_ZONE_OFFSET;var r=new Date(t),e=r.getFullYear(),_=r.getMonth()+1,o=r.getDate(),i=r.getHours(),a=r.getMinutes(),M=r.getSeconds(),n=i.toString();i<10&&(n="0"+i.toString());var s=a.toString();a<10&&(s="0"+a.toString());var f=M.toString();return M<10&&(f="0"+M.toString()),e+"-"+_+"-"+o+" "+n+":"+s+":"+f},t.format_3=function(t){var r=this.format_1(t).split(":");return r[1]+":"+r[2]},t.format_4=function(t){return t<this.MS_PER_HOUR?Math.floor(t/this.MS_PER_MINUTE)+"分钟前":t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+"小时前":Math.floor(t/this.MS_PER_DAY)+"天前"},t.format_5=function(t,r,e){return void 0===r&&(r=2),void 0===e&&(e=null),this.FormatType5(t,r,e)},t.format_12=function(t,r){void 0===r&&(r=2);var e="";if(r>=4){var _=Math.floor(t/this.MS_PER_DAY);_>0&&(t-=_*this.MS_PER_DAY,e+=(e.length>0?this.formatTimeNum(_):_)+"天")}if(r>=3){var o=Math.floor(t/this.MS_PER_HOUR);o>0&&(t-=o*this.MS_PER_HOUR,e+=(e.length>0?this.formatTimeNum(o):o)+"小时")}var i=Math.floor(t/this.MS_PER_MINUTE);return i>0&&(t-=i*this.MS_PER_MINUTE,e+=(e.length>0?this.formatTimeNum(i):i)+"分"),e},t.format_13=function(t,r){return void 0===r&&(r=2),this.FormatType5(t,r,":")},t.FormatType5=function(t,r,e){void 0===r&&(r=2),void 0===e&&(e=null);var _="";if(r>=4){var o=Math.floor(t/this.MS_PER_DAY);o>0&&(t-=o*this.MS_PER_DAY,_+=(_.length,this.formatTimeNum(o)+(e||"天")))}if(r>=3){var i=Math.floor(t/this.MS_PER_HOUR);i>0&&(t-=i*this.MS_PER_HOUR,_+=(_.length,this.formatTimeNum(i)+(e||"小时")))}if(r>=2){var a=Math.floor(t/this.MS_PER_MINUTE);a>0&&(t-=a*this.MS_PER_MINUTE,_+=(_.length,this.formatTimeNum(a)+(e||"分")))}var M=Math.floor(t/1e3);return _+=this.formatTimeNum(M)+(e?"":"秒")},t.format_6=function(t){t-=this.TIME_ZONE_OFFSET;var r=new Date(t),e=r.getHours(),_=r.getMinutes(),o=r.getSeconds();return this.formatTimeNum(e)+":"+this.formatTimeNum(_)+":"+this.formatTimeNum(o)},t.format_7=function(t){return t<this.MS_PER_HOUR?"&lt;1小时":t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+"小时":Math.floor(t/this.MS_PER_DAY)+"天"},t.format_8=function(t){t-=this.TIME_ZONE_OFFSET;var r=new Date(t);return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()},t.format_14=function(t){var r=new Date(t||0),e=r.getFullYear(),_=r.getMonth()+1,o=r.getDate();r.getHours(),r.getMinutes();return e+"年"+_+"月"+o+"日"},t.format_15=function(t,r){void 0===r&&(r="-");var e=new Date(t||0),_=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),a=(e.getHours(),e.getMinutes(),o.toString());o<10&&(a="0"+o.toString());var M=i.toString();return i<10&&(M="0"+i.toString()),_+r+a+r+M},t.format_16=function(r,e){var _;if(r>=t.MS_PER_DAY){if(_=Math.floor(r/t.MS_PER_DAY)+"天"+Math.floor(r%t.MS_PER_DAY/t.MS_PER_HOUR)+"时",e)_+=Math.floor(r%t.MS_PER_HOUR/60)+"分";return _}return this.format_1(r)},t.format_17=function(r,e){return void 0===e&&(e=":"),r>=t.MS_PER_DAY?Math.floor(r/t.MS_PER_DAY)+e+Math.floor(r%t.MS_PER_DAY/t.MS_PER_HOUR)+e+Math.floor(r%t.MS_PER_HOUR/t.MS_PER_MINUTE)+e+Math.floor(r%t.MS_PER_MINUTE/t.MS_PER_SECOND):this.format_1(r)},t.format_9=function(t){var r=Math.floor(t/this.MS_PER_HOUR);t-=r*this.MS_PER_HOUR;var e=Math.floor(t/this.MS_PER_MINUTE);return t-=e*this.MS_PER_MINUTE,r+"小时"+e+"分钟"+Math.floor(t/1e3)+"秒"},t.format_11=function(t,r,e){void 0===r&&(r=!0),void 0===e&&(e=!1);var _=Math.floor(t/this.MS_PER_HOUR);t-=_*this.MS_PER_HOUR;var o=Math.floor(t/this.MS_PER_MINUTE);t-=o*this.MS_PER_MINUTE;var i=Math.floor(t/1e3),a=o<10&&e?"0"+o:o,M=i<10&&e?"0"+i:i;return r?(_<10&&e?"0"+_:_)+":"+a+":"+M:0==_?a+":"+M:void 0},t.formatTimeNum=function(t){return t>=10?t.toString():"0"+t},t.StrToDate=function(t){if(null==t)return null;if(this.m_StrToDate[t])return this.m_StrToDate[t];try{var r=t.split("-");if(r){var e=r[0],_=r[1],o=new Date(0);if(e){var i=e.split(".");i&&(i[0]&&o.setFullYear(Number(i[0])),i[1]&&o.setMonth(Number(i[1])-1),i[2]&&o.setDate(Number(i[2])))}if(_){var a=_.split(":");a&&(a[0]&&o.setHours(Number(a[0])),a[1]&&o.setMinutes(Number(a[1])),a[2]&&o.setSeconds(Number(a[2])))}return this.m_StrToDate[t]=o,o}}catch(t){}return console.log("invalid date => "+t),null},t.GetDay=function(t){return 0==t.getDay()?7:t.getDay()},t.getGMT8Date=function(r){var e,_=new Date(r);return e=(-480-_.getTimezoneOffset())*t.MS_PER_MINUTE,_=new Date(r-e)},t.compareOneDayTime=function(t,r,e,_){var o=t.split(":"),i=o[0],a=o[1],M=3==o.length?o[2]:0;return parseInt(this.formatTimeNum(r)+this.formatTimeNum(e)+this.formatTimeNum(_||0))-parseInt(this.formatTimeNum(i)+this.formatTimeNum(a)+this.formatTimeNum(M||0))},t.formatTimeStamp=function(t){return Date.parse(""+t.replace(/-/g,"/"))},t.formatDifferDay=function(r){var e=(r-(new Date).getTime())/t.MS_PER_DAY;return Math.floor(e)},t}());e.m_StrToDate={},e.TIME_FORMAT_1=1,e.TIME_FORMAT_2=2,e.TIME_FORMAT_3=3,e.TIME_FORMAT_4=4,e.TIME_FORMAT_5=5,e.TIME_FORMAT_6=6,e.TIME_FORMAT_7=7,e.TIME_FORMAT_8=8,e.TIME_FORMAT_9=9,e.TIME_FORMAT_11=11,e.TIME_FORMAT_14=14,e.TIME_FORMAT_15=15,e.DAYS_OF_WEEK=7,e.HOURS_PER_DAY=24,e.SECONDS_PER_HOUR=3600,e.MS_PER_SECOND=1e3,e.MS_PER_MINUTE=6e4,e.MS_PER_HOUR=36e5,e.MS_PER_DAY=864e5,e.MS_PER_MONTH=30*e.MS_PER_DAY,e.MS_PER_YEAR=12*e.MS_PER_MONTH,e.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*e.MS_PER_MINUTE,e.TIME_ZONE_OFFSET=0,r._RF.pop()}}}));

System.register("chunks:///_virtual/ElementRate.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"addb4VemCZBbLz6FkafHa4h","ElementRate",void 0);t("default",(function(){this.id=void 0,this.rate=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/gameApp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigAnalyze.ts","./uiManager.ts","./playerData.ts"],(function(n){"use strict";var t,e,i,a,r;return{setters:[function(n){t=n.asyncToGenerator},function(n){e=n.cclegacy},function(n){i=n.ConfigAnalyze},function(n){a=n.uiManager},function(n){r=n.playerData}],execute:function(){e._RF.push({},"f096cS2FbNLOLpHxewiwkTW","gameApp",void 0);n("gameApp",function(){function n(n){this.bInit=!1,this.m_gameNode=n,this.bInit=!1,this.init()}var e=n.prototype;return e.init=function(){this.addListener(),a.Ins.init(this.m_gameNode),this.bInit=!0,this.start()},e.addListener=function(){},e.start=function(){var n=t(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.Ins.loadData();case 2:return r.Ins.init(),r.Ins.mainData.init(),n.next=6,r.Ins.loaddata();case 6:return n.next=8,a.Ins.createMask();case 8:a.Ins.open("mainTopWin");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.update=function(n){this.bInit&&(r.Ins.update(n),a.Ins.update(n))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/gameData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameDef.ts","./ObjectUtil.ts"],(function(t){"use strict";var e,n,r,u,o;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){r=t.eAttrType,u=t.AttrKV},function(t){o=t.default}],execute:function(){n._RF.push({},"cf625p6V7VAI4EgU73EWnIL","gameData",void 0);t("gameData",function(){function t(){}return t.compAttrKV=function(){for(var n=[],r=arguments.length,u=new Array(r),o=0;o<r;o++)u[o]=arguments[o];for(var a=0,c=u;a<c.length;a++)for(var f,i=c[a],l=e(i);!(f=l()).done;){var p=f.value;t._compAttrKV(n,p)}return n},t._compAttrKV=function(t,e){var n=t.findIndex((function(t){return t.type==e.type}));-1==n?t.push(o.deepCopy(e)):t[n].value+=e.value},t.compPrecentAttrKV=function(t){for(var e=function(e){var n=t.findIndex((function(t){return t.type==e}));-1==n&&(n=t.length,t.push(new u(e,0)));var o=t.findIndex((function(t){return t.type==r.HPPrecent+e}));if(-1==o)return"continue";t[n].value=Math.floor(t[n].value*(1+t[o].value/1e4)),t.splice(o,1)},n=r.HP;n<=r.DEF;++n)e(n)},t.getAttrKV=function(t,e){var n=t.findIndex((function(t){return t.type==e}));if(-1!=n)return t[n]},t.getAttrValue=function(t,e){var n=t.findIndex((function(t){return t.type==e}));return-1==n?0:t[n].value},t.FormatNumber=function(t){return(t>=1e8?Math.floor(t/1e8)+"亿":"")+(t>=1e4?Math.floor(t%1e8/1e4)+"万":"")+Math.floor(t%1e4)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/gameDef.ts",["cc"],(function(e){"use strict";var t,a;return{setters:[function(e){t=e.cclegacy,a=e._decorator}],execute:function(){var n,i;e({eAttrType:void 0,eAttrValueShowType:void 0,eElement:void 0,eSeason:void 0,eSkillType:void 0,eSortOrder:void 0,eWeaponShowFilter:void 0,eWeaponSortType:void 0,eWeaponType:void 0}),t._RF.push({},"62d06F19ixE1o19uu329MxJ","gameDef",void 0);var o,r,l,s,_,S,c,u=a.ccclass;a.property;!function(e){e[e.Fire=0]="Fire",e[e.Water=1]="Water",e[e.Earth=2]="Earth",e[e.Wind=3]="Wind",e[e.Light=4]="Light",e[e.Dark=5]="Dark",e[e.Size=6]="Size"}(o||(o=e("eElement",{}))),function(e){e[e.Spring=0]="Spring",e[e.Summer=1]="Summer",e[e.Autumn=2]="Autumn",e[e.Winter=3]="Winter",e[e.Size=4]="Size"}(r||(r=e("eSeason",{}))),function(e){e[e.Close=1]="Close",e[e.Long=2]="Long",e[e.Magic=3]="Magic",e[e.All=9]="All"}(l||(l=e("eWeaponType",{}))),function(e){e[e.HP=0]="HP",e[e.MP=1]="MP",e[e.ATK=2]="ATK",e[e.DEF=3]="DEF",e[e.HPPrecent=4]="HPPrecent",e[e.MPPrecent=5]="MPPrecent",e[e.ATKPrecent=6]="ATKPrecent",e[e.DEFPrecent=7]="DEFPrecent",e[e.FC=8]="FC",e[e.NormalHit=9]="NormalHit",e[e.Crit=10]="Crit",e[e.CritPrecent=11]="CritPrecent",e[e.GiveDamagePrecent=12]="GiveDamagePrecent",e[e.ReceiveDamagePrecent=13]="ReceiveDamagePrecent",e[e.Hate=14]="Hate",e[e.MPCostPrecent=15]="MPCostPrecent",e[e.FCDamage=16]="FCDamage",e[e.Invalid_state_Begin=20]="Invalid_state_Begin",e[e.Invalid_state_Blind=20]="Invalid_state_Blind",e[e.Invalid_state_Palalysis=21]="Invalid_state_Palalysis",e[e.Invalid_state_Poison=22]="Invalid_state_Poison",e[e.Invalid_state_Silence=23]="Invalid_state_Silence",e[e.Invalid_state_Curse=24]="Invalid_state_Curse",e[e.Invalid_state_Panic=25]="Invalid_state_Panic",e[e.Invalid_state_Stone=26]="Invalid_state_Stone",e[e.Invalid_state_End=27]="Invalid_state_End",e[e.State_Begin=30]="State_Begin",e[e.State_Blind=30]="State_Blind",e[e.State_Palalysis=31]="State_Palalysis",e[e.State_Poison=32]="State_Poison",e[e.State_Silence=33]="State_Silence",e[e.State_Curse=34]="State_Curse",e[e.State_Panic=35]="State_Panic",e[e.State_Stone=36]="State_Stone",e[e.State_End=37]="State_End",e[e.Up=40]="Up",e[e.Down=41]="Down"}(s||(s=e("eAttrType",{}))),function(e){e[e.HP=0]="HP",e[e.MP=1]="MP",e[e.ATK=2]="ATK",e[e.DEF=3]="DEF",e[e.Default=10]="Default",e[e.STAR=11]="STAR"}(_||(_=e("eWeaponSortType",{}))),function(e){e[e.ASCE=0]="ASCE",e[e.DESC=1]="DESC"}(S||(S=e("eSortOrder",{}))),function(e){e[e.showAll=0]="showAll",e[e.showHave=1]="showHave",e[e.showRemain=2]="showRemain",e[e.Size=3]="Size"}(c||(c=e("eWeaponShowFilter",{})));var d,v=e("eWeaponShowFilterString",new Map);v.set(c.showAll,"Show All"),v.set(c.showHave,"Show Have"),v.set(c.showRemain,"Show Remain"),function(e){e[e.Normal=0]="Normal",e[e.Precent=1]="Precent",e[e.Hide=2]="Hide"}(d||(d=e("eAttrValueShowType",{})));var P;e("AttrKV",(function(e,t){this.type=void 0,this.value=void 0,this.type=e,this.value=t}));!function(e){e[e.Damage=0]="Damage",e[e.Heal=1]="Heal",e[e.Buff=2]="Buff",e[e.StateBuff=3]="StateBuff",e[e.Size=4]="Size"}(P||(P=e("eSkillType",{})));e("gameDef",u("gameDef")(((i=function(){}).bundleCfg="cfg",i.bundleIcon="icon",i.bundleEffect="effect",i.bundleUI="ui",i.char_list_json="chara_list",i.weapon_list_json="weapon_list",i.Teams_Count=10,i.Hero_Max_Weapon_Count=5,i.Battles_Count=10,i.Battle_Hero_Count=5,i.Battle_Turn_Count=10,i.ElementString=["火","水","土","风","光","暗"],i.SeasonString=["春","夏","秋","冬"],i.WeaponAtkPrecentBase=.7,i.EnemyDef=0,n=i))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/gEvent.ts",["cc"],(function(e){"use strict";var n,_;return{setters:[function(e){n=e.cclegacy,_=e.EventTarget}],execute:function(){n._RF.push({},"e1596YRJOZOzb8LC3+v5epq","gEvent",void 0);var t=e("gEvent",function(){function e(){}return e.emit=function(n,_,t,a,o,i){e.et.emit(n,_,t,a,o,i)},e.on=function(n,_,t){e.et.on(n,_,t)},e.off=function(n,_,t){e.et.off(n,_,t)},e}());t.et=new _,t.Game_OnResize="Game_OnResize",t.Game_OnPause="Game_OnPause",t.Game_OnResume="Game_OnResume",t.Game_TimeUpdate_Second="Game_TimeUpdate_Second",t.Net_OnConnected="Net_OnConnected",t.Net_ConnectedClosed="Net_ConnectedClosed",t.UI_Open="UI_Open",t.UI_Close="UI_Close",t.UI_ShowMask="UI_ShowMask",t.UI_OpenFinished="UI_OpenFinished",t.UI_CloseFinished="UI_CloseFinished",t.Input_Touch_Up="Input_Touch_Up",t.Entity_Selected="Entity_Selected",t.Entity_UnSelected="Entity_Selected",t.Language_Set="Language_Set",t.Language_LoadSprite_Begin="Language_LoadSprite_Begin",t.Language_LoadSprite_End="Language_LoadSprite_End",t.Input_Enable="Enable_Input",t.MainCamera_Follow="MainCamera_Follow",t.Net_Login_OnConnected="Net_Login_OnConnected",t.Net_OnConnectedWallet="Net_OnConnectedWallet",t.UI_Log="UI_Log",t.UI_Loading_Progress="UI_Loading_Progress",t.UI_Tips_Over="UI_Tips_Over",t.UI_ShowCursor="UI_ShowCursor",t.Hero_Update="Hero_Update",t.UI_Hero_FilterChange="UI_Hero_FilterChange",t.UI_Hero_FilterSkillEffectChange="UI_Hero_FilterSkillEffectChange",t.UI_Weapon_FilterChange="UI_Weapon_FilterChange",t.UI_Team_Change="UI_Team_Change",t.UI_Team_Select_Change="UI_Team_Select_Change",t.UI_Team_SelectWeapon_Change="UI_Team_SelectWeapon_Change",t.UI_Team_HeroWeapon_Change="UI_Team_HeroWeapon_Change",t.UI_Battle_CalcEnd="UI_Battle_CalcEnd",t.UI_Battle_HeroSelect="UI_Battle_HeroSelect",t.ConfigAnalyze_Loaded="ConfigAnalyze_Loaded",t.CTIMER_UI_Update="CTIMER_UI_Update",n._RF.pop()}}}));

System.register("chunks:///_virtual/Hero.ts",["cc","./gameDef.ts"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy},null],execute:function(){e._RF.push({},"de13apg+8lNbYpdgez2U21J","Hero",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/heroData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Configs.ts","./gameDef.ts","./ObjectUtil.ts","./gEvent.ts","./dataBase.ts","./gameData.ts","./playerData.ts","./skillData.ts"],(function(t){"use strict";var e,a,r,s,i,n,o,u,c,f,l,h,p,v,k,m;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,a=t.createClass,r=t.inheritsLoose,s=t.asyncToGenerator},function(t){i=t.cclegacy,n=t._decorator},function(t){o=t.Configs},function(t){u=t.eAttrType,c=t.AttrKV},function(t){f=t.default},function(t){l=t.gEvent},function(t){h=t.dataBase},function(t){p=t.gameData},function(t){v=t.playerData,k=t.DataType},function(t){m=t.playerSkill}],execute:function(){var d;i._RF.push({},"7765bL/1yBG+Y1VFxyEa8HL","heroData",void 0);var w=n.ccclass,g=(n.property,t("playerHero",function(){function t(t){this.hero=void 0,this._status=[],this.skills=[],this._active=!1,this._customAwake=-1,this._customStatus=[],this.teamHero=void 0,this.finalStatus=[],this.hero=t,this._status.push(new c(u.HP,t.hp)),this._status.push(new c(u.MP,t.mp)),this._status.push(new c(u.ATK,t.atk)),this._status.push(new c(u.DEF,t.def))}var r=t.prototype;return r.initSkill=function(){this.skills=[],this.skills.push(new m(this.hero,1)),this.skills.push(new m(this.hero,2))},r.switchAwake=function(){-1==this._customAwake&&(this._customAwake=4,this._customStatus=f.deepCopy(this._status)),this._customAwake+=2,this._customAwake>4&&(this._customAwake=0),l.emit(l.Hero_Update,this.hero.id)},r.calcFinalStatus=function(){var t=[this.status];if(this.teamHero)for(var a,r=e(this.teamHero.weapons);!(a=r()).done;){var s=a.value;if(s){var i=v.Ins.weaponData.weapons.get(s.weapon_id);i&&t.push(i.weapon.status)}}this.finalStatus=p.compAttrKV.apply(p,t),p.compPrecentAttrKV(this.finalStatus)},a(t,[{key:"active",get:function(){return this._active},set:function(t){this._active=t,l.emit(l.Hero_Update,this.hero.id)}},{key:"awake",get:function(){return-1==this._customAwake?4:this._customAwake}},{key:"status",get:function(){return-1==this._customAwake?this._status:this._customStatus}},{key:"slots",get:function(){switch(this.awake){case 0:case 1:return 3;case 2:case 3:return 4;case 4:return 5;default:throw new Error("!this.awake ["+this.awake+"]")}}},{key:"priority",get:function(){return this.teamHero?this.teamHero.priority:0},set:function(t){v.Ins.teamData.setHeroPriority(this,t)}}]),t}())),y=t("heroFilter",(function(){this.element=[],this.season=[],this.weaponType=[],this.star=[],this.skillEffect=[]}));t("heroData",w("heroData")(d=function(t){function a(){var e;return(e=t.call(this)||this).heros=new Map,e.filter=void 0,e.addListener(),e.init(),e}r(a,t);var i=a.prototype;return i.addListener=function(){},i.init=function(){for(var t,a=e(o.CharaCfg.values());!(t=a()).done;){var r=t.value;this.heros.set(r.id,new g(r))}},i.initSkill=function(){for(var t,a=e(this.heros.values());!(t=a()).done;){t.value.initSkill()}},i.savedata=function(){for(var t,a={},r=e(this.heros.values());!(t=r()).done;){var s=t.value,i=a[s.hero.id]={};if(i.active=s.active,-1!=s._customAwake){i.customAwake=s._customAwake,i.customAttr={};for(var n,o=e(s._customStatus);!(n=o()).done;){var u=n.value;i.customAttr[u.type]=u.value}}}a.filter=this.filter,localStorage.setItem(k.heroData,JSON.stringify(a))},i.loaddata=function(){var t=s(regeneratorRuntime.mark((function t(){var a,r,s,i,n,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem(k.heroData)){t.next=4;break}return this.filter=new y,t.abrupt("return");case 4:r=JSON.parse(a),t.t0=regeneratorRuntime.keys(r);case 6:if((t.t1=t.t0()).done){t.next=21;break}if("filter"!=(s=t.t1.value)){t.next=10;break}return t.abrupt("continue",6);case 10:if(i=this.heros.get(parseInt(s))){t.next=14;break}return console.warn("!weapon data:"+s),t.abrupt("continue",6);case 14:if(i.active=r[s].active,r[s].customAwake){t.next=17;break}return t.abrupt("continue",6);case 17:for(i._customAwake=r[s].customAwake,n=e(r[s].customAttr);!(o=n()).done;)u=o.value,i._customStatus.push(new c(parseInt(u),r[s].customAttr[u]));t.next=6;break;case 21:r.filter?this.filter=r.filter:this.filter=new y;case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.deleteData=function(){localStorage.removeItem(k.heroData)},i.getSortedList=function(t){for(var a,r=this.filter,s=[],i=e(this.heros.values());!(a=i()).done;){var n=a.value;if(!(r.element.length>0&&-1==r.element.indexOf(n.hero.eleType))&&!(r.star.length>0&&-1==r.star.indexOf(n.hero.rarity)||r.season.length>0&&-1==r.season.indexOf(n.hero.seasonType)||r.weaponType.length>0&&-1==r.weaponType.indexOf(n.hero.weaponType))){if(r.skillEffect.length>0){for(var o,c=!0,f=function(){for(var t,a=o.value,r=!1,s=e(n.skills);!(t=s()).done;){if(t.value.effect.find((function(t,e,r){return t.matchFilter(a)}))){r=!0;break}}if(!r)return c=!1,"break"},l=e(r.skillEffect);!(o=l()).done;){if("break"===f())break}if(!c)continue}(t||n.active)&&s.push(n)}}return s.sort((function(t,e){return t.active==e.active?p.getAttrValue(e.status,u.ATK)-p.getAttrValue(t.status,u.ATK):t.active?-1:1})),s},i.getBattleHeroList=function(t){for(var a,r=[],s=e(v.Ins.heroData.heros.values());!(a=s()).done;){var i=a.value;if(!(t.element.length>0&&-1==t.element.indexOf(i.hero.eleType))){if(t.skillEffect.length>0){for(var n,o=!1,c=function(){for(var t,a=n.value,r=e(i.skills);!(t=r()).done;){if(t.value.effect.find((function(t,e,r){return t.matchFilter(a)}))){o=!0;break}}if(o)return"break"},f=e(t.skillEffect);!(n=f()).done;){if("break"===c())break}if(!o)continue}r.push(i)}}return r.sort((function(t,e){return p.getAttrValue(e.finalStatus,u.ATK)-p.getAttrValue(t.finalStatus,u.ATK)})),r},a.calcRealCritRate=function(t){return t>2e3?1:t<0?0:1-25e-8*Math.pow(t-2e3,2)},a}(h))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/heroFilterWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiHeroFilter.ts"],(function(t){"use strict";var e,i,r,o,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator},function(t){o=t.uiBase,n=t.eUILayer},function(t){s=t.uiHeroFilter}],execute:function(){var u;i._RF.push({},"8198bODIJpKeaOaCvR4a0cb","heroFilterWin",void 0);var c=r.ccclass;r.property,t("heroFilterWin",c("heroFilterWin")(u=function(t){function i(){var e;return(e=t.call(this)||this)._uiInfo.prefabPath="filter/prefabs/heroFilterWin",e._uiInfo.uiLayer=n.eUIL_Dialog,e}return e(i,t),i.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(s).init(this,this.m_args)},i}(o))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/heroInfoWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./heroData.ts","./uiBase.ts","./uiHeroIcon.ts","./ComponentList.ts","./uiSkillInfo.ts"],(function(t){"use strict";var i,n,e,o,r,a,u,l,s,c,f,h,p,b,I,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Label,l=t.Node,s=t.Component},function(t){c=t.heroData},function(t){f=t.uiBase,h=t.eUILayer},function(t){p=t.uiHeroIcon,b=t.uiHeroIconData},function(t){I=t.ComponentList},function(t){y=t.uiSkillInfo}],execute:function(){var _,d,g,L,m,w,S,v,k,B,z,A,D,C,H,N,O,W,F,R,T,E;r._RF.push({},"529a0Q+g7JAi6weFKdW5mPd","heroInfoWin",void 0);var P=a.ccclass,U=a.property,x=t("uiHeroInfo",(_=P("uiHeroInfo"),d=U(p),g=U(u),L=U(u),m=U(u),w=U(l),S=U(I),v=U(y),k=U(y),B=U(l),_((D=i((A=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"heroIcon",D,o(i)),e(i,"LabelStar",C,o(i)),e(i,"LabelName",H,o(i)),e(i,"LabelAdvAttr",N,o(i)),e(i,"ButtonStatus",O,o(i)),e(i,"ListAttr",W,o(i)),e(i,"uiSkillInfo1",F,o(i)),e(i,"uiSkillInfo2",R,o(i)),e(i,"ButtonOk",T,o(i)),i._data=void 0,i._win=void 0,i}n(i,t);var r=i.prototype;return r.onLoad=function(){this.ButtonOk.on(l.EventType.TOUCH_END,this.onButtonOk,this),this.ButtonStatus.on(l.EventType.TOUCH_END,this.onButtonStatus,this)},r.onDestroy=function(){this._win=null},r.init=function(t,i){this._win=t;var n=this._data=i[0];this.heroIcon.init(new b(n),this._win),this.LabelStar.string=n.hero.rarity.toString(),this.LabelName.string=n.hero.charaName,this.LabelAdvAttr.string="暴击: "+n.hero.crit+"("+(100*c.calcRealCritRate(n.hero.crit)).toFixed(2)+"%)\n初始仇恨: "+n.hero.hate+"\nFC掉落量: "+n.hero.fc,this.uiSkillInfo1.init(this._win,this._data.skills[0]),this.uiSkillInfo2.init(this._win,this._data.skills[1]),this.ListAttr.init(this._win,this._data.status)},r.onButtonStatus=function(){},r.onButtonOk=function(){var t;null==(t=this._win)||t.close()},i}(s)).prototype,"heroIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(A.prototype,"LabelStar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(A.prototype,"LabelName",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(A.prototype,"LabelAdvAttr",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(A.prototype,"ButtonStatus",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(A.prototype,"ListAttr",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(A.prototype,"uiSkillInfo1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(A.prototype,"uiSkillInfo2",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(A.prototype,"ButtonOk",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=A))||z));t("heroInfoWin",P("heroInfoWin")(E=function(t){function i(){var i;return(i=t.call(this)||this)._uiInfo.prefabPath="hero/prefabs/heroInfoWin",i._uiInfo.uiLayer=h.eUIL_Dialog,i}return n(i,t),i.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(x).init(this,this.m_args)},i}(f))||E);r._RF.pop()}}}));

System.register("chunks:///_virtual/heroSkillFilterWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiHeroSkillFilter.ts"],(function(i){"use strict";var t,e,r,o,n,l;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,r=i._decorator},function(i){o=i.uiBase,n=i.eUILayer},function(i){l=i.uiHeroSkillFilter}],execute:function(){var s;e._RF.push({},"a29c0bImRROD7puUl7FHozz","heroSkillFilterWin",void 0);var u=r.ccclass;r.property,i("heroSkillFilterWin",u("heroSkillFilterWin")(s=function(i){function e(){var t;return(t=i.call(this)||this)._uiInfo.prefabPath="filter/prefabs/heroSkillFilterWin",t._uiInfo.uiLayer=n.eUIL_Dialog,t}return t(e,i),e.prototype.init=function(){i.prototype.init.call(this),this.nodeRoot.getComponent(l).init(this,this.m_args)},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/heroWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiHero.ts"],(function(i){"use strict";var n,t,e,o,r,u;return{setters:[function(i){n=i.inheritsLoose},function(i){t=i.cclegacy,e=i._decorator},function(i){o=i.uiBase,r=i.eUILayer},function(i){u=i.uiHero}],execute:function(){var s;t._RF.push({},"22517knQXZOm6DYJIG+9EwZ","heroWin",void 0);var c=e.ccclass;e.property,i("heroWin",c("heroWin")(s=function(i){function t(){var n;return(n=i.call(this)||this)._uiInfo.prefabPath="hero/prefabs/heroWin",n._uiInfo.uiLayer=r.eUIL_Win,n._uiInfo.isAlphaBg=!1,n._uiInfo.isAnim=!1,n}return n(t,i),t.prototype.init=function(){i.prototype.init.call(this),this.nodeRoot.getComponent(u).init(this)},t}(o))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/IRelease.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b15503CawFA0apdhZ/+bWF3","IRelease",void 0);e("IRelease",function(){function e(){}return e.prototype.release=function(){},t(e,[{key:"isValid",get:function(){return!1}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AttrShow.ts","./Chara.ts","./ConfigAnalyze.ts","./Configs.ts","./ElementRate.ts","./Hero.ts","./Skill.ts","./SoulStone.ts","./Weapon.ts","./gameApp.ts","./resManager.ts","./uiManager.ts","./battleData.ts","./dataBase.ts","./gameData.ts","./heroData.ts","./mainData.ts","./playerData.ts","./skillData.ts","./teamData.ts","./weaponData.ts","./gameDef.ts","./main.ts","./battleHeroSelectWin.ts","./uiBattleHeroSelect.ts","./uiBattleHeroSelectItem.ts","./battleOptionWin.ts","./battleTeamSwitchWin.ts","./battleWin.ts","./uiBattle.ts","./uiBattleHeroItem.ts","./uiBattleOption.ts","./uiBattleResultItem.ts","./ComponentList.ts","./ComponentListItem.ts","./ComponentScrollList.ts","./TouchHold.ts","./super-layout.ts","./super-scrollview.ts","./uiList.ts","./uiListBase.ts","./uiScrollList.ts","./uiAttr.ts","./uiAttrType.ts","./uiHeroIcon.ts","./uiSkillInfo.ts","./uiWeaponIcon.ts","./heroFilterWin.ts","./heroSkillFilterWin.ts","./uiHeroFilter.ts","./uiHeroSkillFilter.ts","./uiHeroSkillFiltertItem.ts","./uiWeaponFilter.ts","./weaponFilterWin.ts","./heroInfoWin.ts","./heroWin.ts","./uiHero.ts","./uiHeroItem.ts","./mainTopWin.ts","./teamSwitchWin.ts","./teamWin.ts","./uiTeam.ts","./uiTeamHeroItem.ts","./uiTeamHeroWeapon.ts","./uiTeamWeapon.ts","./messageWin.ts","./tip.ts","./tips.ts","./uiBase.ts","./uiComponentBase.ts","./uiWeapon.ts","./uiWeaponItem.ts","./weaponWin.ts","./IRelease.ts","./ObjectUtil.ts","./Singleton.ts","./arrayUtil.ts","./base64.ts","./callBack.ts","./dateutils.ts","./utils.ts","./gEvent.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameApp.ts","./gEvent.ts"],(function(e){"use strict";var n,o,t,i,a,r,s,c,u,l,m,g,p,d,f,v,y,N,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,c=e.sys,u=e.game,l=e.Game,m=e.director,g=e.view,p=e.screen,d=e.Canvas,f=e.Widget,v=e.UITransform,y=e.Component},function(e){N=e.gameApp},function(e){h=e.gEvent}],execute:function(){var C,E,z,_,w;a._RF.push({},"3b8ec0gN7ZCM5ak2cFbHzr8","main",void 0);var D=r.ccclass,S=r.property;e("main",(C=D("main"),E=S({type:s}),C((w=n((_=function(e){function n(){for(var n,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,t(n,"gameNode",w,i(n)),n.gApp=void 0,n}o(n,e);var a=n.prototype;return a.onLoad=function(){console.log("version=1"),this.init(),c.isBrowser},a.onDestroy=function(){alert("onDestroy"),console.log("onDestroy=================1")},a.init=function(){var e=this;u.on(l.EVENT_SHOW,(function(){console.log("Game.EVENT_SHOW"),h.emit(h.Game_OnResume),m.resume(),u.resume()})),u.on(l.EVENT_HIDE,(function(){console.log("Game.EVENT_HIDE"),h.emit(h.Game_OnPause),m.pause(),u.pause()})),g.setResizeCallback((function(){if(console.log("getFrameSize="+p.windowSize),e.gameNode){e.gameNode.getChildByName("uiCanvas").getComponent(d),e.gameNode.getChildByName("uiCanvas").getComponent(f);var n=e.gameNode.getChildByName("uiCanvas").getComponent(v);console.log("uiCanvas size="+n.contentSize.toString())}var o=p.windowSize;h.emit(h.Game_OnResize,o)})),this.gApp=new N(this.gameNode)},a.update=function(e){this.gApp.update(e)},n}(y)).prototype,"gameNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=_))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/mainData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dataBase.ts","./playerData.ts"],(function(t){"use strict";var n,a,e,r,i,o;return{setters:[function(t){n=t.inheritsLoose,a=t.asyncToGenerator},function(t){e=t.cclegacy,r=t._decorator},function(t){i=t.dataBase},function(t){o=t.playerData}],execute:function(){var c;e._RF.push({},"e4187iZ7ilK0YxqxnfijLIZ","mainData",void 0);var s=r.ccclass;r.property,t("mainData",s("mainData")(c=function(t){function e(){var n;return(n=t.call(this)||this).addListener(),n}n(e,t);var r=e.prototype;return r.addListener=function(){},r.savedata=function(){},r.loaddata=function(){var t=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.init=function(){o.Ins.heroData.initSkill()},e}(i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/mainTopWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./gEvent.ts","./uiBase.ts"],(function(t){"use strict";var e,o,i,n,g,s,l,h,a;return{setters:[function(t){e=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,n=t._decorator,g=t.Toggle},function(t){s=t.uiManager},function(t){l=t.gEvent},function(t){h=t.uiBase,a=t.eUILayer}],execute:function(){var r;i._RF.push({},"6b244FudphMaY+4CrIzvrTV","mainTopWin",void 0);var p=n.ccclass;n.property,t("mainTopWin",p("mainTopWin")(r=function(t){function i(){var e;return(e=t.call(this)||this).toggleHero=null,e.toggleWeapon=null,e.toggleTeam=null,e.toggleBattle=null,e._toggle=[],e._waitOpenTap=-1,e._togWin=[["heroWin"],["weaponWin"],["teamWin"],["battleWin"]],e._uiInfo.prefabPath="main/prefabs/mainTop",e._uiInfo.uiLayer=a.eUIL_HudTop,e._uiInfo.isAnim=!1,e._uiInfo.isAlphaBg=!1,e}e(i,t);var n=i.prototype;return n.init=function(){t.prototype.init.call(this),this.toggleHero=this.nodeRoot.getChildByPath("gBottomMid/ToggleGroup/toggleHero").getComponent(g),this.toggleWeapon=this.nodeRoot.getChildByPath("gBottomMid/ToggleGroup/toggleWeapon").getComponent(g),this.toggleTeam=this.nodeRoot.getChildByPath("gBottomMid/ToggleGroup/toggleTeam").getComponent(g),this.toggleBattle=this.nodeRoot.getChildByPath("gBottomMid/ToggleGroup/toggleBattle").getComponent(g),this._toggle=[this.toggleHero,this.toggleWeapon,this.toggleTeam,this.toggleBattle],this.toggleHero.isChecked=!0,this.onToggle(this.toggleHero)},n.addListener=function(){t.prototype.addListener.call(this),this.toggleHero.node.on(g.EventType.TOGGLE,this.onToggle,this),this.toggleWeapon.node.on(g.EventType.TOGGLE,this.onToggle,this),this.toggleTeam.node.on(g.EventType.TOGGLE,this.onToggle,this),this.toggleBattle.node.on(g.EventType.TOGGLE,this.onToggle,this),l.on(l.UI_OpenFinished,this.onUI_OpenFinished,this)},n.removeListener=function(){t.prototype.removeListener.call(this),this.toggleHero.node.off(g.EventType.TOGGLE,this.onToggle,this),this.toggleWeapon.node.off(g.EventType.TOGGLE,this.onToggle,this),this.toggleTeam.node.off(g.EventType.TOGGLE,this.onToggle,this),this.toggleBattle.node.off(g.EventType.TOGGLE,this.onToggle,this),l.off(l.UI_OpenFinished,this.onUI_OpenFinished,this),this.closeOtherTabWin(),this._toggle=[]},n.destroy=function(){t.prototype.destroy.call(this)},n.onUI_OpenFinished=function(t){-1!=this._waitOpenTap&&t==this._togWin[this._waitOpenTap][0]&&(this.closeOtherTabWin(this._waitOpenTap),this._waitOpenTap=-1)},n.onToggle=function(t){var e=this._toggle.indexOf(t);if(-1===e)return s.Ins.m_tips.showFormatedTip("2"),void console.error("!onToggle index");if(t.isChecked){if(0==this._togWin[e].length)return;var o=this._togWin[e][0];if(s.Ins.has(o))return;s.Ins.open(o),this._waitOpenTap=e}},n.closeOtherTabWin=function(t){for(var e=0;e<this._togWin.length;++e)if(null==t||e!=t)for(var i,n=o(this._togWin[e]);!(i=n()).done;){var g=i.value;s.Ins.has(g)&&s.Ins.close(g)}},i}(h))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/messageWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./uiBase.ts"],(function(t){"use strict";var n,e,i,s,o,a,l,h;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,s=t.Label,o=t.Node},function(t){a=t.Utils},function(t){l=t.uiBase,h=t.eUILayer}],execute:function(){var c;e._RF.push({},"dbcc6ILGuJOaIw0Bmva05YA","messageWin",void 0);var r=i.ccclass;i.property,t("messageWin",r("messageWin")(c=function(t){function e(){var n;return(n=t.call(this)||this).btnOk=null,n.btnCancel=null,n.btnOkLabel=null,n.btnCancelLabel=null,n._cbok=null,n._cbcancel=null,n._uiInfo.prefabPath="tips/prefabs/message",n._uiInfo.uiLayer=h.eUIL_MessageBox,n}n(e,t);var i=e.prototype;return i.init=function(){t.prototype.init.call(this),this.btnOk=this.nodeRoot.getChildByPath("window/btnOk"),this.btnCancel=this.nodeRoot.getChildByPath("window/btnCancel"),this.btnOkLabel=this.nodeRoot.getChildByPath("window/btnOk/Label").getComponent(s),this.btnCancelLabel=this.nodeRoot.getChildByPath("window/btnCancel/Label").getComponent(s),this.setString(this.nodeRoot.getChildByPath("window/labContent").getComponent(s),this.m_args[0]),this.m_args.length>1?this.setString(this.nodeRoot.getChildByPath("window/labTitle").getComponent(s),this.m_args[1]):this.nodeRoot.getChildByPath("window/labTitle").active=!1,this.m_args.length>2?this._cbok=this.m_args[2]:this.btnOk.active=!1,this.m_args.length>3&&null!=this.m_args[3]&&this.setString(this.btnOkLabel,this.m_args[3]),this.m_args.length>4?this._cbcancel=this.m_args[4]:(this.btnOk.setPosition(0,-178),this.btnCancel.active=!1),this.m_args.length>5&&null!=this.m_args[5]&&this.setString(this.btnCancelLabel,this.m_args[5])},i.setString=function(t,n){t.string=n instanceof Array?a.formatStr(n.shift(),n):n},i.addListener=function(){t.prototype.addListener.call(this),this.btnOk.on(o.EventType.TOUCH_END,this.onBtnOk,this),this.btnCancel.on(o.EventType.TOUCH_END,this.onBtnCancel,this)},i.removeListener=function(){t.prototype.removeListener.call(this),this.btnOk.off(o.EventType.TOUCH_END,this.onBtnOk,this),this.btnCancel.off(o.EventType.TOUCH_END,this.onBtnCancel,this)},i.destroy=function(){t.prototype.destroy.call(this)},i.onBtnOk=function(){this._cbok&&this._cbok.Call(),this.close()},i.onBtnCancel=function(){this._cbcancel&&this._cbcancel.Call(),this.close()},e}(l))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtil.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ea6cdq96uJICa2J4P4vt7FW","ObjectUtil",void 0);t("default",function(){function t(){}return t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=this.deepCopy(t[n]);return e}if(t instanceof Object){for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=this.deepCopy(t[c]));return e}console.warn("不支持的类型："+e)},t.copy=function(t){return JSON.parse(JSON.stringify(t))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){"use strict";var a,e,n,r,i,o,s;return{setters:[function(t){a=t.inheritsLoose,e=t.createClass,n=t.asyncToGenerator},function(t){r=t.cclegacy,i=t._decorator,o=t.js},function(t){s=t.Singleton}],execute:function(){var u;t("DataType",void 0),r._RF.push({},"df40fSAq1hC3q5FGnzjW1Kq","playerData",void 0);var D,c=i.ccclass;i.property;!function(t){t.mainData="mainData",t.heroData="heroData",t.skillData="skillData",t.weaponData="weaponData",t.teamData="teamData",t.battleData="battleData"}(D||(D=t("DataType",{})));t("playerData",c("playerData")(u=function(t){function r(){var a;return(a=t.call(this)||this).m_infoData={},a}a(r,t);var i=r.prototype;return i.init=function(){for(var t in D){var a=o.getClassByName(t);this.m_infoData[t]=new a}this.addListener()},i.getData=function(t){return this.m_infoData[t]},i.addListener=function(){},i.update=function(t){for(var a in this.m_infoData)this.m_infoData[a].update(t)},i.loaddata=function(){var t=n(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(this.m_infoData);case 1:if((t.t1=t.t0()).done){t.next=7;break}return a=t.t1.value,t.next=5,this.m_infoData[a].loaddata();case 5:t.next=1;break;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.savedata=function(){for(var t in this.m_infoData)this.m_infoData[t].savedata()},e(r,[{key:"mainData",get:function(){return this.getData(D.mainData)}},{key:"battleData",get:function(){return this.getData(D.battleData)}},{key:"heroData",get:function(){return this.getData(D.heroData)}},{key:"skillData",get:function(){return this.getData(D.skillData)}},{key:"teamData",get:function(){return this.getData(D.teamData)}},{key:"weaponData",get:function(){return this.getData(D.weaponData)}}]),r}(s()))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/resManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,n,t,a,o,i,u,c,s,l,d;return{setters:[function(e){r=e.asyncToGenerator},function(e){n=e.cclegacy,t=e.log,a=e.assetManager,o=e.SpriteFrame,i=e.Texture2D,u=e.resources,c=e.error,s=e.warn,l=e.sp,d=e.Asset}],execute:function(){n._RF.push({},"25b4azN3KhJo5rn6xWes627","resManager",void 0);var f=e("resManager",function(){function e(){}return e.preload=function(r,n,a,o){e.getBundle(r).then((function(e){a?e.preload(n,a,(function(e,n){e?t(r+"=Error preloadDir ["+e+"]"):o&&o(n)})):e.preload(n,(function(e,n){e?t(r+"=Error preloadDir ["+e+"]"):o&&o(n)}))})).catch((function(){t(r+"=Error preloadDir do nothing!")}))},e.preloadDir=function(r,n,a){return new Promise((function(o){e.getBundle(r).then((function(e){e.preloadDir(n,(function(e,r,n){a&&a(e,r,n)}),(function(e,a){e?t(r+"=Error preloadDir ["+e+"]"):(console.log("preloadDir complete ="+r+"/"+n),o())}))})).catch((function(){t(r+"=Error preloadDir do nothing!")}))}))},e.asyncloadDir=function(){var n=r(regeneratorRuntime.mark((function r(n,a){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getBundle(n);case 2:return o=r.sent,r.abrupt("return",new Promise((function(e,r){o?o.loadDir(a,(function(o,i){if(o)return t(n+"=Error asyncloadDir ["+o+"]"),void r();console.log("asyncloadDir="+n+"/"+a),e(a)})):r()})));case 4:case"end":return r.stop()}}),r)})));return function(e,r){return n.apply(this,arguments)}}(),e.asyncloadRemote=function(){var e=r(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){a.loadRemote(r,(function(a,o){if(a)return t("Error Remote["+r+"]"),void n();e(o)}))})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.setSpriteRemote=function(e,r){return new Promise((function(n,u){a.loadRemote(r,(function(a,u){if(a)return t("Error Remote["+r+"]"),void n();var c=new o,s=new i;s.image=u,c.texture=s,e.spriteFrame=c,n()}))}))},e.asyncloadAsset=function(){var n=r(regeneratorRuntime.mark((function r(n,a,o,i){var u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===o&&(o=d),void 0===i&&(i=null),!i){r.next=6;break}return r.abrupt("return",new Promise((function(r,t){e.syncLoadRes(a,n,i,(function(e){e&&i?(e.__resPath=n+"://"+a,r(e)):t()}),o)})));case 6:return r.next=8,e.getBundle(n);case 8:return u=r.sent,r.abrupt("return",new Promise((function(e,r){u&&u.load(a,o,(function(o,i){if(o)return t(n+"=Error asyncloadAsset ["+o+"]"),void r();i.__resPath=n+"://"+a,e(i)}))})));case 10:case"end":return r.stop()}}),r)})));return function(e,r,t,a){return n.apply(this,arguments)}}(),e.setSprite=function(r,n,t,a,i){if(void 0===a&&(a=null),void 0===i&&(i=!0),t.endsWith("/spriteFrame")||(t+="/spriteFrame"),i){var u=n+"://"+t;if(r.__resPath&&r.__resPath==u)return r.spriteFrame.__resPath&&r.spriteFrame.__resPath==u?new Promise((function(e){e(r.spriteFrame)})):new Promise((function(e){e(void 0)}));r.__resPath=u}else r.__resPath=null;return new Promise((function(i){a?e.syncLoadRes(t,n,a,(function(e){null!=e&&(!r.__resPath||null!=e.__resPath&&r.__resPath==e.__resPath)?(r.node&&r.node.isValid&&(r.spriteFrame=e),i(e)):i(void 0)}),o):e.loadAsset(n,t,(function(e){null!=e&&(!r.__resPath||null!=e.__resPath&&r.__resPath==e.__resPath)?(r.node&&r.node.isValid&&(r.spriteFrame=e),i(e)):i(void 0)}),r)}))},e.getBundle=function(e){if(!e||0==e.length||"resources"==e)return Promise.resolve(u);var r=a.getBundle(e);return r?Promise.resolve(r):new Promise((function(r){a.loadBundle(e,(function(e,n){return e?(c("======加载bundle失败",e),r(null)):r(n)}))}))},e.loadAsset=function(r,n,o,i){void 0===o&&(o=null),void 0===i&&(i=null);for(var u=arguments.length,c=new Array(u>4?u-4:0),s=4;s<u;s++)c[s-4]=arguments[s];var l,d=a.getBundle(r);if(d&&(l=d.get(n)))return l.__resPath=r+"://"+n,void o.call(i,l,[].concat(c));e.getBundle(r).then((function(e){var a,u=e.get(n);null!=u?null==(a=o)||a.call(i,u,[].concat(c)):e.load(n,(function(e,a){e?t("Error onLoadAssetBundle ["+e+"]"):(a.__resPath=r+"://"+n,o.call(i,a,[].concat(c)))}))}))},e.checkLoad=function(){for(;e._loadQueue.length>0&&!e._Loading;)e._checkLoad()},e._checkLoad=function(){if(!(e._loadQueue.length<=0)){var r=e._loadQueue.shift();r.target&&r.target.release&&e.loadRes(r.path,r.bundleName,r.target,r.cb,r.type)}},e.syncLoadRes=function(r,n,t,o,i){void 0===n&&(n="resources");var u=a.getBundle(n);if(u&&u.get(r)){var c=u.get(r,i);return e.cacheRes(t,r,n,c,i),c.__resPath=n+"://"+r,void(o&&o.call(t,c))}e._loadQueue.push({path:r,bundleName:n,target:t,cb:o,type:i}),e.checkLoad()},e.loadRes=function(r,n,t,a,o){void 0===n&&(n="resources"),e._Loading=!0;var i=n+"://"+r;e.getBundle(n).then((function(u){if(!t||!t.isValid)return a=null,e._Loading=!1,void e.checkLoad();if(!u)return a&&a.call(t,null),e._Loading=!1,void e.checkLoad();if(!u.getInfoWithPath(r))return a&&a.call(t,null),s("不存在的资源路径:"+i),e._Loading=!1,void e.checkLoad();var c=u.get(r,o);if(c)return e.cacheRes(t,r,n,c,o),a&&a.call(t,c),e._Loading=!1,void e.checkLoad();if(e._loadingMap[i])e._loadingMap[i].push({target:t,complete:a});else{e._loadingMap[i]=[],e._loadingMap[i].push({target:t,complete:a});var l=function(t,a){var u=e._loadingMap[i].slice();if(delete e._loadingMap[i],e._Loading=!1,e.checkLoad(),t){s("资源加载失败:"+i);for(var c=0;c<u.length;c++){var l=u[c];l.target&&l.target.isValid&&(l.complete&&l.complete.call(l.target,null))}}else for(var d=0;d<u.length;d++){var f=u[d];f.target&&f.target.isValid?(a.__resPath=i,e.cacheRes(f.target,r,n,a,o),f.complete&&f.complete.call(f.target,a)):s("::资源已加载未使用::"+i)}};o?u.load(r,o,l):u.load(r,l)}}))},e.cacheRes=function(r,n,a,o,i){if(void 0===a&&(a="resources"),r.release){r.__resCache=r.__resCache||{};var u=a+"://"+n;if(r.__resCache[u]||(o.addRef(),r.__resCache[u]={count:1,type:i}),!r.__reloadRelease){r.__reloadRelease=!0;var c=r.release;r.release=function(){if(c.call(r),this.__resCache){for(var n in this.__resCache){var a=n.split("://");t("自动释放了资源【"+a[0]+"://"+a[1]+"】");for(var o=this.__resCache[a[0]+"://"+a[1]]||0,i=0;i<o.count;i++)e.releaseRes(a[1],a[0],o.type)}this.__resCache=null}}.bind(r)}}else s("WARN：缺少释放接口##"+a+"://"+n)},e.releaseRes=function(e,r,n,t){void 0===r&&(r="resources"),void 0===t&&(t=!1);var o=a.getBundle(r);if(!o)return 0;var i=o.get(e,n);if(!i)return 0;switch(n){case l.SkeletonData:}return i.refCount>0&&i.decRef(),(t||i.refCount<=0)&&o.release(e),0},e}());f._loadingMap={},f._loadQueue=[],f._Loading=!1,n._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){n("Singleton",(function(){var n=function(){function n(){}return t(n,null,[{key:"Ins",get:function(){return n._instance||(n._instance=new this),n._instance}}]),n}();return n._instance=null,n})),e._RF.push({},"da096ndSwFJzrdQG2aYfW+k","Singleton",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Skill.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"a040dkU0ZVLY683+rNnFLRA","Skill",void 0);t("default",(function(){this.id=void 0,this.skillType=void 0,this.typeString=void 0,this.targetString=void 0,this.valString=void 0,this.val=void 0,this.attr=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/skillData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Configs.ts","./gameDef.ts","./dataBase.ts","./playerData.ts"],(function(t){"use strict";var i,e,r,s,a,n,l,f;return{setters:[function(t){i=t.createForOfIteratorHelperLoose,e=t.inheritsLoose},function(t){r=t.cclegacy,s=t._decorator},function(t){a=t.Configs},function(t){n=t.eSkillType},function(t){l=t.dataBase},function(t){f=t.playerData}],execute:function(){var c;r._RF.push({},"5577dW36sVA95O9frzOmci/","skillData",void 0);var g=s.ccclass,o=(s.property,t("playerSkillEffect",function(){function t(t){if(this.info=void 0,this.target=void 0,this.cfg=void 0,this.hits=void 0,this.lastTurn=void 0,"string"==typeof t){this.info=t;var i=t.split(",");switch(this.target=i[0],this.cfg=f.Ins.skillData.getCfg(t),this.cfg||console.error("!cfg info:"+t),this.cfg.skillType){case n.Damage:this.hits=parseInt(i[3]);break;case n.Heal:break;case n.Buff:this.lastTurn=parseInt(i[3].substring(0,i[3].length-1));break;case n.StateBuff:this.lastTurn=parseInt(i[2].substring(0,i[2].length-1));break;default:throw new Error("!skillType:"+this.cfg.skillType)}}else this.cfg=t}var i=t.prototype;return i.matchFilter=function(t){if(this.cfg.skillType!=t.cfg.skillType)return!1;switch(t.cfg.skillType){case n.Damage:return!!this.matchSimilarVal(t.cfg.valString)&&this.cfg.targetString==t.cfg.targetString;case n.Heal:case n.Buff:return this.cfg.typeString==t.cfg.typeString&&this.matchSimilarVal(t.cfg.valString);case n.StateBuff:return this.cfg.typeString===t.cfg.typeString;default:throw new Error("!mathCfg id:"+t.cfg.id)}},i.matchSimilarVal=function(t){if(""==t)return!0;var i=this.cfg.valString;return i.endsWith("+")&&(i=i.substring(0,i.length-1)),t.endsWith("+")&&(t=t.substring(0,t.length-1)),i==t},t}()));t("playerSkill",(function(t,e){this.skillId=void 0,this.effect=[],this.hate=void 0,this.mp=void 0;for(var r,s=i(t["skill"+e]);!(r=s()).done;){var a=r.value;this.effect.push(new o(a))}this.skillId=e,this.hate=t["hate"+e],this.mp=t["mp"+e]})),t("skillData",g("skillData")(c=function(t){function r(){var i;return(i=t.call(this)||this).skill=new Map,i.addListener(),i.init(),i}e(r,t);var s=r.prototype;return s.addListener=function(){},s.init=function(){for(var t,e=i(a.SkillCfg.values());!(t=e()).done;){var r=t.value,s=this.skill.get(r.typeString);s?s.push(r):this.skill.set(r.typeString,[r])}},s.getCfg=function(t){for(var e,r=t.split(","),s=i(this.skill.keys());!(e=s()).done;){var a=e.value;if(r[1]==a){var l=this.skill.get(a);switch(l[0].skillType){case n.Damage:return l.find((function(t,i,e){return r[0]==t.targetString&&r[2]==t.valString}));case n.Heal:case n.Buff:return l.find((function(t,i,e){return r[2]==t.valString}));case n.StateBuff:return l[0];default:throw new Error("!skillType:"+this.skill.get(a)[0].skillType)}}}},r.getSkillInfoAsFilter=function(t){switch(t.skillType){case n.Damage:return t.targetString+","+t.valString;case n.Heal:case n.Buff:return t.typeString+","+t.valString;case n.StateBuff:return""+t.typeString;default:throw new Error("!getSkillInfoAsFilter type:"+t.skillType)}},r}(l))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/SoulStone.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ae7dcVMDQtIB6lgpcdvVjuc","SoulStone",void 0);t("default",(function(){this.id=void 0,this.image=void 0,this.element=void 0,this.attr=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/super-layout.ts",["./rollupPluginModLoBabelHelpers.js","cc","./super-scrollview.ts"],(function(t){"use strict";var i,e,o,r,n,s,h,a,d,c,l,u,f,T,p,g,v,m,y,x;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass,s=t.asyncToGenerator},function(t){h=t.cclegacy,a=t._decorator,d=t.ccenum,c=t.UITransform,l=t.Prefab,u=t.PageViewIndicator,f=t.EventHandler,T=t.Node,p=t.Vec3,g=t.Vec2,v=t.Size,m=t.Component,y=t.instantiate},function(t){x=t.SuperScrollview}],execute:function(){var _,O,w,I,B,P,A,b,R,H,L,S,E,z,D,F,C,M,V,k,G,N,X,Y,W,Z,j,U,q,J,K,Q,$,tt,it,et,ot,rt,nt,st,ht,at,dt,ct,lt,ut,ft,Tt,pt,gt,vt,mt,yt,xt,_t,Ot,wt,It,Bt,Pt,At,bt,Rt,Ht,Lt;h._RF.push({},"2527eWEQONF5amCWKSJ2gpz","super-layout",void 0);var St,Et,zt,Dt,Ft,Ct,Mt=a.ccclass,Vt=a.property,kt=a.requireComponent,Gt=1e-5;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(St||(St={})),d(St),function(t){t[t.TOP_TO_BOTTOM=0]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=1]="BOTTOM_TO_TOP"}(Et||(Et={})),d(Et),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(zt||(zt={})),d(zt),function(t){t[t.NONE=0]="NONE",t[t.HEADER=1]="HEADER",t[t.FOOTER=2]="FOOTER"}(Dt||(Dt={})),function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM"}(Ft||(Ft={})),d(Ft),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT"}(Ct||(Ct={})),d(Ct);t("SuperLayout",(_=Mt("SuperLayout"),O=kt(c),w=Vt(x),I=Vt(c),B=Vt(l),P=Vt({type:St}),A=Vt({type:Ft,visible:function(){return this.layoutType==St.VERTICAL&&!this.autoCenter}}),b=Vt({type:Ct,visible:function(){return this.layoutType==St.HORIZONTAL&&!this.autoCenter}}),R=Vt({type:Et}),H=Vt({type:zt}),L=Vt({tooltip:"最小值=1，大于1就是Grid模式"}),S=Vt({tooltip:"决定最多创建Prefab的数量"}),E=Vt({tooltip:"顶部填充"}),z=Vt({tooltip:"底部填充"}),D=Vt({tooltip:"左侧填充"}),F=Vt({tooltip:"右侧填充"}),C=Vt({tooltip:"横轴间距"}),M=Vt({tooltip:"纵轴间距"}),V=Vt({tooltip:"计算缩放后的尺寸"}),k=Vt({tooltip:"开启翻页模式"}),G=Vt({tooltip:"每个页面翻页时所需时间。单位：秒",visible:function(){return this.isPageView}}),N=Vt({type:u,visible:function(){return this.isPageView}}),X=Vt({slide:!0,range:[0,1,.01],tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原",visible:function(){return this.isPageView}}),Y=Vt({tooltip:"快速滑动翻页临界值。当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值,该值与此临界值相比较，如果大于临界值，则进行自动翻页",visible:function(){return this.isPageView}}),W=Vt({type:f,visible:function(){return this.isPageView}}),Z=Vt({tooltip:"开启自动居中",visible:function(){return!this.isPageView}}),j=Vt({tooltip:"自动居中的滚动时间",visible:function(){return this.autoCenter}}),U=Vt({type:T,tooltip:"自动居中的参考节点，如果为空、则默认选择View中心",visible:function(){return this.autoCenter}}),q=Vt({tooltip:"自动居中时、Item的居中锚点",visible:function(){return this.autoCenter}}),J=Vt({tooltip:"上/左 无限循环"}),K=Vt({tooltip:"下/右 无限循环"}),Q=Vt(f),_($=O(((Lt=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,o(i,"scrollView",it,r(i)),o(i,"view",et,r(i)),o(i,"prefab",ot,r(i)),o(i,"layoutType",rt,r(i)),o(i,"indexVerticalAxisDirection",nt,r(i)),o(i,"indexHorizontalAxisDirection",st,r(i)),o(i,"verticalAxisDirection",ht,r(i)),o(i,"horizontalAxisDirection",at,r(i)),o(i,"groupItemTotal",dt,r(i)),o(i,"multiple",ct,r(i)),o(i,"paddingTop",lt,r(i)),o(i,"paddingBottom",ut,r(i)),o(i,"paddingLeft",ft,r(i)),o(i,"paddingRight",Tt,r(i)),o(i,"spacingX",pt,r(i)),o(i,"spacingY",gt,r(i)),o(i,"affectedByScale",vt,r(i)),o(i,"isPageView",mt,r(i)),o(i,"pageTurningSpeed",yt,r(i)),o(i,"indicator",xt,r(i)),o(i,"scrollThreshold",_t,r(i)),o(i,"autoPageTurningThreshold",Ot,r(i)),o(i,"pageEvents",wt,r(i)),o(i,"autoCenter",It,r(i)),o(i,"centerTime",Bt,r(i)),o(i,"centerNode",Pt,r(i)),o(i,"centerAnchor",At,r(i)),o(i,"headerLoop",bt,r(i)),o(i,"footerLoop",Rt,r(i)),o(i,"refreshItemEvents",Ht,r(i)),i.stretchLock={},i._currPageIndex=0,i._lastPageIndex=0,i.isRestart=!1,i.scrollDirection=Dt.NONE,i.prevPos=new p(0,0,0),i._maxPrefabTotal=0,i.currentCreateItemTotal=0,i._itemTotal=0,i}e(i,t);var h=i.prototype;return h.onLoad=function(){var t,i,e,o=this;null==(t=this.transform)||t.setAnchorPoint(new g(.5,.5)),null==(i=this.transform)||i.setContentSize(this.view.contentSize),this.node.setPosition(p.ZERO),this.isPageView&&(this.autoCenter=!1),null==(e=this.scrollView.view)||e.node.on(T.EventType.SIZE_CHANGED,this.onViewSizeChange,this),Object.defineProperty(this.transform,"contentSize",{get:function(){return o.contentSize}}),Object.defineProperty(this.transform,"width",{get:function(){return o.contentSize.width}}),Object.defineProperty(this.transform,"height",{get:function(){return o.contentSize.height}})},h.onEnable=function(){this.addEventListener()},h.onDisable=function(){this.removeEventListener()},h.total=function(t,i){void 0===i&&(i=!1),this.currentCreateItemTotal=t,this.scrollDirection=Dt.HEADER,this.createItems(t,i);var e=t-this.itemTotal;return this._itemTotal=t,this.refreshItems(e,i),i||this.updateItems(),this.scrollView.startAutoScroll(),this.scrollView.release(),this.indicator&&this.indicator.setPageView(this.scrollView),this.autoCenter&&this.scrollToCenter(),this},h.updateItems=function(){return this.resetIndexStartToEnd(this.headerIndex),this},h.updateItemSize=function(t,i){this.groupItemTotal>1||t&&i&&(t.__runtime_size=i,this.onChangeChildSize(t._uiProps.uiTransformComp))},h.scrollToCenter=function(){this.soonFinish()},h.scrollToHeader=function(t){var i,e,o,r,n=0;this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?(n=this.viewHeaderBoundary,this.indexVerticalAxisDirection==Ft.BOTTOM&&(n-=(null==(i=this.header)?void 0:i.height)+this.paddingTop+this.paddingBottom)):(n=this.viewFooterBoundary,this.indexVerticalAxisDirection==Ft.TOP&&(n+=(null==(e=this.header)?void 0:e.height)+this.paddingTop+this.paddingBottom)):this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?(n=this.viewHeaderBoundary,this.indexHorizontalAxisDirection==Ct.RIGHT&&(n+=(null==(o=this.header)?void 0:o.width)+this.paddingLeft+this.paddingRight)):(n=this.viewFooterBoundary,this.indexHorizontalAxisDirection==Ct.LEFT&&(n-=(null==(r=this.header)?void 0:r.width)+this.paddingLeft+this.paddingRight));this.scrollToIndex(0,t,new p(n,n))},h.scrollToFooter=function(t){var i=0;if(this.vertical){if(this.fixedItemHeight<this.view.height)return;var e,o;if(this.verticalAxisDirection==Et.TOP_TO_BOTTOM){if(i=this.viewFooterBoundary,this.indexVerticalAxisDirection==Ft.BOTTOM)i+=(null==(e=this.footer)?void 0:e.height)+this.paddingTop+this.paddingBottom}else if(i=this.viewHeaderBoundary,this.indexVerticalAxisDirection==Ft.TOP)i-=(null==(o=this.footer)?void 0:o.height)+this.paddingTop+this.paddingBottom}else{if(this.fixedItemWidth<this.view.width)return;var r,n;if(this.horizontalAxisDirection==zt.LEFT_TO_RIGHT){if(i=this.viewFooterBoundary,this.indexHorizontalAxisDirection==Ct.RIGHT)i-=(null==(r=this.footer)?void 0:r.width)+this.paddingLeft+this.paddingRight}else if(i=this.viewHeaderBoundary,this.indexHorizontalAxisDirection==Ct.LEFT)i+=(null==(n=this.footer)?void 0:n.width)+this.paddingLeft+this.paddingRight}this.scrollToIndex(this.itemTotal-1,t,new p(i,i),!0)},h.isNearFooter=function(t){var i=!1;if(t>this.footerIndex&&t<this.headerIndex){var e=Math.abs(t-this.headerIndex)<Math.abs(t-this.footerIndex);i=this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?!e:e:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?!e:e}else t>this.footerIndex?i=this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT:t<this.headerIndex&&(i=this.vertical?this.verticalAxisDirection!=Et.TOP_TO_BOTTOM:this.horizontalAxisDirection!=zt.LEFT_TO_RIGHT);return i},h.getFooterOffset=function(t){var i=this.footerIndex%this.groupItemTotal;return t%this.groupItemTotal-i+this.groupItemTotal},h.getHeaderOffset=function(t){return this.headerIndex%this.groupItemTotal-t%this.groupItemTotal+this.groupItemTotal},h.offsetToHeader=function(t){var i=0;i=this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.getHeaderOffset(t):this.getFooterOffset(t):this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.getHeaderOffset(t):this.getFooterOffset(t),i-=this.groupItemTotal;for(var e=0;e<i;e++)this.pushToHeader(!0)},h.offsetToFooter=function(t){var i=0;i=this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.getFooterOffset(t):this.getHeaderOffset(t):this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.getFooterOffset(t):this.getHeaderOffset(t),i-=this.groupItemTotal;for(var e=0;e<i;e++)this.pushToFooter(!0)},h.resetIndexStartToEnd=function(t){for(var i=0;i<this.node.children.length;i++){var e=this.node.children[i];e.__index=t,t++,(this.headerLoop||this.footerLoop)&&(t<0||t>=this.itemTotal)&&(t=0),this.notifyRefreshItem(e)}},h.resetIndexEndToStart=function(t){for(var i=this.node.children.length-1;i>=0;i--){var e=this.node.children[i];e.__index=t,t--,(this.headerLoop||this.footerLoop)&&t<0&&(t=this.itemTotal-1),this.notifyRefreshItem(e)}},h.scrollToIndex=function(t,i,e,o){var r;if(void 0===o&&(o=!1),!(isNaN(t)||t<0||t>this.itemTotal-1)){this.scrollView.stopAutoScroll(),this.isPageView&&this.scrollView.savePageIndex(t);var n=this.node.children.find((function(i){return i.__index==t})),s=this.isNearFooter(t);if(this.stretchLock.index=t,this.stretchLock.timeInSecond=i,this.stretchLock.boundary=e,this.stretchLock.reverse=o,!n){0==t&&this.pushToHeader(),t==this.itemTotal-1&&this.pushToFooter();var h=this.vertical&&this.verticalAxisDirection==Et.TOP_TO_BOTTOM||!this.vertical&&this.horizontalAxisDirection==zt.LEFT_TO_RIGHT;s?(this.offsetToFooter(t),h?this.resetIndexEndToStart(t):this.resetIndexStartToEnd(t)):(this.offsetToHeader(t),h?this.resetIndexStartToEnd(t):this.resetIndexEndToStart(t)),n=this.node.children.find((function(i){return i.__index==t}))}if(n){var a=n.getPosition().clone();this.autoCenter||(this.vertical?this.indexVerticalAxisDirection==Ft.TOP?a.y=o?this.getItemYMin(n._uiProps.uiTransformComp)-this.paddingBottom:this.getItemYMax(n._uiProps.uiTransformComp)+this.paddingTop:a.y=o?this.getItemYMax(n._uiProps.uiTransformComp)+this.paddingTop:this.getItemYMin(n._uiProps.uiTransformComp)-this.paddingBottom:this.indexHorizontalAxisDirection==Ct.LEFT?a.x=o?this.getItemXMax(n._uiProps.uiTransformComp)+this.paddingRight:this.getItemXMin(n._uiProps.uiTransformComp)-this.paddingLeft:a.x=o?this.getItemXMin(n._uiProps.uiTransformComp)-this.paddingLeft:this.getItemXMax(n._uiProps.uiTransformComp)+this.paddingRight);var d,c=null==(r=this.transform)?void 0:r.convertToWorldSpaceAR(a),l=this.view.convertToNodeSpaceAR(c);d=!this.autoCenter&&e?e:this.getCenterAnchor(n._uiProps.uiTransformComp,this.centerPosition),l.multiply(new p(-1,-1,1)).add(d),this.scrollView.scrollToAny(l,i,!0)}}},h.onViewSizeChange=function(){var t=s(regeneratorRuntime.mark((function t(){var i,e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.isRestart=!0,this.createItems(this.currentCreateItemTotal),this.resetChilds(!0),this.scrollToHeader(),i=0;i<this.node.children.length;i++)e=this.node.children[i],o=e._uiProps.uiTransformComp,this.setAndSaveSizeAndScale(o);this.isRestart=!1;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.setAndSaveSizeAndScale=function(t){t.setContentSize(this.getItemSize(t)),t.node.__size=t.contentSize.clone(),t.node.__scale=t.node.getScale().clone()},h.getCenterAnchor=function(t,i){var e=i.clone();if(this.vertical){var o=t.height*this.centerAnchor.y,r=t.height*t.anchorY;e.y-=o-r}else{var n=t.width*this.centerAnchor.x,s=t.width*t.anchorX;e.x+=n-s}return e},h.soonFinish=function(){if(this.autoCenter&&!this.scrollView.pullRefresh){this.scrollView.stopAutoScroll();for(var t=new p(999999,999999),i=0;i<this.node.children.length;i++){var e,o=this.node.children[i],r=null==(e=this.transform)?void 0:e.convertToWorldSpaceAR(o.position),n=this.view.convertToNodeSpaceAR(r),s={width:!1,height:!1},h=this.getCenterAnchor(o._uiProps.uiTransformComp,this.centerPosition),a=n.subtract(h);s.width=Math.abs(a.x)<Math.abs(t.x),s.height=Math.abs(a.y)<Math.abs(t.y),(this.vertical&&s.height||!this.vertical&&s.width)&&(t=a)}t.multiply(new p(-1,-1,1)),this.scrollView.scrollToAny(t,this.centerTime)}},h.getItemSize=function(t){var i=new v;if(this.vertical){var e=this.spacingX*(this.groupItemTotal-1);i.width=(this.accommodWidth-e)/this.groupItemTotal,i.height=t.height}else{var o=this.spacingY*(this.groupItemTotal-1);i.height=(this.accommodHeight-o)/this.groupItemTotal,i.width=t.width}return i},h.getItemYMax=function(t){if(!t)return 0;var i=this.getScaleHeight(t)*(1-t.anchorY);return t.node.position.y+i},h.getItemYMin=function(t){if(!t)return 0;var i=this.getScaleHeight(t)*t.anchorY;return t.node.position.y-i},h.getItemXMax=function(t){if(!t)return 0;var i=this.getScaleWidth(t)*(1-t.anchorX);return t.node.position.x+i},h.getItemXMin=function(t){if(!t)return 0;var i=this.getScaleWidth(t)*t.anchorX;return t.node.position.x-i},h.getStartX=function(t){if(!t)return 0;var i=0;if(this.horizontalAxisDirection==zt.LEFT_TO_RIGHT){var e=this.getScaleWidth(t)*t.anchorX;i=this.viewStartPoint.x+e}else{var o=this.getScaleWidth(t)*(1-t.anchorX);i=this.viewStartPoint.x-o}return i},h.getEndX=function(t){if(!t)return 0;var i=0;if(this.horizontalAxisDirection==zt.LEFT_TO_RIGHT){var e=this.getScaleWidth(t)*(1-t.anchorX);i=-this.viewStartPoint.x-e-this.paddingRight+this.paddingLeft}else{var o=this.getScaleWidth(t)*t.anchorX;i=-this.viewStartPoint.x+o+this.paddingLeft-this.paddingRight}return i},h.getStartY=function(t){if(!t)return 0;var i=0;if(this.verticalAxisDirection==Et.TOP_TO_BOTTOM){var e=this.getScaleHeight(t)*(1-t.anchorY);i=this.viewStartPoint.y-e}else{var o=this.getScaleHeight(t)*t.anchorY;i=this.viewStartPoint.y+o}return i},h.getEndY=function(t){if(!t)return 0;var i=0;if(this.verticalAxisDirection==Et.TOP_TO_BOTTOM){var e=this.getScaleHeight(t)*t.anchorY;i=-this.viewStartPoint.y+e+this.paddingBottom-this.paddingTop}else{var o=this.getScaleHeight(t)*(1-t.anchorY);i=-this.viewStartPoint.y-o-this.paddingTop+this.paddingBottom}return i},h.isAccommodateByTop=function(t){return this.getItemYMax(t)+this.paddingTop<.5*this.accommodHeight},h.isAccommodateByBottom=function(t){return this.getItemYMin(t)-this.paddingBottom>-.5*this.accommodHeight},h.isAccommodateByLeft=function(t){return this.getItemXMin(t)-this.paddingLeft>-.5*this.accommodWidth},h.isAccommodateByRight=function(t){return this.getItemXMax(t)+this.paddingRight<.5*this.accommodWidth},h.getRelativeByLeft=function(t,i){return this.getItemXMin(i)-this.spacingX-this.getScaleWidth(t)*(1-t.anchorX)},h.getRelativeByRight=function(t,i){return this.getItemXMax(i)+this.spacingX+this.getScaleWidth(t)*t.anchorX},h.getRelativeByTop=function(t,i){return this.getItemYMax(i)+this.spacingY+this.getScaleHeight(t)*t.anchorY},h.getRelativeByBottom=function(t,i){return this.getItemYMin(i)-this.spacingY-this.getScaleHeight(t)*(1-t.anchorY)},h.setItemPosition=function(t,i,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1);var r=new p;o?(r.x=this.getStartX(t),r.y=this.getStartY(t)):r=this.vertical?this.getVerticalRelativePosition(t,i,e):this.getHorizontalRelativePosition(t,i,e),t.node.setPosition(r)},h.getVerticalRelativePosition=function(t,i,e){var o=new p,r=!1;return r=this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?e?this.isAccommodateByLeft(i):this.isAccommodateByRight(i):e?this.isAccommodateByRight(i):this.isAccommodateByLeft(i),this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?o.x=e?r?this.getRelativeByLeft(t,i):this.getEndX(t):r?this.getRelativeByRight(t,i):this.getStartX(t):o.x=e?r?this.getRelativeByRight(t,i):this.getEndX(t):r?this.getRelativeByLeft(t,i):this.getStartX(t),this.verticalAxisDirection==Et.TOP_TO_BOTTOM?o.y=e?r?i.node.position.y:this.getRelativeByTop(t,i):r?i.node.position.y:this.getRelativeByBottom(t,i):o.y=e?r?i.node.position.y:this.getRelativeByBottom(t,i):r?i.node.position.y:this.getRelativeByTop(t,i),o},h.getHorizontalRelativePosition=function(t,i,e){var o=new p,r=!1;return r=this.verticalAxisDirection==Et.TOP_TO_BOTTOM?e?this.isAccommodateByTop(i):this.isAccommodateByBottom(i):e?this.isAccommodateByBottom(i):this.isAccommodateByTop(i),this.verticalAxisDirection==Et.TOP_TO_BOTTOM?o.y=e?r?this.getRelativeByTop(t,i):this.getEndY(t):r?this.getRelativeByBottom(t,i):this.getStartY(t):o.y=e?r?this.getRelativeByBottom(t,i):this.getEndY(t):r?this.getRelativeByTop(t,i):this.getStartY(t),this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?o.x=e?r?i.node.position.x:this.getRelativeByLeft(t,i):r?i.node.position.x:this.getRelativeByRight(t,i):o.x=e?r?i.node.position.x:this.getRelativeByRight(t,i):r?i.node.position.x:this.getRelativeByLeft(t,i),o},h.refreshItems=function(t,i){if(void 0===i&&(i=!1),t<0){var e=this.header;if(this.contentSize.height==this.view.height)for(var o=0;o<this.node.children.length;o++){var r=this.node.children[o];this.setItemPosition(r._uiProps.uiTransformComp,e,!1,0==o),e=r._uiProps.uiTransformComp}else for(var n=0;n<-t;n++)this.headerLoop||this.footerLoop?this.pushToHeader():this.vertical&&this.verticalAxisDirection==Et.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?(this.pushToHeader(!0),this.pushToFooter()):(this.pushToFooter(!0),this.pushToHeader());var s=this.headerIndex>0?this.headerIndex:0;s+this.node.children.length>this.itemTotal&&(s+=t),s<0&&(s=0);for(var h=0;h<this.node.children.length;h++){var a=this.node.children[h];(this.headerLoop||this.footerLoop)&&s>this.itemTotal-1&&(s=0),a.__index=s,s++,i&&this.notifyRefreshItem(a)}this.scrollView.stopAutoScroll(),this.scrollView.startAutoScroll()}else for(var d=0;d<this.node.children.length;d++)this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.pushToFooter():this.pushToHeader():this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.pushToFooter():this.pushToHeader()},h.createItems=function(t,i){var e=this;if(void 0===i&&(i=!1),this.node.children.length>t)this.removeItems(t);else if(this.needAddPrefab()||!(this._maxPrefabTotal>0)||this._maxPrefabTotal!=this.node.children.length)for(var o=t-this.node.children.length,r=function(t){var o=y(e.prefab),r=o._uiProps.uiTransformComp;if(e.setAndSaveSizeAndScale(r),o.__index=e.node.children.length,e.node.addChild(o),!1,s=e.node.children.length-2,h=0==o.__index?e.footer:e.node.children[s]._uiProps.uiTransformComp,o.on(T.EventType.SIZE_CHANGED,(function(){e.onChangeChildSize(r)}),e,!0),o.on(T.EventType.TRANSFORM_CHANGED,(function(t){e.onChangeChildScale(t,r)}),e,!0),i&&e.notifyRefreshItem(o),e.setItemPosition(o._uiProps.uiTransformComp,h,false,0==o.__index),!e.needAddPrefab())return e._maxPrefabTotal=e.node.children.length,console.log("已固定item数量",e._maxPrefabTotal),"break"},n=0;n<o;n++){var s,h;if("break"===r())break}},h.needAddPrefab=function(){var t=this.vertical?this.contentSize.height:this.contentSize.width;if(t>0&&t<(this.vertical?this.view.height:this.view.width)*this.multiple)return!0;return!1},h.onChangeChildSize=function(){var t=s(regeneratorRuntime.mark((function t(i){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.node,!(this.groupItemTotal>1)){t.next=6;break}return o=e.__size,i.setContentSize(o),console.warn("表格布局不支持动态修改 Size,如果你非要修改，那你把我注释掉看效果"),t.abrupt("return");case 6:this.stretchLock.index==e.__index&&this.scrollToIndex(this.stretchLock.index,this.stretchLock.timeInSecond,this.stretchLock.boundary,this.stretchLock.reverse),this.resetStrectchItems();case 8:case"end":return t.stop()}}),t,this)})));return function(i){return t.apply(this,arguments)}}(),h.onChangeChildScale=function(){var t=s(regeneratorRuntime.mark((function t(i,e){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i===T.TransformBit.SCALE){t.next=2;break}return t.abrupt("return");case 2:if(this.affectedByScale){t.next=4;break}return t.abrupt("return");case 4:if(o=e.node,!(this.groupItemTotal>1)){t.next=10;break}return r=o.__scale,e.node.setScale(r),console.warn("表格布局不支持动态修改 Scale,如果你非要修改，那你把我注释掉看效果"),t.abrupt("return");case 10:this.stretchLock.index==o.__index&&this.scrollToIndex(this.stretchLock.index,this.stretchLock.timeInSecond,this.stretchLock.boundary,this.stretchLock.reverse),this.resetStrectchItems();case 12:case"end":return t.stop()}}),t,this)})));return function(i,e){return t.apply(this,arguments)}}(),h.resetStrectchItems=function(){var t=this;if(!isNaN(this.stretchLock.index)){var i=this.node.children.findIndex((function(i){return i.__index==t.stretchLock.index}));if(-1!=i){for(var e=i;e>=0;e--){var o=this.node.children[e];e!=i&&(e<i&&this.setItemPosition(o._uiProps.uiTransformComp,this.node.children[e+1]._uiProps.uiTransformComp,!0))}for(var r=i;r<this.node.children.length;r++){var n=this.node.children[r];r!=i&&this.setItemPosition(n._uiProps.uiTransformComp,this.node.children[r-1]._uiProps.uiTransformComp)}return}}this.scrollDirection==Dt.HEADER?(this.unschedule(this.stretchToFooter),this.scheduleOnce(this.stretchToFooter)):(this.unschedule(this.stretchToHeader),this.scheduleOnce(this.stretchToHeader))},h.stretchToHeader=function(){for(var t=this.node.children.length-1;t>=0;t--){var i=this.node.children[t];t!=this.node.children.length-1&&this.setItemPosition(i._uiProps.uiTransformComp,this.node.children[t+1]._uiProps.uiTransformComp,!0)}},h.stretchToFooter=function(){for(var t=0;t<this.node.children.length;t++){var i=this.node.children[t];0!=t&&this.setItemPosition(i._uiProps.uiTransformComp,this.node.children[t-1]._uiProps.uiTransformComp)}},h.removeItems=function(t){for(var i=this.node.children.length-t,e=0;e<i;e++){var o=this.node.children[this.node.children.length-1];o.off(T.EventType.SIZE_CHANGED),o.off(T.EventType.TRANSFORM_CHANGED),this.node.removeChild(o),o.destroy()}},h.addEventListener=function(){this.node.on(T.EventType.TRANSFORM_CHANGED,this.onPositionChanged,this)},h.removeEventListener=function(){this.node.off(T.EventType.TRANSFORM_CHANGED,this.onPositionChanged,this)},h.resetChilds=function(t){if(void 0===t&&(t=!1),this.vertical&&this.fixedItemHeight<=this.view.height||!this.vertical&&this.fixedItemWidth<=this.view.width){var i,e=this.getStartX(this.header),o=this.getStartY(this.header);null==(i=this.header)||i.node.setPosition(new p(e,o))}if(t)if(this.vertical){var r,n=this.getStartX(this.header);null==(r=this.header)||r.node.setPosition(new p(n,this.header.node.position.y))}else{var s,h=this.getStartY(this.header);null==(s=this.header)||s.node.setPosition(new p(this.header.node.position.x,h))}this.stretchToFooter(),t||this.scrollView.startAutoScroll()},h.onTouchBegin=function(){this.stretchLock={}},h.getUsedScaleValue=function(t){return this.affectedByScale?Math.abs(t):1},h.getScaleWidth=function(t){if(!t)return 0;var i=t.node.__runtime_size;return(i?i.width:t.width)*this.getUsedScaleValue(t.node.scale.x)},h.getScaleHeight=function(t){if(!t)return 0;var i=t.node.__runtime_size;return(i?i.height:t.height)*this.getUsedScaleValue(t.node.scale.y)},h.onPositionChanged=function(){if(!this.isRestart){if(this.vertical?this.scrollView.prevLocation.y<this.scrollView.location.y?this.scrollDirection=Dt.FOOTER:this.scrollView.prevLocation.y>this.scrollView.location.y?this.scrollDirection=Dt.HEADER:this.scrollDirection=Dt.NONE:this.scrollView.prevLocation.x>this.scrollView.location.x?this.scrollDirection=Dt.FOOTER:this.scrollView.prevLocation.x<this.scrollView.location.x?this.scrollDirection=Dt.HEADER:this.scrollDirection=Dt.NONE,this.vertical)for(var t=0;t<this.node.children.length;t++){Math.abs(this.prevPos.y-this.node.position.y)>Gt&&(this.prevPos.y<this.node.position.y?this.pushToFooter():this.prevPos.y>this.node.position.y&&this.pushToHeader())}else for(var i=0;i<this.node.children.length;i++){Math.abs(this.prevPos.x-this.node.position.x)>Gt&&(this.prevPos.x>this.node.position.x?this.pushToFooter():this.prevPos.x<this.node.position.x&&this.pushToHeader())}this.prevPos=this.node.position.clone()}},h.pushToFooter=function(t){var i,e,o,r;(void 0===t&&(t=!1),this.vertical)?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?(t||this.headerBoundary-this.paddingTop>this.viewHeaderBoundary+(null==(i=this.header)?void 0:i.height))&&this.pushToFooterHandler():(t||this.footerBoundary-this.paddingTop>this.viewHeaderBoundary+(null==(e=this.header)?void 0:e.height))&&this.pushToHeaderHandler():this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?(t||this.headerBoundary+this.paddingLeft<this.viewHeaderBoundary-(null==(o=this.header)?void 0:o.width))&&this.pushToFooterHandler():(t||this.footerBoundary+this.paddingLeft<this.viewHeaderBoundary-(null==(r=this.header)?void 0:r.width))&&this.pushToHeaderHandler()},h.pushToHeader=function(t){var i,e,o,r;(void 0===t&&(t=!1),this.vertical)?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?(t||this.footerBoundary+this.paddingBottom<this.viewFooterBoundary-(null==(i=this.footer)?void 0:i.height))&&this.pushToHeaderHandler():(t||this.headerBoundary+this.paddingBottom<this.viewFooterBoundary-(null==(e=this.footer)?void 0:e.height))&&this.pushToFooterHandler():this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?(t||this.footerBoundary-this.paddingRight>this.viewFooterBoundary+(null==(o=this.footer)?void 0:o.width))&&this.pushToHeaderHandler():(t||this.headerBoundary-this.paddingRight>this.viewFooterBoundary+(null==(r=this.footer)?void 0:r.width))&&this.pushToFooterHandler()},h.pushToFooterHandler=function(){var t,i,e=null==(t=this.header)?void 0:t.node;if(this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.footerLoop:this.headerLoop:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.footerLoop:this.headerLoop)this.footerIndex>=this.itemTotal-1?e.__index=0:e.__index=this.footerIndex+1;else{if(!this.footer||this.footerIndex>=this.itemTotal-1)return;e.__index=this.footerIndex+1}e.__index>=0&&e.__index<this.currentCreateItemTotal&&this.notifyRefreshItem(e),this.setItemPosition(this.header,this.footer),null==(i=this.header)||i.node.setSiblingIndex(this.node.children.length)},h.pushToHeaderHandler=function(){var t,i,e,o=null==(t=this.footer)?void 0:t.node;(e=this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.headerLoop:this.footerLoop:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.headerLoop:this.footerLoop)||0!=this.headerIndex||(this.vertical?this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.isAccommodateByLeft(this.header):this.isAccommodateByRight(this.header):this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.isAccommodateByTop(this.header):this.isAccommodateByBottom(this.header))&&this.resetChilds(!0);if(e)0==this.headerIndex?o.__index=this.itemTotal-1:o.__index=this.headerIndex-1;else{if(!this.header||0==this.headerIndex)return;o.__index=this.headerIndex-1}o.__index>=0&&o.__index<this.currentCreateItemTotal&&this.notifyRefreshItem(o),this.setItemPosition(this.footer,this.header,!0),null==(i=this.footer)||i.node.setSiblingIndex(0)},h.notifyRefreshItem=function(t){this.refreshItemEvents.forEach((function(i){i instanceof f?f.emitEvents([i],t,t.__index):i(t,t.__index)}))},n(i,[{key:"currPageIndex",get:function(){return this._currPageIndex}},{key:"lastPageIndex",get:function(){return this._lastPageIndex}},{key:"vertical",get:function(){return this.layoutType==St.VERTICAL}},{key:"horizontal",get:function(){return this.layoutType==St.HORIZONTAL}},{key:"transform",get:function(){return this.node._uiProps.uiTransformComp}},{key:"accommodWidth",get:function(){return this.view.width-this.paddingLeft-this.paddingRight}},{key:"accommodHeight",get:function(){return this.view.height-this.paddingTop-this.paddingBottom}},{key:"header",get:function(){return 0==this.node.children.length?null:this.node.children[0]._uiProps.uiTransformComp}},{key:"footer",get:function(){return 0==this.node.children.length?null:this.node.children[this.node.children.length-1]._uiProps.uiTransformComp}},{key:"headerIndex",get:function(){return this.header?this.header.node.__index:-1}},{key:"footerIndex",get:function(){return this.footer?this.footer.node.__index:-1}},{key:"viewStartPoint",get:function(){var t=new p;return this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?t.x=-.5*this.view.width+this.paddingLeft:t.x=.5*this.view.width-this.paddingRight,this.verticalAxisDirection==Et.TOP_TO_BOTTOM?t.y=.5*this.view.height-this.paddingTop:t.y=-.5*this.view.height+this.paddingBottom,t}},{key:"viewHeaderBoundary",get:function(){return this.vertical?.5*this.view.height:-.5*this.view.width}},{key:"viewFooterBoundary",get:function(){return this.vertical?-.5*this.view.height:.5*this.view.width}},{key:"headerBoundary",get:function(){return this.header?this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.node.position.y+this.getItemYMax(this.header)+this.paddingTop:this.node.position.y+this.getItemYMin(this.header)-this.paddingBottom:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.node.position.x+this.getItemXMin(this.header)-this.paddingLeft:this.node.position.x+this.getItemXMax(this.header)+this.paddingRight:0}},{key:"footerBoundary",get:function(){return this.footer?this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?this.node.position.y+this.getItemYMin(this.footer)-this.paddingBottom:this.node.position.y+this.getItemYMax(this.footer)+this.paddingTop:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.node.position.x+this.getItemXMax(this.footer)+this.paddingRight:this.node.position.x+this.getItemXMin(this.footer)-this.paddingLeft:0}},{key:"centerHeaderBoundary",get:function(){var t,i=this.vertical?"y":"x";return t=this.centerNode?this.viewHeaderBoundary-this.centerNode.position[i]:this.viewHeaderBoundary-this.view.node.position[i],this.vertical&&this.verticalAxisDirection==Et.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.headerBoundary+t:this.footerBoundary+t}},{key:"centerFooterBoundary",get:function(){var t,i=this.vertical?"y":"x";return t=this.centerNode?this.viewFooterBoundary-this.centerNode.position[i]:this.viewFooterBoundary-this.view.node.position[i],this.vertical&&this.verticalAxisDirection==Et.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?this.footerBoundary+t:this.headerBoundary+t}},{key:"isOfLeftBoundary",get:function(){if(this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Dt.HEADER?this.centerHeaderBoundary:0;if(this.headerLoop)return this.header?0:this.viewHeaderBoundary+this.node.position.x;if(!this.header||this.fixedItemWidth<=this.view.width)return this.viewHeaderBoundary+this.node.position.x;if(this.horizontalAxisDirection==zt.LEFT_TO_RIGHT){if(0==this.headerIndex)return this.headerBoundary}else if(this.footerIndex==this.itemTotal-1)return this.footerBoundary;return 0}},{key:"isOfTopBoundary",get:function(){if(!this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Dt.HEADER?this.centerHeaderBoundary:0;if(this.headerLoop)return this.header?0:this.viewHeaderBoundary+this.node.position.y;if(!this.header||this.fixedItemHeight<=this.view.height)return this.viewHeaderBoundary+this.node.position.y;if(this.verticalAxisDirection==Et.TOP_TO_BOTTOM){if(0==this.headerIndex)return this.headerBoundary}else if(this.footerIndex==this.itemTotal-1)return this.footerBoundary;return 0}},{key:"isOfRightBoundary",get:function(){if(this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Dt.FOOTER?this.centerFooterBoundary:0;if(this.footerLoop)return this.footer?0:this.viewFooterBoundary+this.node.position.x;if(!this.footer||this.fixedItemWidth<=this.view.width)return this.viewFooterBoundary+this.node.position.x;if(this.horizontalAxisDirection==zt.LEFT_TO_RIGHT){if(this.footerIndex==this.itemTotal-1)return this.footerBoundary}else if(0==this.headerIndex)return this.headerBoundary;return 0}},{key:"isOfButtomBoundary",get:function(){if(!this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Dt.FOOTER?this.centerFooterBoundary:0;if(this.footerLoop)return this.footer?0:this.viewFooterBoundary+this.node.position.y;if(!this.footer||this.fixedItemHeight<=this.view.height)return this.viewFooterBoundary+this.node.position.y;if(this.verticalAxisDirection==Et.TOP_TO_BOTTOM){if(this.footerIndex==this.itemTotal-1)return this.footerBoundary}else if(0==this.headerIndex)return this.headerBoundary;return 0}},{key:"fixedItemHeight",get:function(){return this.header?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?Math.abs(this.getItemYMax(this.header))+Math.abs(this.getItemYMin(this.footer)):Math.abs(this.getItemYMin(this.header))+Math.abs(this.getItemYMax(this.footer)):0}},{key:"fixedItemWidth",get:function(){return this.header?this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?Math.abs(this.getItemXMin(this.header))+Math.abs(this.getItemXMax(this.footer)):Math.abs(this.getItemXMax(this.header))+Math.abs(this.getItemXMin(this.footer)):0}},{key:"contentSize",get:function(){if(0==this.node.children.length)return this.view.contentSize;var t=new v(this.view.contentSize.width,this.view.contentSize.height);return this.vertical?this.verticalAxisDirection==Et.TOP_TO_BOTTOM?t.height=this.headerBoundary+-this.footerBoundary:t.height=this.footerBoundary+-this.headerBoundary:this.horizontalAxisDirection==zt.LEFT_TO_RIGHT?t.width=this.footerBoundary+-this.headerBoundary:t.width=this.headerBoundary+-this.footerBoundary,t.width<this.view.contentSize.width&&(t.width=this.view.contentSize.width),t.height<this.view.contentSize.height&&(t.height=this.view.contentSize.height),t}},{key:"maxPrefabTotal",get:function(){return this._maxPrefabTotal}},{key:"itemTotal",get:function(){return this._itemTotal}},{key:"centerPosition",get:function(){if(!this._centerPosition)if(this._centerPosition=new p,this.autoCenter){if(this.centerNode){var t,i,e=null==(t=this.centerNode.parent)||null==(i=t._uiProps.uiTransformComp)?void 0:i.convertToWorldSpaceAR(this.centerNode.position);this._centerPosition=this.view.convertToNodeSpaceAR(e)}}else this.vertical?this.indexVerticalAxisDirection==Ft.TOP?this._centerPosition.y=this.viewHeaderBoundary:this._centerPosition.y=this.viewFooterBoundary:this.indexHorizontalAxisDirection==Ct.LEFT?this._centerPosition.x=this.viewHeaderBoundary:this._centerPosition.x=this.viewFooterBoundary;return this._centerPosition}}]),i}(m)).VerticalAxisDirection=Et,Lt.HorizontalAxisDirection=zt,it=i((tt=Lt).prototype,"scrollView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=i(tt.prototype,"view",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=i(tt.prototype,"prefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=i(tt.prototype,"layoutType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return St.VERTICAL}}),nt=i(tt.prototype,"indexVerticalAxisDirection",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ft.TOP}}),st=i(tt.prototype,"indexHorizontalAxisDirection",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ct.LEFT}}),ht=i(tt.prototype,"verticalAxisDirection",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Et.TOP_TO_BOTTOM}}),at=i(tt.prototype,"horizontalAxisDirection",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return zt.LEFT_TO_RIGHT}}),dt=i(tt.prototype,"groupItemTotal",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ct=i(tt.prototype,"multiple",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),lt=i(tt.prototype,"paddingTop",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ut=i(tt.prototype,"paddingBottom",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ft=i(tt.prototype,"paddingLeft",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tt=i(tt.prototype,"paddingRight",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pt=i(tt.prototype,"spacingX",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gt=i(tt.prototype,"spacingY",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vt=i(tt.prototype,"affectedByScale",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mt=i(tt.prototype,"isPageView",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yt=i(tt.prototype,"pageTurningSpeed",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),xt=i(tt.prototype,"indicator",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=i(tt.prototype,"scrollThreshold",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Ot=i(tt.prototype,"autoPageTurningThreshold",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),wt=i(tt.prototype,"pageEvents",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),It=i(tt.prototype,"autoCenter",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bt=i(tt.prototype,"centerTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pt=i(tt.prototype,"centerNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At=i(tt.prototype,"centerAnchor",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(.5,.5)}}),bt=i(tt.prototype,"headerLoop",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rt=i(tt.prototype,"footerLoop",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht=i(tt.prototype,"refreshItemEvents",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=tt))||$)||$));h._RF.pop()}}}));

System.register("chunks:///_virtual/super-scrollview.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,s,r,a,n,h,l,u,c,d,f,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,n=t._decorator,h=t.Vec2,l=t.EventHandler,u=t.PageView,c=t.Node,d=t.ScrollView,f=t.EventTouch,y=t.Vec3}],execute:function(){var g,v,p,_,T,E,m,P,O,S,L,b,C,I,B,x,M,k;t("ScrollViewDirection",void 0),a._RF.push({},"5a6c4CmPFxDCKIw4nAgvICm","super-scrollview",void 0);var H,R=n.ccclass,w=n.property,F=1e-4,A=new h;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.NONE=2]="NONE"}(H||(H=t("ScrollViewDirection",{})));t("SuperScrollview",(g=R("SuperScrollview"),v=w({tooltip:"注意！向上传递事件只会发送当前滑动相反方向,如果开启horizontal则会发送vertical事件。如果开启vertical则会发送horizontal事件。同时开启horizontal和vertical 不会发送任何事件"}),p=w({displayName:"顶部偏移量",tooltip:"下拉时超过此偏移会发送下拉事件",visible:function(){return this.pullRefresh}}),_=w({displayName:"满足触发Header的倍数",visible:function(){return this.pullRefresh}}),T=w({displayName:"底部偏移量",tooltip:"上拉时超过此偏移会发送上拉事件",visible:function(){return this.pullRefresh}}),E=w({displayName:"满足触发Footer的倍数",visible:function(){return this.pullRefresh}}),m=w({type:l,visible:function(){return this.pullRefresh}}),P=w({type:l,visible:function(){return this.pullRefresh}}),g((L=i((S=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(i=t.call.apply(t,[this].concat(r))||this).direction=H.NONE,o(i,"isTransmitEvent",L,s(i)),o(i,"pullRefresh",b,s(i)),o(i,"headerOutOffset",C,s(i)),o(i,"headerMultiple",I,s(i)),o(i,"footerOutOffset",B,s(i)),o(i,"footerMultiple",x,s(i)),o(i,"headerEvents",M,s(i)),o(i,"footerEvents",k,s(i)),i.prevLocation=new h,i.location=new h,i._touchBeganPosition=new h,i._touchEndPosition=new h,i.isMoveHeader=!1,i.isMoveFooter=!1,i.isLockHeader=!1,i.isLockFooter=!1,i.headerProgress=0,i.footerProgress=0,i.isCustomScroll=!1,i.canTouchMove=!0,i.isCallSoonFinish=!1,i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.layout.autoCenter&&(this.brake=.7)},a.onEnable=function(){t.prototype.onEnable.call(this),this.node.on(u.EventType.SCROLL_ENG_WITH_THRESHOLD,this.dispatchPageTurningEvent,this)},a.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(u.EventType.SCROLL_ENG_WITH_THRESHOLD,this.dispatchPageTurningEvent,this)},a.getPages=function(){return new Array(this.layout.itemTotal)},a._getContentTopBoundary=function(){return this._content?0==this.layout.isOfTopBoundary?this._topBoundary:this.layout.isOfTopBoundary:-1},a._getContentBottomBoundary=function(){return this._content?0==this.layout.isOfButtomBoundary?this._bottomBoundary:this.layout.isOfButtomBoundary:-1},a._getContentLeftBoundary=function(){return this._content?0==this.layout.isOfLeftBoundary?this._leftBoundary:this.layout.isOfLeftBoundary:-1},a._getContentRightBoundary=function(){return this._content?0==this.layout.isOfRightBoundary?this._rightBoundary:this.layout.isOfRightBoundary:-1},a._onTouchBegan=function(i,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.layout.onTouchBegin(),this.canTouchMove&&(this.direction=H.NONE,this.layout.isPageView&&(i.touch.getUILocation(A),h.set(this._touchBeganPosition,A.x,A.y)),t.prototype._onTouchBegan.call(this,i,e),this.isTransmitEvent&&this.transmitEvent(i,c.EventType.TOUCH_START))},a._onTouchMoved=function(i,e){var o,s;if(this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove){if(this.isTransmitEvent){if(this.direction==H.NONE){var r=i.getStartLocation(),a=i.getLocation(),n=Math.abs(r.x-a.x),h=Math.abs(r.y-a.y);n>h?this.direction=H.HORIZONTAL:h>n&&(this.direction=H.VERTICAL)}if(this.vertical&&this.direction===H.HORIZONTAL||this.horizontal&&this.direction==H.VERTICAL)return void this.transmitEvent(i,c.EventType.TOUCH_MOVE)}if(this.prevLocation=null==(o=i.touch)?void 0:o.getPreviousLocation(),this.location=null==(s=i.touch)?void 0:s.getLocation(),t.prototype._onTouchMoved.call(this,i,e),this.pullRefresh){var u=this._getHowMuchOutOfBoundary(),d=this.vertical?u.y:-u.x;d>0&&!this.isLockHeader&&!this.isLockFooter?(this.headerProgress=d<F?0:d/this.headerOutOffset,this.isMoveHeader=this.headerProgress>=this.headerMultiple,l.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:this.isMoveHeader?"wait":"touch"}),l.emitEvents(this.footerEvents,this,{action:!1,progress:0,stage:"release"})):d<0&&!this.isLockHeader&&!this.isLockFooter?(this.footerProgress=-d<F?0:-d/this.footerOutOffset,this.isMoveFooter=this.footerProgress>=this.footerMultiple,l.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:this.isMoveFooter?"wait":"touch"}),l.emitEvents(this.headerEvents,this,{action:!1,progress:0,stage:"release"})):0!=d||this.isLockHeader||this.isLockFooter||this.clearProgress()}}},a._onTouchEnded=function(i,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove&&(this.layout.isPageView&&(i.touch.getUILocation(A),h.set(this._touchEndPosition,A.x,A.y)),t.prototype._onTouchEnded.call(this,i,e),this.isTransmitEvent&&this.transmitEvent(i,c.EventType.TOUCH_END))},a._onTouchCancelled=function(i,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove&&(this.layout.isPageView&&(i.touch.getUILocation(A),h.set(this._touchEndPosition,A.x,A.y)),this.isTransmitEvent&&this.transmitEvent(i,c.EventType.TOUCH_CANCEL),t.prototype._onTouchCancelled.call(this,i,e))},a.scrollToAny=function(t,i,e){void 0===e&&(e=!0),this.isCustomScroll=!0,i?this._startAutoScroll(t,i,e,!0):this._moveContent(t)},a.release=function(){this.isMoveHeader=!1,this.isMoveFooter=!1,(this.isLockHeader||this.isLockFooter)&&(this.vertical&&this.isLockHeader&&(this._topBoundary+=this.headerOutOffset),this.vertical&&this.isLockFooter&&(this._bottomBoundary-=this.footerOutOffset),this.horizontal&&this.isLockHeader&&(this._leftBoundary-=this.headerOutOffset),this.horizontal&&this.isLockFooter&&(this._rightBoundary+=this.footerOutOffset),this.clearProgress(),this.layout.onPositionChanged(),this.isLockHeader=!1,this.isLockFooter=!1,this.startAutoScroll())},a.startAutoScroll=function(){this._autoScrolling=!0,this._outOfBoundaryAmountDirty=!0},a._startAutoScroll=function(i,e,o,s){if(void 0===s&&(s=!1),this.pullRefresh&&(this.isMoveHeader&&!this.isLockHeader?(this.vertical&&(this._topBoundary-=this.headerOutOffset,i.y-=this.headerOutOffset),this.horizontal&&(this._leftBoundary+=this.headerOutOffset,i.x+=this.headerOutOffset),this.isLockHeader=!0,l.emitEvents(this.headerEvents,this,{action:!0,progress:this.headerProgress,stage:"lock"})):this.isMoveFooter&&!this.isLockFooter&&(this.vertical&&(this._bottomBoundary+=this.footerOutOffset,i.y+=this.footerOutOffset),this.horizontal&&(this._rightBoundary-=this.footerOutOffset,i.x-=this.footerOutOffset),this.isLockFooter=!0,l.emitEvents(this.footerEvents,this,{action:!0,progress:this.footerProgress,stage:"lock"}))),t.prototype._startAutoScroll.call(this,i,e,o),!s&&this.layout.autoCenter){var r=this._calculateTouchMoveVelocity();this.isQuicklyScrollable(r)||this.soonFinish()}},a._updateScrollBar=function(i){if(t.prototype._updateScrollBar.call(this,new h(i.x,i.y)),!this._autoScrollBraking&&this._autoScrolling&&this.pullRefresh){var e=this.vertical?i.y:-i.x;if(e>0){var o=e<F?0:e/this.headerOutOffset;this.isLockHeader?(this.headerProgress=1==this.headerProgress?this.headerProgress:Math.max(o,1),l.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:"lock"})):(this.headerProgress=o<this.headerProgress?o:this.headerProgress,l.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:"release"}))}else if(e<0){var s=-e<F?0:-e/this.footerOutOffset;this.isLockFooter?(this.footerProgress=1==this.footerProgress?this.footerProgress:Math.max(s,1),l.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:"lock"})):(this.footerProgress=s<this.footerProgress?s:this.footerProgress,l.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:"release"}))}else 0==e&&(this.isLockHeader||this.isLockFooter||this.clearProgress())}},a.clearProgress=function(){l.emitEvents(this.headerEvents,this,{action:!1,progress:0,stage:"release"}),l.emitEvents(this.footerEvents,this,{action:!1,progress:0,stage:"release"})},a.dispatchPageTurningEvent=function(){this.layout._lastPageIndex!==this.layout._currPageIndex&&(this.layout._lastPageIndex=this.layout._currPageIndex,l.emitEvents(this.layout.pageEvents,this,u.EventType.PAGE_TURNING),this.node.emit(u.EventType.PAGE_TURNING,this))},a._handleReleaseLogic=function(i){this.layout.isPageView?(this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(d.EventType.SCROLL_ENDED))):t.prototype._handleReleaseLogic.call(this,i)},a._autoScrollToPage=function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();this._clampDelta(t),(t.x>0||t.y<0)&&(this.layout.horizontal?0==this.layout.horizontalAxisDirection?this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout._currPageIndex=0:0==this.layout.verticalAxisDirection?this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout._currPageIndex=0),(t.x<0||t.y>0)&&(this.layout.horizontal?0==this.layout.horizontalAxisDirection?this.layout._currPageIndex=0:this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:0==this.layout.verticalAxisDirection?this.layout._currPageIndex=0:this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1),this.layout.indicator&&this.layout.indicator._changedState()}else{var i=new h;h.subtract(i,this._touchBeganPosition,this._touchEndPosition);var e=this.layout._currPageIndex,o=e+this.getDragDirection(i),s=this.layout.pageTurningSpeed*Math.abs(e-o);if(this.layout.footerLoop&&o>=this.layout.itemTotal&&(o=0),this.layout.headerLoop&&o<0&&(o=this.layout.itemTotal-1),o<this.layout.itemTotal){if(this.isScrollable(i,e,o))return void this.scrollToPage(o,s);var r=this._calculateTouchMoveVelocity();if(this.isQuicklyScrollable(r))return void this.scrollToPage(o,s)}this.scrollToPage(e,s)}},a.savePageIndex=function(t){return!(t<0||t>=this.layout.itemTotal)&&(this.layout._currPageIndex=t,this.layout.indicator&&this.layout.indicator._changedState(),!0)},a.scrollToPage=function(t,i){void 0===i&&(i=.3),t<0||t>=this.layout.itemTotal||this.savePageIndex(t)&&this.layout.scrollToIndex(t,i)},a.isQuicklyScrollable=function(t){if(this.horizontal){if(Math.abs(t.x)>this.layout.autoPageTurningThreshold)return!0}else if(this.vertical&&Math.abs(t.y)>this.layout.autoPageTurningThreshold)return!0;return!1},a.getDragDirection=function(t){return this.horizontal?0===t.x?0:0==this.layout.horizontalAxisDirection?t.x>0?this.layout.groupItemTotal:-this.layout.groupItemTotal:t.x<0?this.layout.groupItemTotal:-this.layout.groupItemTotal:0===t.y?0:0==this.layout.verticalAxisDirection?t.y<0?this.layout.groupItemTotal:-this.layout.groupItemTotal:t.y>0?this.layout.groupItemTotal:-this.layout.groupItemTotal},a.isScrollable=function(t,i,e){var o=this.view;return!!o&&(this.horizontal?Math.abs(t.x)>=o.width*this.layout.scrollThreshold:!!this.vertical&&Math.abs(t.y)>=o.height*this.layout.scrollThreshold)},a.transmitEvent=function(t,i){var e=new f(t.getTouches(),t.bubbles,i);e.type=i,e.touch=t.touch,t.target.parent.dispatchEvent(e)},a.soonFinish=function(){this.isCallSoonFinish=!0,this.layout.soonFinish()},a._processAutoScrolling=function(t){var i=this._isNecessaryAutoScrollBrake(),e=i?.015:1;this._autoScrollAccumulatedTime+=t*(1/e);var o,s=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=s,s=(o-=1)*o*o*o*o+1);var r=this._autoScrollTargetDelta.clone();r.multiplyScalar(s);var a=this._autoScrollStartPosition.clone();a.add(r);var n=Math.abs(s-1)<=F;if(Math.abs(s-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(d.EventType.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var h=a.clone();h.subtract(this._autoScrollBrakingStartPosition),i&&h.multiplyScalar(e),a.set(this._autoScrollBrakingStartPosition),a.add(h)}else{var l=a.clone();l.subtract(this.getContentPosition());var u=this._getHowMuchOutOfBoundary(l);u.equals(y.ZERO,F)||(a.add(u),n=!0)}n&&(this._autoScrolling=!1),!this.layout.autoCenter||this.isCallSoonFinish||this.isCustomScroll||(this._autoScrollTotalTime<2||s>=.8)&&this.soonFinish();var c=a.clone();c.subtract(this.getContentPosition()),this._clampDelta(c),this._moveContent(c,n),this._dispatchEvent(d.EventType.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(d.EventType.SCROLL_ENDED))},r(i,[{key:"autoScrolling",set:function(t){this._autoScrolling=t}},{key:"layout",get:function(){var t;this._layout||(this._layout=null==(t=this.content)?void 0:t.getComponent("SuperLayout"));return this._layout}},{key:"curPageIdx",get:function(){return this.layout._currPageIndex}}]),i}(d)).prototype,"isTransmitEvent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=i(S.prototype,"pullRefresh",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=i(S.prototype,"headerOutOffset",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),I=i(S.prototype,"headerMultiple",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),B=i(S.prototype,"footerOutOffset",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),x=i(S.prototype,"footerMultiple",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),M=i(S.prototype,"headerEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=i(S.prototype,"footerEvents",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=S))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/teamData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./gameDef.ts","./uiTeamWeapon.ts","./ObjectUtil.ts","./gEvent.ts","./dataBase.ts","./gameData.ts","./playerData.ts","./weaponData.ts"],(function(e){"use strict";var t,a,o,r,n,s,i,c,l,p,u,d,h,m,H,f,v,w,_,g,I;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose,o=e.createClass,r=e.asyncToGenerator},function(e){n=e.cclegacy,s=e._decorator,i=e.math},function(e){c=e.uiManager},function(e){l=e.gameDef,p=e.eWeaponType,u=e.eAttrType,d=e.AttrKV,h=e.eWeaponShowFilter},function(e){m=e.uiTeamWeaponData},function(e){H=e.default},function(e){f=e.gEvent},function(e){v=e.dataBase},function(e){w=e.gameData},function(e){_=e.DataType,g=e.playerData},function(e){I=e.weaponFilter}],execute:function(){var T;n._RF.push({},"b3934a0joNGmbYOszPHh5Cr","teamData",void 0);var W=s.ccclass,y=(s.property,e("TeamHeroWeapon",(function(){this.weapon_id="",this.lock=!1}))),D=e("TeamHero",(function(){this.priority=0,this.weapons=[]})),S=e("Team",(function(){this.teamHeros={}}));e("teamData",W("teamData")(T=function(e){function n(){var t;return(t=e.call(this)||this).teams=new Map,t.filter=new I,t.show=h.showHave,t._currectTeam=void 0,t.selectedHeroId=void 0,t.selectedHeroWeaponIndex=void 0,t.selectedWeapon=void 0,t.addListener(),t.init(),t}t(n,e);var s=n.prototype;return s.addListener=function(){},s.init=function(){for(var e=1;e<=l.Teams_Count;++e)this.teams.set(e,new S)},s.saveTeam=function(e){null==e&&(e=this._currectTeam);var t=JSON.stringify(this.teams.get(e));console.log("saveteam"+this._currectTeam+":"+t),localStorage.setItem(_.teamData+e.toString(),t)},s.savedata=function(){for(var e,t=a(this.teams.keys());!(e=t()).done;){var o=e.value;localStorage.setItem(_.teamData+o.toString(),JSON.stringify(this.teams.get(o)))}var r={};r.currectTeam=this.currectTeam,localStorage.setItem(_.teamData,JSON.stringify(r))},s.loaddata=function(){var e=r(regeneratorRuntime.mark((function e(){var t,o,r,n,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this.teams.keys());case 1:if((o=t()).done){e.next=10;break}if(r=o.value,n=localStorage.getItem(_.teamData+r.toString())){e.next=7;break}return this.teams.set(r,new S),e.abrupt("continue",8);case 7:this.teams.set(r,JSON.parse(n));case 8:e.next=1;break;case 10:(s=localStorage.getItem(_.teamData))?(i=JSON.parse(s),this.currectTeam=i.currectTeam):this.currectTeam=1;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.deleteData=function(){for(var e,t=a(this.teams.keys());!(e=t()).done;){var o=e.value;localStorage.removeItem(_.teamData+o.toString())}localStorage.removeItem(_.teamData)},s.copyTeam=function(e,t){var a=H.deepCopy(this.teams.get(e));this.teams.set(t,a),t==this._currectTeam&&this.updateCurrentTeam()},s.deleteTeam=function(e){this.teams.set(e,new S),e==this._currectTeam&&this.updateCurrentTeam()},s.updateCurrentTeam=function(){var e=this.currectData,t=g.Ins.weaponData;t.clearEquipData();for(var o,r=a(g.Ins.heroData.heros.values());!(o=r()).done;){var n=o.value,s=e.teamHeros[n.hero.id];if(s)for(var i=n.slots;i<l.Hero_Max_Weapon_Count;++i)null!=s.weapons[i]&&(s.weapons[i]=null);n.teamHero=s,n.calcFinalStatus(),t.updateByHero(n)}this.selectedHeroId=void 0,this.selectedHeroWeaponIndex=void 0,this.selectedWeapon=void 0,f.emit(f.UI_Team_Change)},s.createTeamHero=function(e){var t=new D;t.priority=0,t.weapons=[];for(var a=0;a<l.Hero_Max_Weapon_Count;++a)t.weapons.push(null);return this.currectData.teamHeros[e]=t,t},s.setHeroPriority=function(e,t){e.teamHero||(e.teamHero=this.createTeamHero(e.hero.id)),e.teamHero.priority=i.clamp(Math.round(t),-9,9),f.emit(f.Hero_Update)},s.touchHeroWeapon=function(e,t){if(null!=this.selectedWeapon){if(!this.setHeroWeapon(e,t,this.selectedWeapon))return;return this.selectedWeapon=void 0,f.emit(f.UI_Team_Select_Change),void f.emit(f.Hero_Update)}this.selectedHeroId&&this.selectedHeroId==e.hero.id&&this.selectedHeroWeaponIndex==t?(this.selectedHeroId=void 0,this.selectedHeroWeaponIndex=void 0):(this.selectedHeroId=e.hero.id,this.selectedHeroWeaponIndex=t),this.selectedWeapon=void 0,f.emit(f.UI_Team_Select_Change)},s.setHeroWeapon=function(e,t,a){if(t>=e.slots)return c.Ins.m_tips.showFormatedTip("Slots not open!"),!1;var o=g.Ins.weaponData.weapons.get(a);return o?o._freeCount<=0?(c.Ins.m_tips.showFormatedTip("not enough weapon!"),!1):o.weapon.weapon_type!=p.All&&o.weapon.weapon_type!=e.hero.weaponType?(c.Ins.m_tips.showFormatedTip("weapon_type error!"),!1):t>=e.slots?(c.Ins.m_tips.showFormatedTip("Slots not open!"),!1):(e.teamHero||(e.teamHero=this.createTeamHero(e.hero.id)),g.Ins.weaponData.updateByHero(e,t,!1),e.teamHero.weapons[t]||(e.teamHero.weapons[t]=new y),e.teamHero.weapons[t].weapon_id=a,g.Ins.weaponData.updateByHero(e,t,!0),e.calcFinalStatus(),!0):(console.log("!weapon_id:"+a),!1)},s.touchWeapon=function(e){if(!this.selectedHeroId)return this.selectedWeapon&&this.selectedWeapon==e.weapon.fullId?this.selectedWeapon=void 0:this.selectedWeapon=e.weapon.fullId,void f.emit(f.UI_Team_SelectWeapon_Change);var t=g.Ins.heroData.heros.get(this.selectedHeroId);t?this.setHeroWeapon(t,this.selectedHeroWeaponIndex,e.weapon.fullId)&&(this.selectedHeroId=void 0,this.selectedHeroWeaponIndex=void 0,f.emit(f.UI_Team_Select_Change),f.emit(f.Hero_Update)):console.error("!hero id:"+this.selectedHeroId)},s.calcWeaponAtkforHeroSlot=function(e,t,a){var o=g.Ins.heroData.heros.get(t);if(o){var r=[o.status];if(o.teamHero)for(var n=0;n<o.teamHero.weapons.length;++n)if(n!=a&&o.teamHero.weapons[n]){var s=g.Ins.weaponData.weapons.get(o.teamHero.weapons[n].weapon_id);s&&r.push(s.weapon.status)}r.push(e.status);var i=w.compAttrKV.apply(w,r);w.compPrecentAttrKV(i);var c=w.getAttrValue(i,u.ATK)-w.getAttrValue(o.finalStatus,u.ATK);return c>=0?new d(u.Up,c):new d(u.Down,-c)}console.log("!hero chara_id:"+t)},s.setSelectHeroWeaponLock=function(e){if(null!=this.selectedHeroId&&null!=this.selectedHeroWeaponIndex){var t=g.Ins.heroData.heros.get(this.selectedHeroId);t?(this.setHeroWeaponLock(t,this.selectedHeroWeaponIndex,e),f.emit(f.UI_Team_Select_Change)):console.error("!hero id:"+this.selectedHeroId)}},s.setHeroWeaponLock=function(e,t,a){var o,r;e.teamHero||(e.teamHero=this.createTeamHero(e.hero.id)),null==t?(o=0,r=l.Hero_Max_Weapon_Count):(o=t,r=t+1);for(var n=o;n<r;++n)e.teamHero.weapons[t]&&(e.teamHero.weapons[t].lock=a)},s.clearAllLock=function(){for(var e,t=this.getTeamHeroList(),o=a(t);!(e=o()).done;){var r=e.value;this.setHeroWeaponLock(r,void 0,!1)}f.emit(f.UI_Team_Select_Change)},s.clearSelectedHeroWeapon=function(e){if(void 0===e&&(e=!1),null!=this.selectedHeroId&&null!=this.selectedHeroWeaponIndex){var t=g.Ins.heroData.heros.get(this.selectedHeroId);t?(this.clearHeroWeapon(t,!1,e?void 0:this.selectedHeroWeaponIndex),this.selectedHeroId=void 0,this.selectedHeroWeaponIndex=void 0,f.emit(f.UI_Team_Select_Change),f.emit(f.Hero_Update)):console.error("!hero id:"+this.selectedHeroId)}},s.clearHeroWeapon=function(e,t,a){var o,r;e.teamHero||(e.teamHero=this.createTeamHero(e.hero.id)),null==a?(o=0,r=l.Hero_Max_Weapon_Count):(o=a,r=a+1);for(var n=o;n<r;++n)e.teamHero.weapons[n]&&!t&&e.active&&e.teamHero.weapons[n].lock||(g.Ins.weaponData.updateByHero(e,n,!1),e.teamHero.weapons[n]=null);e.calcFinalStatus()},s.clearAllWeapon=function(){for(var e,t=this.getTeamHeroList(!1),o=a(t);!(e=o()).done;){var r=e.value;this.clearHeroWeapon(r,!0)}this.selectedHeroId=void 0,this.selectedHeroWeaponIndex=void 0,this.selectedWeapon=void 0,f.emit(f.UI_Team_Select_Change),f.emit(f.Hero_Update)},s.autoEquipAll=function(){for(var e,t=this.getTeamHeroList(!1),o=a(t);!(e=o()).done;){var r=e.value;this.clearHeroWeapon(r,!0)}t=this.getTeamHeroList();for(var n,s=a(t);!(n=s()).done;){var i=n.value;this.autoEquipHero(i)}this.selectedHeroId=void 0,this.selectedHeroWeaponIndex=void 0,this.selectedWeapon=void 0,f.emit(f.UI_Team_Select_Change),f.emit(f.Hero_Update)},s.autoEquipHero=function(e){var t=!0;for(this.clearHeroWeapon(e,!1);t;){t=!1;for(var a=0;a<e.slots;++a)if(!e.teamHero.weapons[a]||!e.teamHero.weapons[a].lock){var o=this._getTeamWeaponList(e.hero.id,a,new I,h.showRemain);0!=o.length&&o[0].attr.type!=u.Down&&0!=o[0].attr.value&&this.setHeroWeapon(e,a,o[0].pw.weapon.fullId)&&(t=!0)}}e.calcFinalStatus(),f.emit(f.UI_Team_Select_Change),f.emit(f.Hero_Update)},s.getTeamHeroList=function(e){void 0===e&&(e=!0);for(var t,o=[],r=a(g.Ins.heroData.heros.values());!(t=r()).done;){var n=t.value;e&&!n.active||o.push(n)}return o.sort((function(e,t){return e.priority!=t.priority?t.priority-e.priority:w.getAttrValue(t.status,u.ATK)-w.getAttrValue(e.status,u.ATK)})),o},s.getTeamWeaponList=function(){return this._getTeamWeaponList(this.selectedHeroId,this.selectedHeroWeaponIndex,this.filter,this.show)},s._getTeamWeaponList=function(e,t,o,r){var n,s=[],i=o;null!=e&&(n=g.Ins.heroData.heros.get(e));for(var c,l=a(g.Ins.weaponData.weapons.values());!(c=l()).done;){var u=c.value;switch(r){case h.showRemain:if(u._freeCount<=0)continue;break;case h.showHave:if(u.totalCount<=0)continue}if(!(i.type.length>0&&-1==i.type.indexOf(u.weapon.weapon_type))&&!(i.star.length>0&&-1==i.star.indexOf(u.weapon.weapon_rarity))){if(i.attr.length>0){for(var d,H=!1,f=a(i.attr);!(d=f()).done;){var v=d.value;if(0==w.getAttrValue(u.weapon.status,v)){H=!0;break}}if(H)continue}if(null==e)s.push(new m(u));else{if(n&&u.weapon.weapon_type!=p.All&&u.weapon.weapon_type!=n.hero.weaponType)continue;s.push(new m(u,this.calcWeaponAtkforHeroSlot(u.weapon,e,t)))}}}return s.sort(m.Sort),s},o(n,[{key:"currectTeam",get:function(){return this._currectTeam},set:function(e){this._currectTeam=e,this.updateCurrentTeam()}},{key:"currectData",get:function(){return this.teams.get(this._currectTeam)}}]),n}(v))||T);n._RF.pop()}}}));

System.register("chunks:///_virtual/teamSwitchWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./gameDef.ts","./callBack.ts","./uiBase.ts"],(function(e){"use strict";var t,n,o,i,s,a,l,T,h,c,m,r,p;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,i=e._decorator,s=e.Toggle,a=e.Label,l=e.Node},function(e){T=e.uiManager},function(e){h=e.playerData},function(e){c=e.gameDef},function(e){m=e.callBack},function(e){r=e.uiBase,p=e.eUILayer}],execute:function(){var g;o._RF.push({},"719a6ge/cZBbZiJYQsY7Zos","teamSwitchWin",void 0);var u=i.ccclass;i.property,e("teamSwitchWin",u("teamSwitchWin")(g=function(e){function o(){var t;return(t=e.call(this)||this).labTips=null,t.ToggleTeam1=null,t.ToggleTeam2=null,t.ToggleTeam3=null,t.ToggleTeam4=null,t.ToggleTeam5=null,t.ToggleTeam6=null,t.ToggleTeam7=null,t.ToggleTeam8=null,t.ToggleTeam9=null,t.ToggleTeam10=null,t.btnCopy=null,t.btnDelete=null,t.btnOk=null,t.btnCancel=null,t._ToggleTeam=[],t._selectTeam=void 0,t._bCopy=!1,t._copyToTeam=void 0,t._uiInfo.prefabPath="team/prefabs/teamSwitch/teamSwitch",t._uiInfo.uiLayer=p.eUIL_Dialog,t}t(o,e);var i=o.prototype;return i.init=function(){e.prototype.init.call(this),this.labTips=this.nodeRoot.getChildByPath("window/labTips"),this.btnCopy=this.nodeRoot.getChildByPath("window/btnCopy"),this.btnDelete=this.nodeRoot.getChildByPath("window/btnDelete"),this.btnOk=this.nodeRoot.getChildByPath("window/btnOk"),this.btnCancel=this.nodeRoot.getChildByPath("window/btnCancel");for(var t=1;t<=c.Teams_Count;++t){var n=this["ToggleTeam"+t]=this.nodeRoot.getChildByPath("window/ToggleGroupTeam/ToggleTeam"+t).getComponent(s);n.node.getChildByName("Label").getComponent(a).string=t.toString(),this._ToggleTeam.push(n)}this.initTeam(),this["ToggleTeam"+this._selectTeam].isChecked=!0,this.labTips.active=this._bCopy},i.initTeam=function(){this._selectTeam=h.Ins.teamData.currectTeam},i.addListener=function(){e.prototype.addListener.call(this),this.btnCopy.on(l.EventType.TOUCH_END,this.onBtnCopy,this),this.btnDelete.on(l.EventType.TOUCH_END,this.onBtnDelete,this),this.btnOk.on(l.EventType.TOUCH_END,this.onBtnOk,this),this.btnCancel.on(l.EventType.TOUCH_END,this.onBtnCancel,this);for(var t,o=n(this._ToggleTeam);!(t=o()).done;){t.value.node.on(s.EventType.TOGGLE,this.onToggleTeam,this)}},i.removeListener=function(){this.btnCopy.off(l.EventType.TOUCH_END,this.onBtnCopy,this),this.btnDelete.off(l.EventType.TOUCH_END,this.onBtnDelete,this),this.btnOk.off(l.EventType.TOUCH_END,this.onBtnOk,this),this.btnCancel.off(l.EventType.TOUCH_END,this.onBtnCancel,this);for(var t,o=n(this._ToggleTeam);!(t=o()).done;){t.value.node.off(s.EventType.TOGGLE,this.onToggleTeam,this)}e.prototype.removeListener.call(this)},i.destroy=function(){this._ToggleTeam=[],e.prototype.destroy.call(this)},i.onToggleTeam=function(e){var t=this._ToggleTeam.indexOf(e);if(-1!==t){if(++t,e.isChecked)if(this._bCopy){if(t==this._selectTeam)return void T.Ins.m_tips.showFormatedTip("Cann't copy Team "+this._selectTeam+" to Team "+t+"!");this._copyToTeam=t,T.Ins.open("messageWin","Are you sure to Copy Team "+this._selectTeam+" to Team "+this._copyToTeam+"?\nTeam "+this._copyToTeam+"'s data will lost!","WARNING",new m(this.realCopy,this),null,null)}else this._selectTeam=t}else console.error("!onToggleTeam index")},i.realCopy=function(){this.onBtnCopy(),h.Ins.teamData.copyTeam(this._selectTeam,this._copyToTeam),T.Ins.m_tips.showFormatedTip("Team "+this._selectTeam+" copy to Team "+this._copyToTeam+" success!"),this._selectTeam=this._copyToTeam,this.onBtnCopy()},i.onBtnCopy=function(){this._bCopy=!this._bCopy,this.labTips.active=this._bCopy},i.onBtnDelete=function(){T.Ins.open("messageWin","Are you sure to Delete Team "+this._selectTeam+"?","WARNING",new m(this.realDelete,this),null,null)},i.realDelete=function(){h.Ins.teamData.deleteTeam(this._selectTeam)},i.onBtnOk=function(){h.Ins.teamData.currectTeam=this._selectTeam,this.close()},i.onBtnCancel=function(){this.close()},o}(r))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/teamWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiTeam.ts"],(function(t){"use strict";var i,e,n,o,a,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){o=t.uiBase,a=t.eUILayer},function(t){r=t.uiTeam}],execute:function(){var u;e._RF.push({},"f5790Vv8ltP9a5lSzeiJIjw","teamWin",void 0);var s=n.ccclass;n.property,t("teamWin",s("teamWin")(u=function(t){function e(){var i;return(i=t.call(this)||this)._uiInfo.prefabPath="team/prefabs/teamWin",i._uiInfo.uiLayer=a.eUIL_Win,i._uiInfo.isAlphaBg=!1,i._uiInfo.isAnim=!1,i}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(r).init(this)},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/tip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gEvent.ts","./uiComponentBase.ts"],(function(t){"use strict";var i,e,n,o,a,s,c,r,u;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.UIOpacity,a=t.Label,s=t.tween,c=t.Tween},function(t){r=t.gEvent},function(t){u=t.uiComponentBase}],execute:function(){var l;e._RF.push({},"c571cJBAr9HBI5ndi/TM81Q","tip",void 0);var p=n.ccclass;n.property,t("ui_tip",p("ui_tip")(l=function(t){function e(i,e,n){var o;void 0===i&&(i=null),void 0===e&&(e=null),void 0===n&&(n=null);for(var a=arguments.length,s=new Array(a>3?a-3:0),c=3;c<a;c++)s[c-3]=arguments[c];return(o=t.call.apply(t,[this,i,e,n].concat(s))||this).uiOpacity=null,o.label=null,o.constructed(),o}i(e,t);var n=e.prototype;return n.setPrefabPath=function(){this.prefabPath="tips/prefabs/tip"},n.init=function(){this.uiOpacity=this.nodeRoot.getComponent(o),this.label=this.nodeRoot.getChildByPath("Node/Label").getComponent(a),this.label.string=this.args[0],this.uiOpacity.opacity=0,s(this.uiOpacity).set({opacity:0}).to(.25,{opacity:255},{easing:"quartOut"}).delay(3).to(.25,{opacity:0},{easing:"quartOut"}).call(function(){r.emit(r.UI_Tips_Over,this)}.bind(this)).start()},n.destroy=function(){c.stopAllByTarget(this.uiOpacity),t.prototype.destroy.call(this)},e}(u))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gEvent.ts","./uiComponentBase.ts","./tip.ts"],(function(t){"use strict";var i,n,o,s,e,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){s=t.gEvent},function(t){e=t.uiComponentBase},function(t){r=t.ui_tip}],execute:function(){var p;n._RF.push({},"127a8kubkdG+47yoITxrTMo","tips",void 0);var u=o.ccclass;o.property,t("ui_tips",u("ui_tips")(p=function(t){function n(i,n,o){var s;void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null);for(var e=arguments.length,r=new Array(e>3?e-3:0),p=3;p<e;p++)r[p-3]=arguments[p];return(s=t.call.apply(t,[this,i,n,o].concat(r))||this).tipNode=null,s._tips=null,s.constructed(),s}i(n,t);var o=n.prototype;return o.setPrefabPath=function(){this.prefabPath="tips/prefabs/tips"},o.init=function(){this.tipNode=this.nodeRoot.getChildByPath("tipNode"),this._tips=[]},o.addListener=function(){s.on(s.UI_Tips_Over,this.onUI_Tips_Over,this)},o.removeListener=function(){s.off(s.UI_Tips_Over,this.onUI_Tips_Over,this)},o.destroy=function(){t.prototype.destroy.call(this)},o.onUI_Tips_Over=function(t){var i=this._tips.indexOf(t);this._tips.slice(i,1),t.destroy()},o.showFormatedTip=function(t){var i=new r(null,null,this,t);this.tipNode.addChild(i.compRoot),this._tips.push()},n}(e))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/TouchHold.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,n,l,e,h;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,l=o._decorator,e=o.Node,h=o.Component}],execute:function(){var i,d;o("eHoldState",void 0),n._RF.push({},"0488enBhZZC+Kamm4v3WJFH","TouchHold",void 0);var c,s=l.ccclass;l.property;!function(o){o[o.NotHold=-1]="NotHold",o[o.HoldBegin=0]="HoldBegin",o[o.HoldEnd=-2]="HoldEnd"}(c||(c=o("eHoldState",{})));o("TouchHold",s("TouchHold")(((d=function(o){function n(){for(var t,n=arguments.length,l=new Array(n),e=0;e<n;e++)l[e]=arguments[e];return(t=o.call.apply(o,[this].concat(l))||this)._hold=c.NotHold,t._holdDelay=5,t._holdCb=null,t._touchCb=null,t}t(n,o);var l=n.prototype;return l.onLoad=function(){this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(e.EventType.TOUCH_END,this.onTouchEnd,this)},l.onDestroy=function(){},l.init=function(o,t,l){void 0===t&&(t=n.DefaultDelayTime),this._holdDelay=t,this._holdCb=o,this._touchCb=l},l.onTouchStart=function(o){this._hold=c.HoldBegin},l.onTouchMove=function(o){var t=o.getLocation().subtract(o.getStartLocation());(Math.abs(t.x)>n.DefaultPosTolerance||Math.abs(t.y)>n.DefaultPosTolerance)&&(this._hold=c.HoldEnd)},l.onTouchEnd=function(o){var t;this._hold!=c.HoldEnd&&(this._hold=c.NotHold,null==(t=this._touchCb)||t.call(this,o))},l.update=function(o){null!=this._holdCb&&(this._hold<0||(this._hold+=o,this._hold>this._holdDelay&&(this._hold=c.HoldEnd,this._holdCb.call(this))))},n}(h)).DefaultDelayTime=2,d.DefaultPosTolerance=5,i=d))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/uiAttr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Configs.ts","./resManager.ts","./gameDef.ts","./ComponentListItem.ts"],(function(t){"use strict";var e,i,r,a,n,l,o,u,s,c,h,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,o=t.Sprite,u=t.Label},function(t){s=t.Configs},function(t){c=t.resManager},function(t){h=t.gameDef,g=t.eAttrValueShowType},function(t){b=t.ComponentListItem}],execute:function(){var f,p,v,d,m,A,y,w,V;n._RF.push({},"6434cxr8alCX6M2vgOlrgSF","uiAttr",void 0);var S=l.ccclass,C=l.property;t("uiAttr",(f=S("uiAttr"),p=C(o),v=C(u),d=C(u),f((y=e((A=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,r(e,"imgAttr",y,a(e)),r(e,"labAttr",w,a(e)),r(e,"labValue",V,a(e)),e._data=void 0,e}return i(e,t),e.prototype.refresh=function(){var t=this,e=this._data,i=s.GetCfg(s.AttrShowCfg,e.type);switch(""!=i.image?c.setSprite(this.imgAttr,h.bundleIcon,i.image,this._win).then((function(e){e&&(t.imgAttr.node.active=!0)})):this.imgAttr.node.active=!1,""!=i.name?(this.labAttr.node.active=!0,this.labAttr.string=i.name):this.labAttr.node.active=!1,i.valueshow){case g.Normal:this.labValue.node.active=!0,this.labValue.string=e.value.toString();break;case g.Precent:this.labValue.node.active=!0,Math.round(e.value/100)!=e.value/100?this.labValue.string=(e.value/100).toFixed(1)+"%":this.labValue.string=e.value/100+"%";break;case g.Hide:this.labValue.node.active=!1;break;default:throw new Error("!eAttrValueShowType:"+i.valueshow)}},e}(b)).prototype,"imgAttr",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(A.prototype,"labAttr",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(A.prototype,"labValue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=A))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/uiAttrType.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Configs.ts","./resManager.ts","./gameDef.ts"],(function(t){"use strict";var i,e,n,r,a,o,s,c,l,u,f,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.Sprite,c=t.Label,l=t.Component},function(t){u=t.Configs},function(t){f=t.resManager},function(t){p=t.gameDef}],execute:function(){var h,g,v,d,A,m,y;a._RF.push({},"4f0e2zH/QNL0LvtfWjOMXvl","uiAttrType",void 0);var b=o.ccclass,_=o.property;t("uiAttrType",(h=b("uiAttrType"),g=_(s),v=_(c),h((m=i((A=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,n(i,"imgAttr",m,r(i)),n(i,"labAttr",y,r(i)),i._data=void 0,i._win=void 0,i}e(i,t);var a=i.prototype;return a.onDestroy=function(){this._win=null},a.init=function(t,i){var e=this;if(this._win=i,this._data=t,null!=this._data){this.node.active=!0;var n=u.GetCfg(u.AttrShowCfg,this._data);""!=n.image?(this.imgAttr.node.active=!1,f.setSprite(this.imgAttr,p.bundleIcon,n.image,this._win).then((function(t){t&&(e.imgAttr.node.active=!0)}))):this.imgAttr.node.active=!1,""!=n.name?(this.labAttr.node.active=!0,this.labAttr.string=n.name):this.labAttr.node.active=!1}else this.node.active=!1},i}(l)).prototype,"imgAttr",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(A.prototype,"labAttr",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=A))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./gEvent.ts"],(function(e){"use strict";var t,n,i,s,o,a,u,r,c,h,l,_,d,f;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,i=e._decorator,s=e.Prefab,o=e.instantiate,a=e.Widget,u=e.Vec3,r=e.UIOpacity,c=e.tween,h=e.Tween,l=e.js},function(e){_=e.resManager},function(e){d=e.gameDef},function(e){f=e.gEvent}],execute:function(){e("eUILayer",void 0),n._RF.push({},"8515f/xqk1BN7OTVppQEuv3","uiBase",void 0);var g;i.ccclass,i.property;!function(e){e[e.eUIL_Back=0]="eUIL_Back",e[e.eUIL_MainHUD=1]="eUIL_MainHUD",e[e.eUIL_Win=2]="eUIL_Win",e[e.eUIL_HudTop=3]="eUIL_HudTop",e[e.eUIL_Dialog=4]="eUIL_Dialog",e[e.eUIL_MessageBox=5]="eUIL_MessageBox",e[e.eUIL_Tip=6]="eUIL_Tip",e[e.eUIL_Loading=7]="eUIL_Loading",e[e.eUIL_Mask=8]="eUIL_Mask",e[e.eUIL_Waiting=9]="eUIL_Waiting",e[e.eUIL_NetMessageBox=10]="eUIL_NetMessageBox",e[e.eUIL_Count=11]="eUIL_Count"}(g||(g=e("eUILayer",{})));var I=e("uiBaseInfo",(function(){this.bundleName=void 0,this.prefabPath=void 0,this.uiLayer=void 0,this.isAnim=void 0,this.isAlphaBg=void 0,this.autoRelease=void 0,this.bundleName=d.bundleUI,this.prefabPath=null,this.uiLayer=g.eUIL_Win,this.isAnim=!0,this.isAlphaBg=!0,this.autoRelease=!0}));e("uiBase",function(){function e(){this._name=void 0,this._uiInfo=null,this._nodeRoot=null,this._maskBg=null,this.m_args=new Array,this._uiInfo=new I,this._name=l.getClassName(this)}var n=e.prototype;return n.setArg=function(e){this.m_args.length=0;for(var t=0;t<e.length;t++)this.m_args.push(e[t])},n.childrenCreated=function(){this.init(),this.createMask(),this.addListener()},n.init=function(){},n.reInit=function(){},n.release=function(){},n.addListener=function(){f.on(f.UI_CloseFinished,this.onClose,this)},n.removeListener=function(){f.off(f.UI_CloseFinished,this.onClose,this)},n.update=function(e){},n.destroy=function(){var e;this.removeListener(),null==(e=this.nodeRoot)||e.destroy(),this.release()},n.close=function(){f.emit(f.UI_Close,this._name)},n.onClose=function(e){e==this._name&&this.destroy()},n.onShow=function(){},n.createMask=function(){var e=this;this._uiInfo.isAlphaBg&&_.asyncloadAsset(d.bundleUI,"tips/prefabs/uiMask",s).then((function(t){e._maskBg=o(t),e.nodeRoot.insertChild(e._maskBg,0),e._maskBg.getComponent(a).enabled=!1,e._maskBg.setScale(new u(3,3,1))}))},n.showAnim=function(e){var t=this.nodeRoot.getComponent(r);c(t).delay(.02).set({opacity:128}).to(.25,{opacity:255},{easing:"quartOut"}).start(),c(this.nodeRoot).delay(.02).set({active:!0}).set({scale:new u(.5,.5,1)}).to(.25,{scale:new u(1,1,1)},{easing:"backOut"}).call((function(){e&&e()})).start()},n.hideAnim=function(e){h.stopAllByTarget(this.nodeRoot);var t=this.nodeRoot.getComponent(r);c(t).to(.25,{opacity:0},{easing:"quartOut"}).call((function(){e&&e()})).start()},t(e,[{key:"name",get:function(){return this._name}},{key:"uiInfo",get:function(){return this._uiInfo}},{key:"nodeRoot",get:function(){return this._nodeRoot},set:function(e){this._nodeRoot=e}},{key:"isValid",get:function(){return this.nodeRoot.isValid}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./gEvent.ts","./callBack.ts","./ComponentList.ts","./gameDef.ts","./gameData.ts","./resManager.ts"],(function(t){"use strict";var e,n,i,a,o,l,r,s,u,c,h,b,p,m,f,S,g,y,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,r=t.Node,s=t.Label,u=t.Sprite,c=t.Component},function(t){h=t.uiManager},function(t){b=t.playerData},function(t){p=t.gEvent},function(t){m=t.callBack},function(t){f=t.ComponentList},function(t){S=t.eElement,g=t.gameDef},function(t){y=t.gameData},function(t){E=t.resManager}],execute:function(){var D,v,d,B,_,C,I,w,L,T,N,H,R,U,z,O,W,F,k,A,M;o._RF.push({},"3a37e4iAd9EMqoPHUAWeIGp","uiBattle",void 0);var P=l.ccclass,G=l.property;t("uiBattle",(D=P("uiBattle"),v=G(r),d=G(r),B=G(r),_=G(r),C=G(r),I=G(r),w=G(f),L=G(f),T=G(s),D((R=e((H=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"btnSave",R,a(e)),i(e,"btnDelete",U,a(e)),i(e,"btnSet",z,a(e)),i(e,"btnEnemyElement",O,a(e)),i(e,"btnSoulStone",W,a(e)),i(e,"btnChangeHero",F,a(e)),i(e,"ListHero",k,a(e)),i(e,"ListResult",A,a(e)),i(e,"LabelTotalDamage",M,a(e)),e._listRole=void 0,e._win=void 0,e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.btnSave.on(r.EventType.TOUCH_END,this.onBtnSave,this),this.btnDelete.on(r.EventType.TOUCH_END,this.onBtnDelete,this),this.btnSet.on(r.EventType.TOUCH_END,this.onBtnSet,this),this.btnEnemyElement.on(r.EventType.TOUCH_END,this.onBtnEnemyElement,this),this.btnSoulStone.on(r.EventType.TOUCH_END,this.onBtnSoulStone,this),this.btnChangeHero.on(r.EventType.TOUCH_END,this.onBtnChangeHero,this),p.on(p.UI_Battle_CalcEnd,this.UI_Battle_CalcEnd,this)},o.onDestroy=function(){p.off(p.UI_Battle_CalcEnd,this.UI_Battle_CalcEnd,this),this._win=null},o.init=function(t){this._win=t,b.Ins.battleData.calcResult(),this.UI_Battle_CalcEnd()},o.UI_Battle_CalcEnd=function(){var t=b.Ins.battleData;this._listRole=t.roles[0],this.ListHero.init(this._win,this._listRole),this.ListResult.init(this._win,this._listRole),this.LabelTotalDamage.node.active=this._listRole.length>0,this.LabelTotalDamage.string="队伍FC:"+t.totalFc+"\n队伍倍率:"+y.FormatNumber(t.totalRate)+"\n队伍伤害:"+y.FormatNumber(t.totalDamage),this.btnSet.getChildByName("Label").getComponent(s).string="Set "+b.Ins.battleData.currectTeam,this.refreshEnemyElement(),this.refreshSoulStone()},o.refreshEnemyElement=function(){var t=b.Ins.battleData.currectData.enemyElement;if(t==S.Size)this.btnEnemyElement.getChildByName("Sprite").active=!1,this.btnEnemyElement.getChildByName("SpriteLock").active=!0;else{var e=this.btnEnemyElement.getChildByName("Sprite").getComponent(u);e.node.active=!0,E.setSprite(e,g.bundleIcon,"elementicon"+t,this._win),this.btnEnemyElement.getChildByName("SpriteLock").active=!1}},o.refreshSoulStone=function(){var t=b.Ins.battleData.currectData.soulStone;if(0==t)this.btnSoulStone.getChildByName("Sprite").active=!1,this.btnSoulStone.getChildByName("SpriteLock").active=!0;else{var e=this.btnSoulStone.getChildByName("Sprite").getComponent(u);e.node.active=!0,E.setSprite(e,g.bundleIcon,"soulstone/"+t,this._win),this.btnSoulStone.getChildByName("SpriteLock").active=!1}},o.onBtnSave=function(){b.Ins.battleData.savedata(),h.Ins.m_tips.showFormatedTip("Save Success!")},o.onBtnDelete=function(){h.Ins.open("messageWin","Are you sure to Delete All Battle Save ? ","WARNING",new m(this.realDelete,this),null,null)},o.realDelete=function(){b.Ins.battleData.deleteData(),h.Ins.m_tips.showFormatedTip("All Battle Save deleted success")},o.onBtnSet=function(){h.Ins.open("battleTeamSwitchWin")},o.onBtnEnemyElement=function(){this.openOptionWin()},o.onBtnSoulStone=function(){this.openOptionWin()},o.openOptionWin=function(){h.Ins.open("battleOptionWin",b.Ins.battleData.currectData,(function(t){b.Ins.battleData.updateOption(t)}))},o.onBtnChangeHero=function(){h.Ins.open("battleHeroSelectWin")},e}(c)).prototype,"btnSave",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(H.prototype,"btnDelete",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(H.prototype,"btnSet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(H.prototype,"btnEnemyElement",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(H.prototype,"btnSoulStone",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(H.prototype,"btnChangeHero",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(H.prototype,"ListHero",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(H.prototype,"ListResult",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(H.prototype,"LabelTotalDamage",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=H))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattleHeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentListItem.ts","./uiHeroIcon.ts","./uiManager.ts","./TouchHold.ts"],(function(t){"use strict";var n,e,o,i,r,u,a,c,s,l,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator},function(t){a=t.ComponentListItem},function(t){c=t.uiHeroIcon,s=t.uiHeroIconData},function(t){l=t.uiManager},function(t){h=t.TouchHold}],execute:function(){var f,p,d,H,I;r._RF.push({},"4f56f2CrE9OAbmC0EZ5elW4","uiBattleHeroItem",void 0);var m=u.ccclass,_=u.property;t("uiBattleHeroItem",(f=m("uiBattleHeroItem"),p=_(c),f((I=n((H=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,o(n,"uiHeroIcon",I,i(n)),n._data=void 0,n}e(n,t);var r=n.prototype;return r.onLoad=function(){this.getComponent(h).init(this.onHold.bind(this),1,this.onTouch.bind(this))},r.refresh=function(){var t=this._data;this._index;this.uiHeroIcon.init(new s(t.hero),this._win)},r.onHold=function(){null!=this._data&&l.Ins.open("heroInfoWin",this._data.hero)},r.onTouch=function(t){l.Ins.open("battleHeroSelectWin")},n}(a)).prototype,"uiHeroIcon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=H))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattleHeroSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./heroData.ts","./playerData.ts","./uiScrollList.ts","./ComponentScrollList.ts","./skillData.ts","./Skill.ts","./gameDef.ts"],(function(e){"use strict";var t,i,n,o,r,l,s,a,u,c,f,h,g,p,v,y,_,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,s=e._decorator,a=e.Toggle,u=e.Node,c=e.Label,f=e.Component},function(e){h=e.heroFilter},function(e){g=e.playerData},function(e){p=e.uiScrollerListStyle},function(e){v=e.ComponentScrollList},function(e){y=e.playerSkillEffect},function(e){_=e.default},function(e){L=e.eSkillType}],execute:function(){var B,E,T,d,b,m,D,H,S,w,k,C,F;l._RF.push({},"d6b6fHdASlJRoyE8WESD11N","uiBattleHeroSelect",void 0);var I=s.ccclass,O=s.property;e("uiBattleHeroSelect",(B=I("uiBattleHeroSelect"),E=O(a),T=O(a),d=O(u),b=O(u),m=O(v),B((S=t((H=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"ToggleElement",S,o(t)),n(t,"ToggleBuffEffect",w,o(t)),n(t,"ButtonOk",k,o(t)),n(t,"ButtonCancel",C,o(t)),n(t,"ListHero",F,o(t)),t._heroFliter=new h,t._heroList=void 0,t._win=void 0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){this.ButtonOk.on(u.EventType.TOUCH_END,this.onBtnOk,this),this.ButtonCancel.on(u.EventType.TOUCH_END,this.onBtnCancel,this);for(var e,t=r(this.ToggleElement);!(e=t()).done;){e.value.node.on(a.EventType.TOGGLE,this.onToggleElement,this)}for(var i,n=r(this.ToggleBuffEffect);!(i=n()).done;){i.value.node.on(a.EventType.TOGGLE,this.onToggleBuffEffect,this)}},l.onDestroy=function(){this._win=null},l.init=function(e){this._win=e,this._heroList=g.Ins.heroData.getBattleHeroList(this._heroFliter),g.Ins.battleData.initSelectHeros();var t=new p;t.rowItemsCount=5,t.spacing.x=6,t.spacing.y=6,this.ListHero.init(this._win,this._heroList,t)},l.onToggleElement=function(e){this._heroFliter.element=[];for(var t,i=r(this.ToggleElement);!(t=i()).done;){var n=t.value;if(n.isChecked){var o=parseInt(n.name.substring(13));this._heroFliter.element.push(o)}}this._heroList=g.Ins.heroData.getBattleHeroList(this._heroFliter),this.ListHero.refreshData(this._heroList)},l.onToggleBuffEffect=function(e){this._heroFliter.skillEffect=[];for(var t,i=r(this.ToggleBuffEffect);!(t=i()).done;){var n=t.value;if(n.isChecked){var o=n.node.getComponentInChildren(c).string,l=new _;l.skillType=L.Buff,l.typeString=o,l.valString="";var s=new y(l);this._heroFliter.skillEffect.push(s)}}this._heroList=g.Ins.heroData.getBattleHeroList(this._heroFliter),this.ListHero.refreshData(this._heroList)},l.onBtnOk=function(){var e;g.Ins.battleData.changeSelectHero(),null==(e=this._win)||e.close()},l.onBtnCancel=function(){var e;null==(e=this._win)||e.close()},t}(f)).prototype,"ToggleElement",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(H.prototype,"ToggleBuffEffect",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(H.prototype,"ButtonOk",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(H.prototype,"ButtonCancel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(H.prototype,"ListHero",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=H))||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattleHeroSelectItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./gEvent.ts","./ComponentListItem.ts","./TouchHold.ts","./uiHeroIcon.ts"],(function(t){"use strict";var e,i,n,o,r,a,l,c,u,s,h,p,f,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Sprite,c=t.Label},function(t){u=t.uiManager},function(t){s=t.playerData},function(t){h=t.gEvent},function(t){p=t.ComponentListItem},function(t){f=t.TouchHold},function(t){d=t.uiHeroIcon,b=t.uiHeroIconData}],execute:function(){var S,H,I,v,y,g,m,_,D,L,w,B,z;r._RF.push({},"66c82CJNQdI8J7J6h7gB6po","uiBattleHeroSelectItem",void 0);var T=a.ccclass,N=a.property;t("uiBattleHeroSelectItem",(S=T("uiBattleHeroSelectItem"),H=N(f),I=N(d),v=N(l),y=N(l),g=N(c),S((D=e((_=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"touchHold",D,o(e)),n(e,"heroIcon",L,o(e)),n(e,"SpriteNotHave",w,o(e)),n(e,"SpriteSelected",B,o(e)),n(e,"Label",z,o(e)),e._data=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.touchHold.init(this.onHold.bind(this),1,this.onTouch.bind(this)),h.on(h.UI_Battle_HeroSelect,this.refreshSelect,this)},r.onDestroy=function(){h.off(h.UI_Battle_HeroSelect,this.refreshSelect,this),t.prototype.onDestroy.call(this)},r.refresh=function(){this.heroIcon.init(new b(this._data),this._win),this.refreshSelect()},r.refreshSelect=function(){var t=s.Ins.battleData.tempSelectHeros.indexOf(this._data.hero.id);this.SpriteNotHave.node.active=!this._data.active,this.Label.node.active=this.SpriteSelected.node.active=-1!=t,-1!=t&&(this.Label.string=(t+1).toString())},r.onHold=function(){u.Ins.open("heroInfoWin",this._data)},r.onTouch=function(t){s.Ins.battleData.selectHero(this._data.hero.id)},e}(p)).prototype,"touchHold",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(_.prototype,"heroIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(_.prototype,"SpriteNotHave",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(_.prototype,"SpriteSelected",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(_.prototype,"Label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattleOption.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./ObjectUtil.ts"],(function(e){"use strict";var t,n,o,i,l,r,a,u,s,c,h,p,m,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,l=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,s=e.Toggle,c=e.Sprite,h=e.Component},function(e){p=e.resManager},function(e){m=e.gameDef,f=e.eElement},function(e){d=e.default}],execute:function(){var g,C,_,y,v,B,b,S,N,E,k,O,w;r._RF.push({},"601d2ew3KVGxLIk6Vzc56N4","uiBattleOption",void 0);var I=a.ccclass,T=a.property;e("uiBattleOption",(g=I("uiBattleOption"),C=T(u),_=T(u),y=T(u),v=T(u),B=T(u),g((N=t((S=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,o(t,"NodeElement",N,i(t)),o(t,"NodeSoulStone",E,i(t)),o(t,"ButtonClearAll",k,i(t)),o(t,"ButtonOk",O,i(t)),o(t,"ButtonCancel",w,i(t)),t._win=void 0,t._team=void 0,t._okfunc=null,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.ButtonClearAll.on(u.EventType.TOUCH_END,this.onBtnClearAll,this),this.ButtonOk.on(u.EventType.TOUCH_END,this.onBtnOk,this),this.ButtonCancel.on(u.EventType.TOUCH_END,this.onBtnCancel,this)},r.onDestroy=function(){this._win=null},r.init=function(e,t){this._win=e;var n=t[0];this._team=d.deepCopy(n),t.length>1&&(this._okfunc=t[1]);for(var o,i=l(this.NodeSoulStone.getComponentsInChildren(s));!(o=i()).done;){var r=o.value,a=parseInt(r.name.substring(15));0!=a&&p.setSprite(r.node.getChildByName("Sprite").getComponent(c),m.bundleIcon,"soulstone/"+a,this._win)}this.refresh(!0)},r.refresh=function(e){this.NodeElement.getChildByName("ToggleElement"+this._team.enemyElement).getComponent(s).isChecked=!0,this.NodeSoulStone.getChildByName("ToggleSoulStone"+this._team.soulStone).getComponent(s).isChecked=!0},r.onBtnClearAll=function(){this._team.enemyElement=f.Size,this._team.soulStone=0,this.refresh()},r.onBtnOk=function(){for(var e,t,n,o=l(this.NodeElement.getComponentsInChildren(s));!(n=o()).done;){var i=n.value,r=parseInt(i.name.substring(13));i.isChecked&&(this._team.enemyElement=r)}for(var a,u=l(this.NodeSoulStone.getComponentsInChildren(s));!(a=u()).done;){var c=a.value,h=parseInt(c.name.substring(15));c.isChecked&&(this._team.soulStone=h)}null==(e=this._okfunc)||e.call(this,this._team),null==(t=this._win)||t.close()},r.onBtnCancel=function(){var e;null==(e=this._win)||e.close()},t}(h)).prototype,"NodeElement",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(S.prototype,"NodeSoulStone",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(S.prototype,"ButtonClearAll",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(S.prototype,"ButtonOk",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(S.prototype,"ButtonCancel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattleResultItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentListItem.ts","./playerData.ts"],(function(t){"use strict";var e,r,i,a,n,l,o,c,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,o=t.RichText,c=t.Label},function(t){u=t.ComponentListItem},function(t){s=t.playerData}],execute:function(){var p,h,f,b,m,y,R;n._RF.push({},"5342bWH5rpGHK37QUElmeHI","uiBattleResultItem",void 0);var I=l.ccclass,d=l.property;t("uiBattleResultItem",(p=I("uiBattleResultItem"),h=d(o),f=d(c),p((y=e((m=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,i(e,"RichTextHate",y,a(e)),i(e,"Label",R,a(e)),e._data=void 0,e}return r(e,t),e.prototype.refresh=function(){var t=this._data;this.RichTextHate.string="<color=#866A89>仇恨：\n</color><color="+(t.hate==s.Ins.battleData.maxHate?"#C92F31":"#866A89")+">"+t.hate+"</color>",this.Label.string=t.result},e}(u)).prototype,"RichTextHate",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(m.prototype,"Label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/uiComponentBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts"],(function(t){"use strict";var o,e,i,s,n,r,h,a;return{setters:[function(t){o=t.createClass},function(t){e=t.cclegacy,i=t._decorator,s=t.Prefab,n=t.instantiate,r=t.Node},function(t){h=t.resManager},function(t){a=t.gameDef}],execute:function(){var l;e._RF.push({},"16669wgu9lB6rLqweltPuww","uiComponentBase",void 0);var d=i.ccclass;i.property,t("uiComponentBase",d("uiComponentBase")(l=function(){function t(t,o,e){void 0===t&&(t=null),void 0===o&&(o=null),void 0===e&&(e=null),this.args=null,this.loadCb=null,this.handleObj=null,this._compRoot=null,this.nodeRoot=null,this.prefabPath=null,this._isDestroyed=!1;for(var i=arguments.length,s=new Array(i>3?i-3:0),n=3;n<i;n++)s[n-3]=arguments[n];this.args=s,this.loadCb=o,this.handleObj=e,this._compRoot=new r,this.setPrefabPath(),this.nodeRoot=t}var e=t.prototype;return e.release=function(){},e.constructed=function(){var t,o=this;this.isLoaded?(this._compRoot=this.nodeRoot,this.init(),this.addListener(),this.refresh(),null==(t=this.loadCb)||t.call(this.handleObj?this.handleObj:this,this.args,this)):h.asyncloadAsset(a.bundleUI,this.prefabPath,s,this).then((function(t){o.childrenCreated(t)}))},e.setPrefabPath=function(){},e.childrenCreated=function(t){var o;if(this._isDestroyed){var e;null==(e=this._compRoot)||e.destroy()}else{this.nodeRoot=n(t);var i=this._compRoot.position,s=this._compRoot.scale,r=this._compRoot.parent;if(r){var h=r.children.indexOf(this._compRoot);r.insertChild(this.nodeRoot,h),this._compRoot.removeFromParent()}this.nodeRoot.setPosition(i),this.nodeRoot.setScale(s),this._compRoot=this.nodeRoot,this.init(),this.addListener(),this.refresh(),null==(o=this.loadCb)||o.call(this.handleObj?this.handleObj:this,this.args,this)}},e.setPosition=function(t,o,e){this._compRoot.setPosition(t,o,e)},e.init=function(){},e.refresh=function(){},e.ReInit=function(){for(var t=arguments.length,o=new Array(t),e=0;e<t;e++)o[e]=arguments[e];this.args=o,this.isLoaded&&this.refresh()},e.addListener=function(){},e.removeListener=function(){},e.update=function(t){this.isLoaded},e.destroy=function(){var t;this._isDestroyed=!0,this.isLoaded&&(this.removeListener(),null==(t=this._compRoot)||t.destroy(),this.loadCb=null,this.handleObj=null,this.release())},o(t,[{key:"compRoot",get:function(){return this._compRoot}},{key:"isLoaded",get:function(){return null!=this.nodeRoot}},{key:"isValid",get:function(){return this._compRoot.isValid}}]),t}())||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/uiHero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./gEvent.ts","./uiScrollList.ts","./ComponentScrollList.ts","./callBack.ts"],(function(t){"use strict";var e,n,i,o,r,l,s,a,u,c,h,p,f,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,s=t.Node,a=t.Component},function(t){u=t.uiManager},function(t){c=t.playerData},function(t){h=t.gEvent},function(t){p=t.uiScrollerListStyle},function(t){f=t.ComponentScrollList},function(t){_=t.callBack}],execute:function(){var H,d,D,v,b,y,g,S,I,m,w;r._RF.push({},"35e1fcxRpdK6YIgmUdgfzKY","uiHero",void 0);var U=l.ccclass,F=l.property;t("uiHero",(H=U("uiHero"),d=F(s),D=F(s),v=F(s),b=F(f),H((S=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"btnSave",S,o(e)),i(e,"btnDelete",I,o(e)),i(e,"btnFilter",m,o(e)),i(e,"listHero",w,o(e)),e._listHero=void 0,e._win=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.btnSave.on(s.EventType.TOUCH_END,this.onBtnSave,this),this.btnDelete.on(s.EventType.TOUCH_END,this.onBtnDelete,this),this.btnFilter.on(s.EventType.TOUCH_END,this.onBtnFilter,this),h.on(h.Hero_Update,this.onHero_Update,this),h.on(h.UI_Hero_FilterChange,this.onHero_Update,this)},r.onDestroy=function(){h.off(h.Hero_Update,this.onHero_Update,this),h.off(h.UI_Hero_FilterChange,this.onHero_Update,this),this._win=null},r.init=function(t){this._win=t,this._listHero=c.Ins.heroData.getSortedList(!0);var e=new p;this.listHero.init(this._win,this._listHero,e)},r.onBtnSave=function(){c.Ins.heroData.savedata(),u.Ins.m_tips.showFormatedTip("Save Success!")},r.onBtnDelete=function(){u.Ins.open("messageWin","Are you sure to Delete All Hero Save?","WARNING",new _(this.realDelete,this),null,null)},r.realDelete=function(){c.Ins.heroData.deleteData(),u.Ins.m_tips.showFormatedTip("All Hero Save deleted success")},r.onHero_Update=function(t){this._listHero=c.Ins.heroData.getSortedList(!0),this.listHero.refreshData(this._listHero)},r.onBtnFilter=function(){u.Ins.open("heroFilterWin",c.Ins.heroData.filter,(function(t){c.Ins.heroData.filter=t}))},e}(a)).prototype,"btnSave",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(g.prototype,"btnDelete",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(g.prototype,"btnFilter",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(g.prototype,"listHero",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiHeroFilter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectUtil.ts","./gEvent.ts","./ComponentList.ts"],(function(e){"use strict";var t,i,n,r,l,o,s,f,a,u,h,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,f=e.Toggle,a=e.Node,u=e.Component},function(e){h=e.default},function(e){c=e.gEvent},function(e){g=e.ComponentList}],execute:function(){var p,_,v,k,b,d,E,C,T,m,y,w,F,I,S,B,H,O,U;o._RF.push({},"fc7cb58ncdMFrZoW4fDMwMa","uiHeroFilter",void 0);var z=s.ccclass,L=s.property;e("uiHeroFilter",(p=z("uiHeroFilter"),_=L(f),v=L(f),k=L(f),b=L(f),d=L(g),E=L(a),C=L(a),T=L(a),p((w=t((y=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(t,"ToggleStar",w,r(t)),n(t,"ToggleElement",F,r(t)),n(t,"ToggleType",I,r(t)),n(t,"ToggleSeason",S,r(t)),n(t,"ListEffect",B,r(t)),n(t,"ButtonClearAll",H,r(t)),n(t,"ButtonOk",O,r(t)),n(t,"ButtonCancel",U,r(t)),t._win=void 0,t._oriFilter=void 0,t._filter=void 0,t._okfunc=null,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.ButtonClearAll.on(a.EventType.TOUCH_END,this.onBtnClearAll,this),this.ButtonOk.on(a.EventType.TOUCH_END,this.onBtnOk,this),this.ButtonCancel.on(a.EventType.TOUCH_END,this.onBtnCancel,this),c.on(c.UI_Hero_FilterSkillEffectChange,this.UI_Hero_FilterSkillEffectChange,this)},o.onDestroy=function(){c.off(c.UI_Hero_FilterSkillEffectChange,this.UI_Hero_FilterSkillEffectChange,this),this._win=null},o.init=function(e,t){this._win=e,this._oriFilter=t[0],this._filter=h.deepCopy(this._oriFilter),t.length>1&&(this._okfunc=t[1]),this.refresh()},o.refresh=function(){for(var e,t=l(this.ToggleStar);!(e=t()).done;){var i=e.value,n=parseInt(i.name.substring(10));i.isChecked=-1!=this._filter.star.indexOf(n)}for(var r,o=l(this.ToggleElement);!(r=o()).done;){var s=r.value,f=parseInt(s.name.substring(13));s.isChecked=-1!=this._filter.element.indexOf(f)}for(var a,u=l(this.ToggleType);!(a=u()).done;){var h=a.value,c=parseInt(h.name.substring(10));h.isChecked=-1!=this._filter.weaponType.indexOf(c)}for(var g,p=l(this.ToggleSeason);!(g=p()).done;){var _=g.value,v=parseInt(_.name.substring(12));_.isChecked=-1!=this._filter.season.indexOf(v)}this.UI_Hero_FilterSkillEffectChange()},o.UI_Hero_FilterSkillEffectChange=function(){(0==this._filter.skillEffect.length||this._filter.skillEffect.length<3&&null!=this._filter.skillEffect[this._filter.skillEffect.length-1])&&this._filter.skillEffect.push(void 0),this.refreshSkillEffect()},o.refreshSkillEffect=function(){for(var e=[],t=0;t<this._filter.skillEffect.length;++t)e.push(this._filter);this.ListEffect.init(this._win,e)},o.onBtnClearAll=function(){this._filter.star=[],this._filter.element=[],this._filter.weaponType=[],this._filter.season=[],this._filter.skillEffect=[void 0],this.refresh()},o.onBtnOk=function(){var e,t;this._filter.star=[];for(var i,n=l(this.ToggleStar);!(i=n()).done;){var r=i.value,o=parseInt(r.name.substring(10));r.isChecked&&this._filter.star.push(o)}this._filter.element=[];for(var s,f=l(this.ToggleElement);!(s=f()).done;){var a=s.value,u=parseInt(a.name.substring(13));a.isChecked&&this._filter.element.push(u)}this._filter.weaponType=[];for(var h,g=l(this.ToggleType);!(h=g()).done;){var p=h.value,_=parseInt(p.name.substring(10));p.isChecked&&this._filter.weaponType.push(_)}this._filter.season=[];for(var v,k=l(this.ToggleSeason);!(v=k()).done;){var b=v.value,d=parseInt(b.name.substring(12));b.isChecked&&this._filter.season.push(d)}null==(e=this._okfunc)||e.call(this,this._filter),this._filter.skillEffect.length>0&&!this._filter.skillEffect[this._filter.skillEffect.length-1]&&this._filter.skillEffect.splice(this._filter.skillEffect.length-1,1),c.emit(c.UI_Hero_FilterChange),null==(t=this._win)||t.close()},o.onBtnCancel=function(){var e;null==(e=this._win)||e.close()},t}(u)).prototype,"ToggleStar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(y.prototype,"ToggleElement",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(y.prototype,"ToggleType",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(y.prototype,"ToggleSeason",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(y.prototype,"ListEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(y.prototype,"ButtonClearAll",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(y.prototype,"ButtonOk",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(y.prototype,"ButtonCancel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiHeroIcon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./uiAttr.ts"],(function(e){"use strict";var i,t,n,r,o,a,u,l,c,s,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Sprite,l=e.Component},function(e){c=e.resManager},function(e){s=e.gameDef},function(e){p=e.uiAttr}],execute:function(){var h,m,g,f,b,y,d,w,v,_,I,S,z,A,D,F,T,H,k;o._RF.push({},"99f858h51BDgbESN7kruO/f","uiHeroIcon",void 0);var E=a.ccclass,M=a.property;e("uiHeroIconData",(function(e,i){void 0===i&&(i=void 0),this.hero=void 0,this.attr=void 0,this.hero=e,this.attr=i})),e("uiHeroIcon",(h=E("uiHeroIcon"),m=M(u),g=M(u),f=M(u),b=M(u),y=M(u),d=M(u),w=M(u),v=M(p),h((S=i((I=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"imgFace",S,r(i)),n(i,"imgFrame",z,r(i)),n(i,"imgElementIcon",A,r(i)),n(i,"imgType",D,r(i)),n(i,"imgAwake",F,r(i)),n(i,"imgSeason",T,r(i)),n(i,"imgSpWeapon",H,r(i)),n(i,"uiAttr",k,r(i)),i._data=void 0,i._win=void 0,i}t(i,e);var o=i.prototype;return o.onDestroy=function(){this._win=null},o.init=function(e,i){var t=this._data=e;this._win=i,null!=this._data?(this.node.active=!0,c.setSprite(this.imgFace,s.bundleIcon,"chara/"+t.hero.hero.image,this._win),c.setSprite(this.imgFrame,s.bundleIcon,"element"+t.hero.hero.eleType,this._win),c.setSprite(this.imgElementIcon,s.bundleIcon,"elementicon"+t.hero.hero.eleType,this._win),c.setSprite(this.imgType,s.bundleIcon,"weapontype"+t.hero.hero.weaponType,this._win),this.imgAwake.node.active=!1,c.setSprite(this.imgSeason,s.bundleIcon,"seasonbig"+t.hero.hero.seasonType,this._win),this.imgSpWeapon.node.active=t.hero.hero.id>=1e4,this.uiAttr.init(i,t.attr)):this.node.active=!1},i}(l)).prototype,"imgFace",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(I.prototype,"imgFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(I.prototype,"imgElementIcon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(I.prototype,"imgType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(I.prototype,"imgAwake",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(I.prototype,"imgSeason",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(I.prototype,"imgSpWeapon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(I.prototype,"uiAttr",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=I))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiHeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./uiHeroIcon.ts","./ComponentListItem.ts","./ComponentList.ts","./uiManager.ts","./TouchHold.ts"],(function(t){"use strict";var n,i,e,o,r,a,u,c,s,l,h,p,f,b,m,I;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Node,c=t.Sprite},function(t){s=t.resManager},function(t){l=t.gameDef},function(t){h=t.uiHeroIcon,p=t.uiHeroIconData},function(t){f=t.ComponentListItem},function(t){b=t.ComponentList},function(t){m=t.uiManager},function(t){I=t.TouchHold}],execute:function(){var d,g,_,v,y,L,S,k,w,H,D,T,U,C,z,B,E;r._RF.push({},"ce80dhDPRRHPqAW5stqiUCh","uiHeroItem",void 0);var A=a.ccclass,M=a.property;t("uiHeroItem",(d=A("uiHeroItem"),g=M(u),_=M(u),v=M(u),y=M(c),L=M(u),S=M(h),k=M(b),d((D=n((H=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,e(n,"btnLock",D,o(n)),e(n,"btnUnlock",T,o(n)),e(n,"btnSlot",U,o(n)),e(n,"btnSlotImg",C,o(n)),e(n,"btnStatus",z,o(n)),e(n,"heroIcon",B,o(n)),e(n,"ListAttr",E,o(n)),n._data=void 0,n}i(n,t);var r=n.prototype;return r.onLoad=function(){this.btnLock.on(u.EventType.TOUCH_END,this.onBtnLock,this),this.btnUnlock.on(u.EventType.TOUCH_END,this.onBtnUnlock,this),this.btnSlot.on(u.EventType.TOUCH_END,this.onBtnSlot,this),this.btnStatus.on(u.EventType.TOUCH_END,this.onBtnStatus,this),this.heroIcon.getComponent(I).init(this.openInfo.bind(this),1)},r.refresh=function(){var t=this._data;this.heroIcon.init(new p(t),this._win),this.btnLock.active=t.active,this.btnUnlock.active=!t.active,s.setSprite(this.btnSlotImg,l.bundleIcon,"exc"+t.awake,this._win),this.ListAttr.init(this._win,t.status)},r.onBtnLock=function(t){this._data&&(this._data.active=!1)},r.onBtnUnlock=function(t){this._data&&(this._data.active=!0)},r.onBtnSlot=function(t){this._data&&this._data.switchAwake()},r.onBtnStatus=function(t){this.openInfo()},r.openInfo=function(){m.Ins.open("heroInfoWin",this._data)},n}(f)).prototype,"btnLock",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(H.prototype,"btnUnlock",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(H.prototype,"btnSlot",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(H.prototype,"btnSlotImg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(H.prototype,"btnStatus",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(H.prototype,"heroIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(H.prototype,"ListAttr",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=H))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiHeroSkillFilter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Configs.ts","./Skill.ts","./uiManager.ts","./playerData.ts","./gameDef.ts","./gEvent.ts"],(function(e){"use strict";var t,i,l,n,o,a,r,g,s,u,f,h,c,d,T,p,k,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,r=e._decorator,g=e.Toggle,s=e.Node,u=e.Label,f=e.Sprite,h=e.Component},function(e){c=e.Configs},function(e){d=e.default},function(e){T=e.uiManager},function(e){p=e.playerData},function(e){k=e.eSkillType},function(e){v=e.gEvent}],execute:function(){var y,C,B,b,N,m,S,w,E,_,V,H,L,D,O,z,x,F,I;a._RF.push({},"986c8HAftNOhZULffAE8mXp","uiHeroSkillFilter",void 0);var A=r.ccclass,U=r.property;e("uiHeroSkillFilter",(y=A("uiHeroSkillFilter"),C=U(g),B=U(s),b=U(s),N=U(s),m=U(s),S=U(s),w=U(s),E=U(s),y((H=t((V=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,l(t,"ToggleSkillType",H,n(t)),l(t,"NodeTarget",L,n(t)),l(t,"NodeHealType",D,n(t)),l(t,"NodeBuffEffect",O,n(t)),l(t,"NodeStateBuff",z,n(t)),l(t,"NodeValue",x,n(t)),l(t,"ButtonOk",F,n(t)),l(t,"ButtonCancel",I,n(t)),t.ToggleTarget=[],t.ToggleHealType=[],t.ToggleBuffEffect=[],t.ToggleStateBuff=[],t.ToggleValue=[],t._win=void 0,t._skill=void 0,t._okfunc=null,t}i(t,e);var a=t.prototype;return a.onLoad=function(){for(var e,t=o(this.ToggleSkillType);!(e=t()).done;){e.value.node.on(g.EventType.TOGGLE,this.onToggleSkillType,this)}this.ButtonOk.on(s.EventType.TOUCH_END,this.onBtnOk,this),this.ButtonCancel.on(s.EventType.TOUCH_END,this.onBtnCancel,this)},a.onDestroy=function(){this._win=null},a.init=function(e,t){this._win=e,this._skill=t[0],t.length>1&&(this._okfunc=t[1]);for(var i=0;;++i){var l=this.NodeTarget.getChildByName("ToggleTarget"+i);if(!l)break;this.ToggleTarget.push(l.getComponent(g))}for(var n=0;;++n){var o=this.NodeHealType.getChildByName("ToggleHealType"+n);if(!o)break;this.ToggleHealType.push(o.getComponent(g))}for(var a=0;;++a){var r=this.NodeBuffEffect.getChildByPath("NodeBuffEffect0/ToggleBuffEffect"+a);if(!r)break;this.ToggleBuffEffect.push(r.getComponent(g))}for(var s=0;;++s){var u=this.NodeStateBuff.getChildByName("ToggleStateBuff"+s);if(!u)break;this.ToggleStateBuff.push(u.getComponent(g))}for(var f=0;;++f){var h=this.NodeValue.getChildByName("ToggleValue"+f);if(!h)break;this.ToggleValue.push(h.getComponent(g))}this.refresh()},a.refresh=function(){var e,t=this;switch(this._skill||(this._skill=c.SkillCfg.values().next().value),this.ToggleSkillType[this._skill.skillType].isChecked=!0,this.onToggleSkillType(this.ToggleSkillType[this._skill.skillType]),this._skill.skillType){case k.Damage:if(this.ToggleTarget["敌单"==this._skill.targetString?0:1].isChecked=!0,!(e=this.ToggleValue.find((function(e,i,l){return e.node.getChildByName("Label").getComponent(u).string==t._skill.valString}))))throw new Error("!tempTog");e.isChecked=!0;break;case k.Heal:if(!(e=this.ToggleHealType.find((function(e,i,l){return e.node.getChildByName("Label").getComponent(u).string==t._skill.typeString}))))throw new Error("!tempTog");if(e.isChecked=!0,!(e=this.ToggleValue.find((function(e,i,l){return e.node.getChildByName("Label").getComponent(u).string==t._skill.valString}))))throw new Error("!tempTog");e.isChecked=!0;break;case k.Buff:if(!(e=this.ToggleBuffEffect.find((function(e,i,l){return e.node.getChildByName("Label").getComponent(u).string==t._skill.typeString}))))throw new Error("!tempTog");e.isChecked=!0,(e=this.ToggleValue.find((function(e,i,l){var n=e.node.getChildByName("Label").getComponent(u).string;return n==t._skill.valString||"无"==n&&""==t._skill.valString})))||(e=this.ToggleValue[this.ToggleValue.length-2]),e.isChecked=!0;break;case k.StateBuff:if(!(e=this.ToggleStateBuff.find((function(e,i,l){return e.node.getChildByName("Label").getComponent(u).string==t._skill.typeString}))))throw new Error("!tempTog");e.isChecked=!0;break;default:throw new Error("!skillType :"+this._skill.skillType)}},a.setToggleActive=function(e,t){e.interactable=t;for(var i,l=o(e.node.getComponentsInChildren(f));!(i=l()).done;){i.value.grayscale=!t}},a.onToggleSkillType=function(e){if(e.isChecked){var t=this.ToggleSkillType.indexOf(e);if(-1==t)throw new Error;switch(t){case k.Damage:this.NodeValue.active=this.NodeTarget.active=!0,this.NodeStateBuff.active=this.NodeBuffEffect.active=this.NodeHealType.active=!1,this.setToggleActive(this.ToggleValue[this.ToggleValue.length-1],!1),this.ToggleValue[this.ToggleValue.length-1].isChecked&&(this.ToggleValue[this.ToggleValue.length-2].isChecked=!0);break;case k.Heal:this.NodeValue.active=this.NodeHealType.active=!0,this.NodeStateBuff.active=this.NodeBuffEffect.active=this.NodeTarget.active=!1,this.setToggleActive(this.ToggleValue[this.ToggleValue.length-1],!1),this.ToggleValue[this.ToggleValue.length-1].isChecked&&(this.ToggleValue[this.ToggleValue.length-2].isChecked=!0);break;case k.Buff:this.NodeValue.active=this.NodeBuffEffect.active=!0,this.NodeStateBuff.active=this.NodeHealType.active=this.NodeTarget.active=!1,this.setToggleActive(this.ToggleValue[this.ToggleValue.length-1],!0),this.ToggleValue[this.ToggleValue.length-1].node.active=!0;break;case k.StateBuff:this.NodeStateBuff.active=!0,this.NodeValue.active=this.NodeBuffEffect.active=this.NodeHealType.active=this.NodeTarget.active=!1;break;default:throw new Error("!index :"+t)}}},a.onBtnOk=function(){var e,t,i,l,n,o,a,r=this.ToggleSkillType.findIndex((function(e,t,i){return e.isChecked}));if(-1==r)throw new Error("!index :-1");switch(this.ToggleTarget.findIndex((function(e,t,i){return e.isChecked}))){case 0:a="敌单";break;case 1:a="敌全";break;default:throw new Error("!targetIndex: -1")}var g,s,f=null==(e=this.ToggleHealType.find((function(e,t,i){return e.isChecked})))?void 0:e.node.getChildByName("Label").getComponent(u).string,h=null==(t=this.ToggleBuffEffect.find((function(e,t,i){return e.isChecked})))?void 0:t.node.getChildByName("Label").getComponent(u).string,c=null==(i=this.ToggleStateBuff.find((function(e,t,i){return e.isChecked})))?void 0:i.node.getChildByName("Label").getComponent(u).string,y=null==(l=this.ToggleValue.find((function(e,t,i){return e.isChecked})))?void 0:l.node.getChildByName("Label").getComponent(u).string;switch(r){case k.Damage:g=a+",物伤,"+y+",1";break;case k.Heal:g=","+f+","+y;break;case k.Buff:"无"==y?((s=new d).skillType=k.Buff,s.typeString=h,s.valString=""):g=","+h+","+y+",1T";break;case k.StateBuff:g=","+c+",1T";break;default:throw new Error("!index :"+r)}if(s||(s=p.Ins.skillData.getCfg(g)),!s)return console.log("!skillcfg :"+g),void T.Ins.m_tips.showFormatedTip("暂无此属性词条，请选择其他属性词条");null==(n=this._okfunc)||n.call(this,s),v.emit(v.UI_Weapon_FilterChange),null==(o=this._win)||o.close()},a.onBtnCancel=function(){var e;null==(e=this._win)||e.close()},t}(h)).prototype,"ToggleSkillType",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(V.prototype,"NodeTarget",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(V.prototype,"NodeHealType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(V.prototype,"NodeBuffEffect",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(V.prototype,"NodeStateBuff",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(V.prototype,"NodeValue",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(V.prototype,"ButtonOk",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(V.prototype,"ButtonCancel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=V))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiHeroSkillFiltertItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./skillData.ts","./gEvent.ts","./ComponentListItem.ts"],(function(t){"use strict";var e,i,n,o,l,r,a,s,u,c,f,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,a=t.Label,s=t.Node},function(t){u=t.uiManager},function(t){c=t.skillData,f=t.playerSkillEffect},function(t){d=t.gEvent},function(t){h=t.ComponentListItem}],execute:function(){var v,p,y,m,_,B,b,g,k,E,L;l._RF.push({},"55b34FdzJxCn4safgLW3nm9","uiHeroSkillFiltertItem",void 0);var F=r.ccclass,I=r.property;t("uiHeroSkillFiltertItem",(v=F("uiHeroSkillFiltertItem"),p=I(a),y=I(s),m=I(s),_=I(s),v((g=e((b=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,n(e,"Label",g,o(e)),n(e,"ButtonAdd",k,o(e)),n(e,"ButtonModify",E,o(e)),n(e,"ButtonRemove",L,o(e)),e._data=void 0,e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.ButtonAdd.on(s.EventType.TOUCH_END,this.onBtnModify,this),this.ButtonModify.on(s.EventType.TOUCH_END,this.onBtnModify,this),this.ButtonRemove.on(s.EventType.TOUCH_END,this.onBtnRemove,this)},l.tryRefresh=function(){if(null!=this._data){if(this.node.active=!0,null==this._data.skillEffect[this._index])return this.ButtonRemove.active=this.ButtonModify.active=this.Label.node.active=!1,void(this.ButtonAdd.active=!0);this.ButtonRemove.active=this.ButtonModify.active=this.Label.node.active=!0,this.ButtonAdd.active=!1,this.refresh()}else this.node.active=!1},l.refresh=function(){this.Label.string=c.getSkillInfoAsFilter(this._data.skillEffect[this._index].cfg)},l.onBtnModify=function(){var t,e=this;u.Ins.open("heroSkillFilterWin",null==(t=this._data.skillEffect[this._index])?void 0:t.cfg,(function(t){e._data.skillEffect[e._index]=new f(t),d.emit(d.UI_Hero_FilterSkillEffectChange)}))},l.onBtnRemove=function(){this._data.skillEffect.splice(this._index,1),d.emit(d.UI_Hero_FilterSkillEffectChange)},e}(h)).prototype,"Label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(b.prototype,"ButtonAdd",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(b.prototype,"ButtonModify",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(b.prototype,"ButtonRemove",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=b))||B));l._RF.pop()}}}));

System.register("chunks:///_virtual/uiList.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s,n,e,h,o;return{setters:[function(t){i=t.createClass},function(t){s=t.cclegacy,n=t.UITransform,e=t.Layout,h=t.Size,o=t.Vec2}],execute:function(){s._RF.push({},"3b705hK4ZNBGpJI4iy/Vk4A","uiList",void 0);t("uiList",function(){function t(t,i,s,n,e){void 0===e&&(e=null),this.handleObj=null,this._scrollView=null,this._scrollViewUITrans=null,this._content=null,this._contentUITrans=null,this._layout=void 0,this._uiCompBase=null,this._listdata=null,this._dataLength=void 0,this._listItems=[],this._ns=void 0,this._nodeOriSize=void 0,this._nodeScale=void 0,this._nodeAnchor=void 0,this.handleObj=t,this._uiCompBase=i,this._listdata=s,this._content=n,this._scrollView=e,this.constructed()}var s=t.prototype;return s.constructed=function(){this.init()},s.release=function(){},s.destroy=function(){this._uiCompBase=null,this._listdata=null,this._listItems.forEach((function(t){t.destroy()})),this._listItems=[],this._scrollView=null,this._scrollViewUITrans=null,this._content=null,this._contentUITrans=null,this.handleObj=null},s.init=function(){var t;this._scrollView&&(this._scrollViewUITrans=this._scrollView.getComponent(n)),this._contentUITrans=this._content.getComponent(n),this._layout=this._content.getComponent(e);var i=this._content.children[0];this._nodeScale=i.scale;var s=i.getComponent(n);this._ns=new h(s.contentSize),this._nodeOriSize=new h(s.contentSize),this._nodeAnchor=s.anchorPoint,this._ns.x*=i.scale.x,this._ns.y*=i.scale.y;for(var o=0;o<this._listdata.length||o<this._content.children.length;++o){var l=this.createItem(o);this._listItems.push(l)}this._dataLength=this._listdata.length,null==(t=this._layout)||t.updateLayout(!0),this.scrollerToIndex(0,0)},s.createItem=function(t){var i=null==this._content.children[t],s=new this._uiCompBase(this._content.children[t],null,this.handleObj,this._listdata[t],t);(s.compRoot.setScale(this._nodeScale),i)&&(this._content.addChild(s.compRoot),s.compRoot.getComponent(n)||s.compRoot.addComponent(n).setContentSize(this._nodeOriSize));return s},s.scrollerToCenterIndex=function(t,i,s){if(void 0===i&&(i=0),void 0===s&&(s=!0),this._scrollView){var n=this.getItemCenter(t);this.scrollerToCenterPos(n,i,s)}},s.scrollerToCenterPos=function(t,i,s){if(void 0===i&&(i=0),void 0===s&&(s=!0),this._scrollView){t.x+=this._contentUITrans.width/2-this._scrollViewUITrans.width/2,t.y+=this._contentUITrans.height/2-this._scrollViewUITrans.height/2;var n=new o;n.x=t.x/(this._contentUITrans.width-this._scrollViewUITrans.width),n.y=t.y/(this._contentUITrans.height-this._scrollViewUITrans.height),this._scrollView.scrollTo(n,i,s)}},s.scrollerToIndex=function(t,i,s){if(void 0===i&&(i=0),void 0===s&&(s=!0),this._scrollView&&this._layout){var n=this._listItems[t].compRoot.getPosition();n.x+=this._contentUITrans.width/2,n.y+=this._contentUITrans.height/2;var h=new o;this._scrollView.horizontal?this._layout.horizontalDirection==e.HorizontalDirection.RIGHT_TO_LEFT?h.x=(n.x+this._ns.width*(1-this._nodeAnchor.x)-this._scrollViewUITrans.width)/(this._contentUITrans.width-this._scrollViewUITrans.width):h.x=(n.x-this._ns.width*this._nodeAnchor.x)/(this._contentUITrans.width-this._scrollViewUITrans.width):h.x=0,this._scrollView.vertical?this._layout.verticalDirection==e.VerticalDirection.BOTTOM_TO_TOP?h.y=(n.y-this._ns.height*this._nodeAnchor.y)/(this._contentUITrans.height-this._scrollViewUITrans.height):h.y=(n.y+this._ns.height*(1-this._nodeAnchor.y)-this._scrollViewUITrans.height)/(this._contentUITrans.height-this._scrollViewUITrans.height):h.y=0,this._scrollView.scrollTo(h,i,s)}},s.scrollerToPage=function(t,i,s){if(void 0===i&&(i=0),void 0===s&&(s=!0),this._scrollView&&this._layout){var n=new o(t.x*(this._scrollView.horizontal?this._scrollViewUITrans.width:0),t.y*(this._scrollView.vertical?this._scrollViewUITrans.height:0));this.scrollerToPos(n,i,s)}},s.scrollerToPos=function(t,i,s){if(void 0===i&&(i=0),void 0===s&&(s=!0),this._scrollView&&this._layout){var n=new o;this._scrollView.horizontal?this._layout.horizontalDirection==e.HorizontalDirection.RIGHT_TO_LEFT?n.x=(this._contentUITrans.width-t.x-this._scrollViewUITrans.width)/(this._contentUITrans.width-this._scrollViewUITrans.width):n.x=t.x/(this._contentUITrans.width-this._scrollViewUITrans.width):n.x=0,this._scrollView.vertical?this._layout.verticalDirection==e.VerticalDirection.BOTTOM_TO_TOP?n.y=t.y/(this._contentUITrans.height-this._scrollViewUITrans.height):n.y=(this._contentUITrans.height-t.y-this._scrollViewUITrans.height)/(this._contentUITrans.height-this._scrollViewUITrans.height):n.y=0,this._scrollView.scrollTo(n,i,s)}},s.getItemCenter=function(t){if(0==this._listItems.length)return o.ZERO;var i=this._listItems[t].compRoot.position;return new o(i.x+(.5-this._nodeAnchor.x)*this._ns.width,i.y+(.5-this._nodeAnchor.y)*this._ns.height)},s.refreshAll=function(){for(var t=0;t<this._listItems.length;++t)this.refreshItem(t)},s.update=function(t){},s.refreshItem=function(t){var i;null==t&&(t=this._listdata.length-1),null==(i=this._listItems[t])||i.ReInit(this._listdata[t],t)},s.refreshList=function(){var t;this.refreshAll();for(var i=0;i<this._content.children.length;++i)this.refreshItem(i);if(this._listdata.length<=this._dataLength)this._dataLength=this._listdata.length;else{var s;this._scrollView&&this._dataLength>0&&(s=new o(this._content.position.x,this._content.position.y).add(this.getItemCenter(0)));for(var n=this._content.children.length;n<this._listdata.length;++n){var e=this.createItem(n);this._listItems.push(e)}null==(t=this._layout)||t.updateLayout(!0),this._scrollView&&this._dataLength>0&&(s=s.subtract(this.getItemCenter(0)),this._content.setPosition(s.x,s.y)),this._dataLength=this._listdata.length}},s.refreshData=function(t){this._listdata=t,this.refreshList()},i(t,[{key:"isValid",get:function(){var t;return null==(t=this.handleObj)?void 0:t.isValid}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/uiListBase.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9b83cFi06JFWIFQPDHm5O8L","uiListBase",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameDef.ts","./tips.ts","./uiBase.ts","./Singleton.ts","./gEvent.ts","./resManager.ts"],(function(e){"use strict";var n,t,i,o,a,s,r,u,l,h,f,c,m,d,p,_,g,C,v,I,y,L,M,w;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass,i=e.asyncToGenerator},function(e){o=e.cclegacy,a=e._decorator,s=e.Camera,r=e.Label,u=e.Node,l=e.UITransform,h=e.Widget,f=e.js,c=e.assetManager,m=e.log,d=e.Vec3,p=e.instantiate,_=e.UIOpacity,g=e.Sprite,C=e.Prefab},function(e){v=e.gameDef},function(e){I=e.ui_tips},function(e){y=e.eUILayer},function(e){L=e.Singleton},function(e){M=e.gEvent},function(e){w=e.resManager}],execute:function(){o._RF.push({},"546f0XSC/VNg6eQRoCucjU0","uiManager",void 0);a.ccclass,a.property,e("uiManager",function(e){function o(){var n;return(n=e.call(this)||this).m_uiRoot=null,n._uiCamera=null,n.m_arrLayer=null,n.m_mapWin=null,n.m_uiMask=null,n.m_uiEffectMask=null,n.m_tips=null,n._uiCanvas=null,n._label=null,n}n(o,e);var a=o.prototype;return a.init=function(e){this.m_uiRoot=e.getChildByPath("uiCanvas/uiContext"),this._uiCamera=e.getChildByPath("uiCanvas/uiCamera").getComponent(s),this.m_mapWin=new Map,this._uiCanvas=e.getChildByPath("uiCanvas"),this._label=e.getChildByPath("uiCanvas/Label").getComponent(r),this.addListener(),this.initUILayer()},a.addListener=function(){M.on(M.UI_Close,this.onCloseFromWin,this),M.on(M.UI_ShowMask,this.showMask,this),M.on(M.UI_Log,this.UI_Log,this)},a.removeListener=function(){M.off(M.UI_Close,this.onCloseFromWin,this),M.off(M.UI_ShowMask,this.showMask,this),M.off(M.UI_Log,this.UI_Log,this)},a.update=function(e){var n;null==(n=this.m_mapWin)||n.forEach((function(n){n.update(e)}))},a.initUILayer=function(){this.m_arrLayer=new Array;for(var e=0;e<y.eUIL_Count;e++){var n=new u(e.toString()),t=n.addComponent(l),i=n.addComponent(h);t.contentSize=this.m_uiRoot.getComponent(l).contentSize,i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.top=i.bottom=i.left=i.right=0,this.m_uiRoot.addChild(n),this.m_arrLayer.push(n)}},a.getLayer=function(e){return void 0===e&&(e=y.eUIL_Tip),this.m_arrLayer[e]},a.createMask=function(){var e=i(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.asyncloadAsset(v.bundleUI,"tips/prefabs/uiMask",C);case 2:n=e.sent,this.m_uiMask=p(n),this.m_uiMask.getComponent(g).enabled=!1,this.m_uiEffectMask=p(n),this.m_uiEffectMask.getComponent(g).enabled=!1,this.m_arrLayer[y.eUIL_Mask].addChild(this.m_uiMask),this.m_arrLayer[y.eUIL_Mask].addChild(this.m_uiEffectMask),this.m_uiEffectMask.active=!1,this.m_uiMask.active=!1,this.m_tips=new I(null,null,this),this.m_arrLayer[y.eUIL_Tip].addChild(this.m_tips.compRoot);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.showUIEffectMask=function(e){this.m_uiEffectMask&&(this.m_uiEffectMask.active=e)},a.showMask=function(e){this.m_uiMask&&(this.m_uiMask.active=e)},a.UI_Log=function(e){this._label.string=e},a.has=function(e){return this.m_mapWin.has(e)},a.open=function(e){if(console.log("openwin="+e),this.m_mapWin.has(e))console.warn(e+" is already open!");else{this.showUIEffectMask(!0);for(var n=f.getClassByName(e),t=new n,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];t.setArg(o),this.m_mapWin.set(e,t),this.loadPrefab(t.uiInfo.bundleName,t.uiInfo.prefabPath,this.onLoadAsset,this,t)}},a.forceOpen=function(e){console.log("openwin="+e);for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];if(this.m_mapWin.has(e)){var o=this.m_mapWin.get(e);return o.setArg(t),o.reInit(),o.nodeRoot.setSiblingIndex(o.nodeRoot.parent.children.length-1),o}this.showUIEffectMask(!0);var a=f.getClassByName(e),s=new a;s.setArg(t),this.m_mapWin.set(e,s),this.loadPrefab(s.uiInfo.bundleName,s.uiInfo.prefabPath,this.onLoadAsset,this,s)},a.loadPrefab=function(e,n,t,i){void 0===t&&(t=null),void 0===i&&(i=null);for(var o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];var r=c.getBundle(e);if(r&&r.get(n)){r.get(n);t.call(i,r.get(n),[].concat(a))}else w.getBundle(e).then((function(e){var o,s=e.get(n);null!=s?null==(o=t)||o.call(i,s,[].concat(a)):e.load(n,(function(e,n){e?m("Error loadPrefab ["+e+"]"):t.call(i,n,[].concat(a))}))}))},a.openMouseTip=function(e,n,t){var i,a=new d;e.getWorldPosition(a);for(var s=this.m_arrLayer[y.eUIL_MainHUD].getComponent(l).convertToNodeSpaceAR(a),r=[s.x+t.x,s.y+t.y],u=arguments.length,h=new Array(u>3?u-3:0),f=3;f<u;f++)h[f-3]=arguments[f];(i=o.Ins).open.apply(i,[n,r].concat(h))},a.onLoadAsset=function(e,n){var t=n[0];e.addRef(),t.nodeRoot=p(e),this.m_arrLayer[t.uiInfo.uiLayer].addChild(t.nodeRoot),t.childrenCreated(),t.nodeRoot.active=!1,this.uiShowTime(t)},a.uiShowTime=function(e){var n=this;if(!e.uiInfo.isAnim)return e.nodeRoot.active=!0,void this.uiShowEnd(e);e.nodeRoot.getComponent(_)||e.nodeRoot.addComponent(_);e.showAnim((function(){n.uiShowEnd(e)}))},a.uiShowEnd=function(e){M.emit(M.UI_OpenFinished,e.name),this.showUIEffectMask(!1)},a.close=function(e,n){void 0===n&&(n=!0);var t=this.m_mapWin.get(e);null!=t?this.uiCloseTime(t,n):console.warn(e+" does not exist!")},a.uiCloseTime=function(e,n){var t=this;if(void 0===n&&(n=!0),n&&e.uiInfo.isAnim){e.nodeRoot.getComponent(_)||e.nodeRoot.addComponent(_);e.hideAnim((function(){t.uiCloseEnd(e)}))}else this.uiCloseEnd(e)},a.uiCloseEnd=function(e){console.log("uiCloseEnd "+e.name),this.m_arrLayer[e.uiInfo.uiLayer].removeChild(e.nodeRoot),this.m_mapWin.delete(e.name),M.emit(M.UI_CloseFinished,e.name),m("释放界面预制体【"+e.uiInfo.bundleName+"://"+e.uiInfo.prefabPath+"】"),this.release(e.uiInfo.bundleName,e.uiInfo.prefabPath),e=null,this.showUIEffectMask(!1)},a.onCloseFromWin=function(e){this.close(e)},a.release=function(e,n){void 0===e&&(e="resources");var t=c.getBundle(e);if(!t)return 0;var i=t.get(n);return i?(i.refCount>0&&i.decRef(),0):0},a.closeAllNormalWin=function(){var e=this;this.m_mapWin.forEach((function(n){n.uiInfo.uiLayer<y.eUIL_Tip&&e.close(n.name,!1)}))},t(o,[{key:"uiCamera",get:function(){return this._uiCamera}}]),o}(L()));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiScrollList.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var s,i,e,h,o,n,l,r,_;return{setters:[function(t){s=t.createClass},function(t){i=t.cclegacy,e=t.Rect,h=t.Vec2,o=t.UITransform,n=t.Layout,l=t.Size,r=t.Vec3,_=t.math}],execute:function(){i._RF.push({},"b0ab6Sy0QZCqKYjvJU4DEsS","uiScrollList",void 0);t("uiScrollerListStyle",(function(){this.rowItemsCount=1,this.padding=new e(0,0,0,0),this.spacing=new h(0,0),this.autoCenter=!0,this.rightToLeft=!1,this.bottomToTop=!1})),t("uiScrollList",function(){function t(t,s,i,e,h){this.handleObj=null,this._scrollView=null,this._scrollViewUITrans=null,this._content=null,this._contentUITrans=null,this._uiCompBase=null,this._listdata=null,this._listItems=[],this._style=void 0,this._ns=void 0,this._nodeScale=void 0,this._spawnRow=void 0,this._totalRow=void 0,this._firstRowScrollerPos=void 0,this._firstRowIndex=0,this.handleObj=t,this._uiCompBase=s,this._listdata=i,this._scrollView=e,this._style=h,this.constructed()}var i=t.prototype;return i.constructed=function(){this.init()},i.release=function(){},i.destroy=function(){this._uiCompBase=null,this._listdata=null,this._listItems.forEach((function(t){t.forEach((function(t){t.destroy()})),t=[]})),this._listItems=[],this._style=null,this._scrollView=null,this._scrollViewUITrans=null,this._content=null,this._contentUITrans=null,this.handleObj=null,this.release()},i.init=function(){this._scrollViewUITrans=this._scrollView.getComponent(o),this._content=this._scrollView.content,this._contentUITrans=this._content.getComponent(o),this._style.rowItemsCount=Math.max(Math.floor(this._style.rowItemsCount),1);var t=this._content.getComponent(n);t&&(t.enabled=!1);var s=this._content.children[0];this._nodeScale=s.scale;var i=s.getComponent(o);this._ns=new l(i.contentSize),this._ns.x*=s.scale.x,this._ns.y*=s.scale.y,this.refreshListSize();for(var e=0;e<this._spawnRow;++e){for(var h=[],r=0;r<this._style.rowItemsCount;++r){var _=e*this._style.rowItemsCount+r,a=null==this._content.children[_],c=this.createItem(_,this._listdata[_],this._content.children[_]);a&&this._content.addChild(c.compRoot);var w=this.getItemPositon(_);c.setPosition(w.x,w.y),c.compRoot.setScale(this._nodeScale),h.push(c)}this._listItems.push(h)}for(var d=this._spawnRow*this._style.rowItemsCount;d<this._content.children.length;)this._content.removeChild(this._content.children[d]);this._firstRowScrollerPos=this.getScrollerPos(0),this.scrollerToIndex(0,0),this._firstRowIndex=0},i.createItem=function(t,s,i){return new this._uiCompBase(i,null,this.handleObj,s,t)},i.refreshListSize=function(){if(this._scrollView)if(this._spawnRow=Math.ceil(this._scrollView.horizontal?this._scrollViewUITrans.width/this.cw:this._scrollViewUITrans.height/this.ch)+1,this._totalRow=Math.ceil(this._listdata.length/this._style.rowItemsCount),this._scrollView.horizontal){this.setContentSize();var t=this._scrollViewUITrans.height-this.ch*this._style.rowItemsCount+this._style.spacing.y;this._style.autoCenter?this._style.padding.y=this._style.padding.height=t/2:this._style.bottomToTop?this._style.padding.height=t-this._style.padding.y:this._style.padding.y=t-this._style.padding.height}else{this.setContentSize();var s=this._scrollViewUITrans.width-this.cw*this._style.rowItemsCount+this._style.spacing.x;this._style.autoCenter?this._style.padding.x=this._style.padding.width=s/2:this._style.rightToLeft?this._style.padding.x=s-this._style.padding.width:this._style.padding.width=s-this._style.padding.x}},i.setContentSize=function(){this._scrollView.horizontal?(this._contentUITrans.height=this._scrollViewUITrans.height,this._contentUITrans.width=this.getContentLength()):(this._contentUITrans.width=this._scrollViewUITrans.width,this._contentUITrans.height=this.getContentLength())},i.ri=function(t){var s=Math.floor(t/this._style.rowItemsCount);return this._scrollView.horizontal?this._style.rightToLeft&&(s=this._totalRow-1-s):this._style.bottomToTop||(s=this._totalRow-1-s),s},i.ci=function(t){var s=t%this._style.rowItemsCount;return this._scrollView.horizontal?this._style.bottomToTop||(s=this._style.rowItemsCount-1-s):this._style.rightToLeft&&(s=this._style.rowItemsCount-1-s),s},i.getPaddingTop=function(){return this._scrollView.horizontal?this._style.rightToLeft?this._style.padding.width:this._style.padding.x:this._style.bottomToTop?this._style.padding.height:this._style.padding.y},i.getScrollLength=function(){return this._scrollView.horizontal?this._scrollViewUITrans.width:this._scrollViewUITrans.height},i.getContentLength=function(){return this._scrollView.horizontal?this._totalRow*this.cw-this._style.spacing.x+this._style.padding.x+this._style.padding.width:this._totalRow*this.ch-this._style.spacing.y+this._style.padding.y+this._style.padding.height},i.scrollerToCenterIndex=function(t,s,i){void 0===s&&(s=0),void 0===i&&(i=!0);var e=this.getItemAbsY(t);this.scrollerToCenterPos(e,s,i)},i.scrollerToCenterPos=function(t,s,i){var e;void 0===s&&(s=0),void 0===i&&(i=!0),e=this._scrollView.horizontal?new h((t-this._scrollViewUITrans.width/2)/(this.getContentLength()-this._scrollViewUITrans.width),0):new h(0,(t-this._scrollViewUITrans.height/2)/(this.getContentLength()-this._scrollViewUITrans.height)),this._scrollView.scrollTo(e,s,i)},i.scrollerToIndex=function(t,s,i){var e;void 0===s&&(s=0),void 0===i&&(i=!0),e=this._scrollView.horizontal?this._style.rightToLeft?new h((this.getItemAbsY(t)+this._ns.width/2-this._scrollViewUITrans.width)/(this.getContentLength()-this._scrollViewUITrans.width),0):new h((this.getItemAbsY(t)-this._ns.width/2)/(this.getContentLength()-this._scrollViewUITrans.width),0):this._style.bottomToTop?new h(0,(this.getItemAbsY(t)-this._ns.height/2)/(this.getContentLength()-this._scrollViewUITrans.height)):new h(0,(this.getItemAbsY(t)+this._ns.height/2-this._scrollViewUITrans.height)/(this.getContentLength()-this._scrollViewUITrans.height)),this._scrollView.scrollTo(e,s,i)},i.scrollerToPage=function(t,s,i){void 0===s&&(s=0),void 0===i&&(i=!0);var e=t*this.getScrollLength();this.scrollerToPos(e,s,i)},i.scrollerToPos=function(t,s,i){var e;void 0===s&&(s=0),void 0===i&&(i=!0),e=this._scrollView.horizontal?this._style.rightToLeft?new h((this._contentUITrans.width-t-this._scrollViewUITrans.width)/(this.getContentLength()-this._scrollViewUITrans.width),0):new h(t/(this.getContentLength()-this._scrollViewUITrans.width),0):this._style.bottomToTop?new h(0,t/(this.getContentLength()-this._scrollViewUITrans.height)):new h(0,(this._contentUITrans.height-t-this._scrollViewUITrans.height)/(this.getContentLength()-this._scrollViewUITrans.height)),this._scrollView.scrollTo(e,s,i)},i.getScrollerPos=function(t){return this._scrollView.horizontal?this._style.rightToLeft?this._contentUITrans.width/2-(this.getItemAbsY(t)+this._ns.width/2-this._scrollViewUITrans.width/2):this._contentUITrans.width/2+(this.getItemAbsY(t)-this._ns.width/2-this._scrollViewUITrans.width/2):this._style.bottomToTop?-this._scrollViewUITrans.height/2-(this.getItemAbsY(t)-this._ns.height/2-this._contentUITrans.height/2):this._scrollViewUITrans.height/2-(this.getItemAbsY(t)+this._ns.height/2-this._contentUITrans.height/2)},i.getItemAbsX=function(t){return this._scrollView.horizontal?this._style.padding.height+this.ch*this.ci(t)+this._ns.height/2:this._style.padding.x+this.cw*this.ci(t)+this._ns.width/2},i.getItemAbsY=function(t){return this._scrollView.horizontal?this._style.padding.x+this.cw*this.ri(t)+this._ns.width/2:this._style.padding.height+this.ch*this.ri(t)+this._ns.height/2},i.getItemPositon=function(t){return this._scrollView.horizontal?new r(this.getItemAbsY(t)-this._contentUITrans.width/2,this.getItemAbsX(t)-this._contentUITrans.height/2,0):new r(this.getItemAbsX(t)-this._contentUITrans.width/2,this.getItemAbsY(t)-this._contentUITrans.height/2,0)},i.update=function(t){if(this._content){var s;s=this._scrollView.horizontal?this._style.rightToLeft?Math.floor((this._content.position.x-this._firstRowScrollerPos)/this.cw):Math.floor((this._firstRowScrollerPos-this._content.position.x)/this.cw):this._style.bottomToTop?Math.floor((this._firstRowScrollerPos-this._content.position.y)/this.ch):Math.floor((this._content.position.y-this._firstRowScrollerPos)/this.ch);var i=_.clamp(s,0,Math.max(this._totalRow-this._listItems.length,0));this.changefirstRowIndex(i)}},i.changefirstRowIndex=function(t,s){void 0===s&&(s=!1);var i=Math.max(this._listItems.length-Math.abs(t-this._firstRowIndex),0);if(0!=i){if(t>=this._firstRowIndex){for(;t>this._firstRowIndex;){var e=this._listItems.shift();this._listItems.push(e),++this._firstRowIndex;for(var h=0;h<e.length;++h)e[h].compRoot.setSiblingIndex(e[h].compRoot.parent.children.length-1),this.refreshItemAndPos(this._lastRowItemIndexStart+h)}if(!s)return;for(var o=0;o<i;++o)for(var n=0;n<this._listItems[o].length;++n)this.refreshItemAndPos(this._firstShowIndex+o*this._style.rowItemsCount+n)}else if(t<this._firstRowIndex){for(;t<this._firstRowIndex;){var l=this._listItems.pop();this._listItems.unshift(l),--this._firstRowIndex;for(var r=l.length-1;r>=0;--r)l[r].compRoot.setSiblingIndex(0),this.refreshItemAndPos(this._firstShowIndex+r)}if(!s)return;for(var _=this._listItems.length-i;_<this._listItems.length;++_)for(var a=0;a<this._listItems[_].length;++a)this.refreshItemAndPos(this._firstShowIndex+_*this._style.rowItemsCount+a)}}else this.refreshAll(t)},i.refreshAll=function(t){this._firstRowIndex=t;for(var s=0;s<this._listItems.length;++s)for(var i=0;i<this._listItems[s].length;++i)this.refreshItemAndPos(this._firstShowIndex+s*this._style.rowItemsCount+i)},i.refreshItemAndPos=function(t){if(void 0===t&&(t=this._listdata.length-1),!(t<this._firstShowIndex||t>this._lastShowIndex)){var s=Math.floor((t-this._firstShowIndex)/this._style.rowItemsCount),i=t%this._style.rowItemsCount;this._listItems[s][i].ReInit(this._listdata[t],t),this._listItems[s][i].compRoot.setPosition(this.getItemPositon(t))}},i.refreshItem=function(t){var s;if(void 0===t&&(t=this._listdata.length-1),!(t<this._firstShowIndex||t>this._lastShowIndex)){var i=Math.floor((t-this._firstShowIndex)/this._style.rowItemsCount),e=t%this._style.rowItemsCount;null==(s=this._listItems[i][e])||s.ReInit(this._listdata[t],t)}},i.refreshList=function(){var t=Math.ceil(this._listdata.length/this._style.rowItemsCount);if(t>this._totalRow){var s=(this._scrollView.horizontal?this._content.position.x:this._content.position.y)-this._firstRowScrollerPos;this._totalRow=t,this.setContentSize(),this._firstRowScrollerPos=this.getScrollerPos(0),s=Math.max(Math.min(this.getContentLength()-this.getScrollLength(),s),-this.getPaddingTop()),this._scrollView.horizontal?this._content.setPosition(this._firstRowScrollerPos+s,0):this._content.setPosition(0,this._firstRowScrollerPos+s)}else t<this._totalRow&&(this._totalRow=t,this.setContentSize(),this._firstRowScrollerPos=this.getScrollerPos(0));var i=_.clamp(this._firstRowIndex,0,Math.max(this._totalRow-this._listItems.length,0));this.changefirstRowIndex(i,!0)},i.refreshData=function(t){this._listdata=t,this.refreshList()},s(t,[{key:"_firstShowIndex",get:function(){return this._firstRowIndex*this._style.rowItemsCount}},{key:"_lastShowIndex",get:function(){return(this._firstRowIndex+this._spawnRow)*this._style.rowItemsCount-1}},{key:"_lastRowItemIndexStart",get:function(){return(this._firstRowIndex+this._spawnRow-1)*this._style.rowItemsCount}},{key:"isValid",get:function(){var t;return null==(t=this.handleObj)?void 0:t.isValid}},{key:"cw",get:function(){return this._ns.width+this._style.spacing.x}},{key:"ch",get:function(){return this._ns.height+this._style.spacing.y}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/uiSkillInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,l,n,r,a,o,u,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,o=e._decorator,u=e.Label,c=e.Component}],execute:function(){var s,f,p,b,h,L,d,k,v,g,y;a._RF.push({},"0a4c6sNMVNGpIzk4jg0Ta+6","uiSkillInfo",void 0);var S=o.ccclass,I=o.property;e("uiSkillInfo",(s=S("uiSkillInfo"),f=I(u),p=I(u),b=I(u),h=I(u),s((k=i((d=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,l(i,"LabelSkillInfo",k,n(i)),l(i,"LabelMP",v,n(i)),l(i,"LabelHate",g,n(i)),l(i,"LabelSkillEffect",y,n(i)),i._data=void 0,i._win=void 0,i}t(i,e);var a=i.prototype;return a.onDestroy=function(){this._win=null},a.init=function(e,i){var t=this._data=i;if(this._win=e,null!=this._data){this.node.active=!0,this.LabelSkillInfo.string="Skill "+t.skillId,this.LabelMP.string="MP: "+t.mp,this.LabelHate.string="Hate: "+t.hate;for(var l,n="",a=r(t.effect);!(l=a()).done;){""!=n&&(n+="\n"),n+=l.value.info}this.LabelSkillEffect.string=n}else this.node.active=!1},i}(c)).prototype,"LabelSkillInfo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(d.prototype,"LabelMP",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(d.prototype,"LabelHate",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(d.prototype,"LabelSkillEffect",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=d))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiTeam.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./gameDef.ts","./callBack.ts","./gEvent.ts","./ComponentScrollList.ts","./uiScrollList.ts"],(function(e){"use strict";var t,n,i,a,o,l,r,s,u,c,h,p,b,f,m,_,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Node,s=e.Label,u=e.Component},function(e){c=e.uiManager},function(e){h=e.playerData},function(e){p=e.eWeaponShowFilterString,b=e.eWeaponShowFilter},function(e){f=e.callBack},function(e){m=e.gEvent},function(e){_=e.ComponentScrollList},function(e){g=e.uiScrollerListStyle}],execute:function(){var T,D,H,I,C,w,U,v,y,d,A,S,W,B,E,k,L,O,z,F,N,x,G,M,R,q,P,Y,j,J,K,Q,V,X,Z;o._RF.push({},"1a7cfYy0i9Asa81OlYSn9zd","uiTeam",void 0);var $=l.ccclass,ee=l.property;e("uiTeam",(T=$("uiTeam"),D=ee(r),H=ee(r),I=ee(r),C=ee(r),w=ee(r),U=ee(r),v=ee(r),y=ee(r),d=ee(r),A=ee(r),S=ee(r),W=ee(r),B=ee(r),E=ee(r),k=ee(_),L=ee(_),T((F=t((z=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"gHeroOper",F,a(t)),i(t,"btnLock",N,a(t)),i(t,"btnUnlock",x,a(t)),i(t,"btnAuto",G,a(t)),i(t,"btnClear",M,a(t)),i(t,"btnHClearAll",R,a(t)),i(t,"btnTeam",q,a(t)),i(t,"btnFilter",P,a(t)),i(t,"btnShow",Y,a(t)),i(t,"btnUnlockAll",j,a(t)),i(t,"btnAutoAll",J,a(t)),i(t,"btnClearAll",K,a(t)),i(t,"btnSave",Q,a(t)),i(t,"btnDelete",V,a(t)),i(t,"listHero",X,a(t)),i(t,"listWeapon",Z,a(t)),t._listHero=void 0,t._listWeapon=void 0,t._win=void 0,t}n(t,e);var o=t.prototype;return o.init=function(e){this._win=e,h.Ins.teamData.updateCurrentTeam(),this._listHero=h.Ins.teamData.getTeamHeroList(),this._listWeapon=h.Ins.teamData.getTeamWeaponList(),this.listHero.init(this._win,this._listHero,new g);var t=new g;t.autoCenter=!0,t.rowItemsCount=6,t.spacing.x=10,t.spacing.y=10,this.listWeapon.init(this._win,this._listWeapon,t),this.refreshGHeroOper(),this.refreshTeam(),this.refreshShow()},o.onLoad=function(){this.btnSave.on(r.EventType.TOUCH_END,this.onBtnSave,this),this.btnDelete.on(r.EventType.TOUCH_END,this.onBtnDelete,this),this.btnLock.on(r.EventType.TOUCH_END,this.onBtnLock,this),this.btnUnlock.on(r.EventType.TOUCH_END,this.onBtnUnlock,this),this.btnAuto.on(r.EventType.TOUCH_END,this.onBtnAuto,this),this.btnClear.on(r.EventType.TOUCH_END,this.onBtnClear,this),this.btnHClearAll.on(r.EventType.TOUCH_END,this.onBtnHClearAll,this),this.btnTeam.on(r.EventType.TOUCH_END,this.onBtnTeam,this),this.btnFilter.on(r.EventType.TOUCH_END,this.onBtnFilter,this),this.btnShow.on(r.EventType.TOUCH_END,this.onBtnShow,this),this.btnUnlockAll.on(r.EventType.TOUCH_END,this.onBtnUnlockAll,this),this.btnAutoAll.on(r.EventType.TOUCH_END,this.onBtnAutoAll,this),this.btnClearAll.on(r.EventType.TOUCH_END,this.onBtnClearAll,this),m.on(m.Hero_Update,this.onHero_Update,this),m.on(m.UI_Weapon_FilterChange,this.UI_Weapon_FilterChange,this),m.on(m.UI_Team_Change,this.UI_Team_Change,this),m.on(m.UI_Team_Select_Change,this.onUI_Team_Select_Change,this)},o.onDestroy=function(){m.off(m.Hero_Update,this.onHero_Update,this),m.off(m.UI_Weapon_FilterChange,this.UI_Weapon_FilterChange,this),m.off(m.UI_Team_Change,this.UI_Team_Change,this),m.off(m.UI_Team_Select_Change,this.onUI_Team_Select_Change,this),this._win=null},o.onBtnSave=function(){h.Ins.teamData.savedata(),c.Ins.m_tips.showFormatedTip("All Team Data Save Success!")},o.onBtnDelete=function(){c.Ins.open("messageWin","Are you sure to Delete All Team Save?","WARNING",new f(this.realDelete,this),null,null)},o.realDelete=function(){h.Ins.teamData.deleteData(),c.Ins.m_tips.showFormatedTip("All Team Save deleted success")},o.onHero_Update=function(e){this._listHero=h.Ins.teamData.getTeamHeroList(),this.listHero.refreshData(this._listHero)},o.UI_Weapon_FilterChange=function(){this._listWeapon=h.Ins.teamData.getTeamWeaponList(),this.listWeapon.refreshData(this._listWeapon)},o.UI_Team_Change=function(){this.onHero_Update(null),this.onUI_Team_Select_Change(),this.refreshTeam()},o.refreshGHeroOper=function(){var e=h.Ins.teamData;if(null!=e.selectedHeroId){this.gHeroOper.active=!0;var t=h.Ins.heroData.heros.get(e.selectedHeroId);t?t.teamHero&&t.teamHero.weapons[e.selectedHeroWeaponIndex]&&t.teamHero.weapons[e.selectedHeroWeaponIndex].lock?(this.btnUnlock.active=!0,this.btnLock.active=!1):(this.btnUnlock.active=!1,this.btnLock.active=!0):console.error("!hero chara_id:"+e.selectedHeroId)}else this.gHeroOper.active=!1},o.refreshTeam=function(){this.btnTeam.getChildByName("Label").getComponent(s).string="Team "+h.Ins.teamData.currectTeam},o.refreshShow=function(){this.btnShow.getChildByName("Label").getComponent(s).string=p.get(h.Ins.teamData.show)},o.onUI_Team_Select_Change=function(){var e=h.Ins.teamData;this.refreshGHeroOper(),this._listWeapon=e.getTeamWeaponList(),this.listWeapon.refreshData(this._listWeapon)},o.onBtnLock=function(){h.Ins.teamData.setSelectHeroWeaponLock(!0)},o.onBtnUnlock=function(){h.Ins.teamData.setSelectHeroWeaponLock(!1)},o.onBtnAuto=function(){var e=h.Ins.teamData;e.autoEquipHero(h.Ins.heroData.heros.get(e.selectedHeroId))},o.onBtnClear=function(){h.Ins.teamData.clearSelectedHeroWeapon(!1)},o.onBtnHClearAll=function(){h.Ins.teamData.clearSelectedHeroWeapon(!0)},o.onBtnTeam=function(){c.Ins.open("teamSwitchWin")},o.onBtnFilter=function(){h.Ins.teamData;c.Ins.open("weaponFilterWin",h.Ins.teamData.filter,(function(e){h.Ins.teamData.filter=e}))},o.onBtnShow=function(){var e=h.Ins.teamData;++e.show,e.show>=b.Size&&(e.show=b.showAll),this.refreshShow(),this.UI_Weapon_FilterChange()},o.onBtnUnlockAll=function(){h.Ins.teamData.clearAllLock()},o.onBtnAutoAll=function(){h.Ins.teamData.autoEquipAll()},o.onBtnClearAll=function(){h.Ins.teamData.clearAllWeapon()},t}(u)).prototype,"gHeroOper",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"btnLock",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"btnUnlock",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(z.prototype,"btnAuto",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"btnClear",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"btnHClearAll",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(z.prototype,"btnTeam",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"btnFilter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(z.prototype,"btnShow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(z.prototype,"btnUnlockAll",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(z.prototype,"btnAutoAll",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(z.prototype,"btnClearAll",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(z.prototype,"btnSave",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"btnDelete",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(z.prototype,"listHero",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(z.prototype,"listWeapon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=z))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiTeamHeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameDef.ts","./uiHeroIcon.ts","./gameData.ts","./ComponentListItem.ts","./ComponentList.ts","./TouchHold.ts","./uiManager.ts"],(function(t){"use strict";var i,n,e,o,r,a,u,c,l,s,p,f,h,b,d,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Label,c=t.Node},function(t){l=t.eAttrType},function(t){s=t.uiHeroIcon,p=t.uiHeroIconData},function(t){f=t.gameData},function(t){h=t.ComponentListItem},function(t){b=t.ComponentList},function(t){d=t.TouchHold},function(t){m=t.uiManager}],execute:function(){var y,g,I,H,P,D,T,v,_,w,A,L,z;r._RF.push({},"cb028BwuvtHJZFr9Tl1GyA6","uiTeamHeroItem",void 0);var C=a.ccclass,B=a.property;t("uiTeamHeroItem",(y=C("uiTeamHeroItem"),g=B(u),I=B(c),H=B(c),P=B(s),D=B(b),y((_=i((v=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"labPriority",_,o(i)),e(i,"btnPriAdd",w,o(i)),e(i,"btnPriDec",A,o(i)),e(i,"heroIcon",L,o(i)),e(i,"listWeapon",z,o(i)),i._data=void 0,i}n(i,t);var r=i.prototype;return r.onLoad=function(){this.btnPriAdd.on(c.EventType.TOUCH_END,this.onBtnPriAdd,this),this.btnPriDec.on(c.EventType.TOUCH_END,this.onBtnPriDec,this),this.heroIcon.getComponent(d).init(this.onHold.bind(this),1)},r.refresh=function(){var t=this._data;this.heroIcon.init(new p(t,f.getAttrKV(t.finalStatus,l.ATK)),this._win);var i=t.priority;this.labPriority.string=i>0?"+"+i:""+i,this.listWeapon.init(this._win,[t,t,t,t,t])},r.onBtnPriAdd=function(t){++this._data.priority},r.onBtnPriDec=function(t){--this._data.priority},r.onHold=function(){m.Ins.open("heroInfoWin",this._data)},i}(h)).prototype,"labPriority",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(v.prototype,"btnPriAdd",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(v.prototype,"btnPriDec",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(v.prototype,"heroIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(v.prototype,"listWeapon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=v))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiTeamHeroWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./uiWeaponIcon.ts","./gEvent.ts","./playerData.ts","./gameData.ts","./ComponentListItem.ts"],(function(e){"use strict";var t,n,a,o,i,r,s,c,l,p,u,h,m,_,d,g,f,w,v,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Sprite,c=e.Node,l=e.tween,p=e.Vec3,u=e.Tween},function(e){h=e.resManager},function(e){m=e.gameDef,_=e.eAttrType},function(e){d=e.uiWeaponIcon,g=e.uiWeaponIconData},function(e){f=e.gEvent},function(e){w=e.playerData},function(e){v=e.gameData},function(e){I=e.ComponentListItem}],execute:function(){var H,T,y,S,b,D,W,C,U,L,k,x,z;i._RF.push({},"2131dT2jLZPrIvJc8NfkpfM","uiTeamHeroWeapon",void 0);var A=r.ccclass,q=r.property;e("uiTeamHeroWeapon",(H=A("uiTeamHeroWeapon"),T=q(s),y=q(c),S=q(c),b=q(c),D=q(d),H((U=t((C=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"imgSlot",U,o(t)),a(t,"imgLock",L,o(t)),a(t,"gSelect",k,o(t)),a(t,"imgSelect",x,o(t)),a(t,"weaponIcon",z,o(t)),t._data=void 0,t}n(t,e);var i=t.prototype;return i.start=function(){l(this.imgSelect).by(.5,{position:new p(0,10)},{easing:"quadOut"}).by(.5,{position:new p(0,-10)},{easing:"quadIn"}).union().repeatForever().start()},i.onLoad=function(){this.node.on(c.EventType.TOUCH_END,this.onTouch,this),f.on(f.UI_Team_Select_Change,this.UI_Team_Select_Change,this),f.on(f.UI_Team_HeroWeapon_Change,this.UI_Team_HeroWeapon_Change,this)},i.onDestroy=function(){u.stopAllByTarget(this.imgSelect),f.off(f.UI_Team_Select_Change,this.UI_Team_Select_Change,this),f.off(f.UI_Team_HeroWeapon_Change,this.UI_Team_HeroWeapon_Change,this),e.prototype.onDestroy.call(this)},i.UI_Team_Select_Change=function(){var e,t;if(null!=this._data){this.node.active=!0;var n=w.Ins.teamData;this.gSelect.active=n.selectedHeroId==this._data.hero.id&&n.selectedHeroWeaponIndex==this._index,this.imgLock.active=(null==(e=this._data.teamHero)||null==(t=e.weapons[this._index])?void 0:t.lock)||!1}else this.node.active=!1},i.UI_Team_HeroWeapon_Change=function(){var e=w.Ins.teamData;e.selectedHeroId==this._data.hero.id&&e.selectedHeroWeaponIndex==this._index&&this.refresh()},i.refresh=function(){var e=this._data=this._data,t=this._index;if(null!=this._data){this.node.active=!0;var n=w.Ins.teamData;if(e.teamHero&&e.teamHero.weapons&&e.teamHero.weapons[t]&&e.teamHero.weapons[t].weapon_id&&""!=e.teamHero.weapons[t].weapon_id){var a=w.Ins.weaponData.weapons.get(e.teamHero.weapons[t].weapon_id);if(!a)return void console.error("!weapon_id:"+e.teamHero.weapons[t].weapon_id);var o=new g(a.weapon,0,v.getAttrKV(a.weapon.status,_.ATKPrecent));null==o.attr&&(o.attr=v.getAttrKV(a.weapon.status,_.ATK)),this.weaponIcon.init(o,this._win),this.imgSlot.node.active=!1,this.imgLock.active=e.teamHero.weapons[t].lock}else e.slots>t?h.setSprite(this.imgSlot,m.bundleUI,"common/img/btn_eqp_set",this._win):h.setSprite(this.imgSlot,m.bundleUI,"common/img/eqp_non_open",this._win),this.weaponIcon.node.active=!1,this.imgSlot.node.active=!0,this.imgLock.active=!1;this.gSelect.active=n.selectedHeroId==e.hero.id&&n.selectedHeroWeaponIndex==t}else this.node.active=!1},i.onTouch=function(e){var t=this._index;t>=this._data.slots||w.Ins.teamData.touchHeroWeapon(this._data,t)},t}(I)).prototype,"imgSlot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"imgLock",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(C.prototype,"gSelect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(C.prototype,"imgSelect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(C.prototype,"weaponIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=C))||W));i._RF.pop()}}}));

System.register("chunks:///_virtual/uiTeamWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameDef.ts","./uiWeaponIcon.ts","./gEvent.ts","./playerData.ts","./gameData.ts","./resManager.ts","./ComponentListItem.ts"],(function(t){"use strict";var e,n,a,i,o,r,s,u,c,l,p,f,h,m,g,_,w,d,y,v,I,T,D,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,s=t._decorator,u=t.Node,c=t.tween,l=t.Vec3,p=t.Tween,f=t.EffectAsset,h=t.Material,m=t.Sprite,g=t.Label},function(t){_=t.eAttrType,w=t.gameDef},function(t){d=t.uiWeaponIcon,y=t.uiWeaponIconData},function(t){v=t.gEvent},function(t){I=t.playerData},function(t){T=t.gameData},function(t){D=t.resManager},function(t){S=t.ComponentListItem}],execute:function(){var A,b,C,W,E,L,M,U,K;r._RF.push({},"defe9K3t1pFobA9EGvBJDA5","uiTeamWeapon",void 0);var z=s.ccclass,F=s.property;t("uiTeamWeaponData",function(){function t(t,e){this.pw=void 0,this.attr=void 0,this.pw=t,this.attr=e}return t.Sort=function(t,e){return t.attr?(e.attr.type==_.Up?e.attr.value:-e.attr.value)-(t.attr.type==_.Up?t.attr.value:-t.attr.value):T.getAttrValue(e.pw.weapon.status,_.ATK)-T.getAttrValue(t.pw.weapon.status,_.ATK)},t}()),t("uiTeamWeapon",(A=z("uiTeamWeapon"),b=F(u),C=F(u),W=F(d),A((M=e((L=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"gSelect",M,i(e)),a(e,"imgSelect",U,i(e)),a(e,"weaponIcon",K,i(e)),e._data=void 0,e._mtl=void 0,e}n(e,t);var r=e.prototype;return r.start=function(){c(this.imgSelect).by(.5,{position:new l(0,10)},{easing:"quadOut"}).by(.5,{position:new l(0,-10)},{easing:"quadIn"}).union().repeatForever().start()},r.onLoad=function(){this.node.on(u.EventType.TOUCH_END,this.onTouch,this),v.on(v.UI_Team_SelectWeapon_Change,this.UI_Team_SelectWeapon_Change,this)},r.onDestroy=function(){p.stopAllByTarget(this.imgSelect),v.off(v.UI_Team_SelectWeapon_Change,this.UI_Team_SelectWeapon_Change,this),this._mtl=null,t.prototype.onDestroy.call(this)},r.UI_Team_SelectWeapon_Change=function(){this.refresh()},r.refresh=function(){var t=this,e=this._data,n=I.Ins.teamData,a=new y(e.pw.weapon,e.pw._freeCount,e.attr);null==a.attr&&(a.attr=T.getAttrKV(e.pw.weapon.status,_.ATKPrecent)),null==a.attr&&(a.attr=T.getAttrKV(e.pw.weapon.status,_.ATK)),this.weaponIcon.init(a,this._win),this.gSelect.active=n.selectedWeapon==e.pw.weapon.fullId,D.asyncloadAsset(w.bundleEffect,"spriteGray",f,this._win).then((function(e){t._mtl=new h,t._mtl.initialize({effectAsset:e}),t.setSpriteMtl()}))},r.setSpriteMtl=function(){for(var t,e=this,n=o(this.weaponIcon.node.children);!(t=n()).done;){var a=t.value;a.getComponentsInChildren(m).forEach((function(t){t.customMaterial=e._mtl})),a.getComponentsInChildren(g).forEach((function(t){t.customMaterial=e._mtl}))}this.refreshLighten()},r.refreshLighten=function(){this.isGray(0==this._data.pw._freeCount)},r.isGray=function(t){this._mtl&&this._mtl.setProperty("isgray",t?1:0)},r.onTouch=function(t){0!=this._data.pw._freeCount&&I.Ins.teamData.touchWeapon(this._data.pw)},e}(S)).prototype,"gSelect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(L.prototype,"imgSelect",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(L.prototype,"weaponIcon",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=L))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./uiManager.ts","./callBack.ts","./gEvent.ts","./ComponentScrollList.ts","./uiScrollList.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,l,u,p,c,f,h,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.Component},function(t){u=t.playerData},function(t){p=t.uiManager},function(t){c=t.callBack},function(t){f=t.gEvent},function(t){h=t.ComponentScrollList},function(t){D=t.uiScrollerListStyle}],execute:function(){var v,b,_,w,y,W,S,d,g,I,m;a._RF.push({},"3e453flN1xGSap5nQsBSQz8","uiWeapon",void 0);var F=r.ccclass,L=r.property;t("uiWeapon",(v=F("uiWeapon"),b=L(s),_=L(s),w=L(s),y=L(h),v((d=e((S=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"btnSave",d,o(e)),i(e,"btnDelete",g,o(e)),i(e,"btnFilter",I,o(e)),i(e,"listWeapon",m,o(e)),e._listWeapon=void 0,e._win=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.btnSave.on(s.EventType.TOUCH_END,this.onBtnSave,this),this.btnDelete.on(s.EventType.TOUCH_END,this.onBtnDelete,this),this.btnFilter.on(s.EventType.TOUCH_END,this.onBtnFilter,this),f.on(f.UI_Weapon_FilterChange,this.refreshList,this)},a.onDestroy=function(){f.off(f.UI_Weapon_FilterChange,this.refreshList,this),this._win=null},a.init=function(t){this._win=t,this._listWeapon=u.Ins.weaponData.getSortedList(),this.listWeapon.init(this._win,this._listWeapon,new D)},a.refreshList=function(){this._listWeapon=u.Ins.weaponData.getSortedList(),this.listWeapon.refreshData(this._listWeapon)},a.onBtnSave=function(){u.Ins.weaponData.savedata(),p.Ins.m_tips.showFormatedTip("Save Success!")},a.onBtnDelete=function(){p.Ins.open("messageWin","Are you sure to Delete All Weapon Save?","WARNING",new c(this.realDelete,this),null,null)},a.realDelete=function(){u.Ins.weaponData.deleteData(),p.Ins.m_tips.showFormatedTip("All Weapon Save deleted success")},a.onBtnFilter=function(){p.Ins.open("weaponFilterWin",u.Ins.weaponData.filter,(function(t){u.Ins.weaponData.filter=t}))},e}(l)).prototype,"btnSave",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(S.prototype,"btnDelete",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"btnFilter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(S.prototype,"listWeapon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=S))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiWeaponFilter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectUtil.ts","./gEvent.ts","./uiAttrType.ts"],(function(t){"use strict";var e,i,n,r,o,l,a,s,u,c,h,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,s=t.Toggle,u=t.Node,c=t.Component},function(t){h=t.default},function(t){f=t.gEvent},function(t){p=t.uiAttrType}],execute:function(){var g,v,_,d,y,b,T,C,k,m,B,w,O,A,F;l._RF.push({},"70e32ZkTQZERbdRHDHl/eS6","uiWeaponFilter",void 0);var I=a.ccclass,E=a.property;t("uiWeaponFilter",(g=I("uiWeaponFilter"),v=E(s),_=E(s),d=E(s),y=E(u),b=E(u),T=E(u),g((m=e((k=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"ToggleType",m,r(e)),n(e,"ToggleStar",B,r(e)),n(e,"ToggleAttr",w,r(e)),n(e,"ButtonClearAll",O,r(e)),n(e,"ButtonOk",A,r(e)),n(e,"ButtonCancel",F,r(e)),e._win=void 0,e._oriFilter=void 0,e._filter=void 0,e._okfunc=null,e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.ButtonClearAll.on(u.EventType.TOUCH_END,this.onBtnClearAll,this),this.ButtonOk.on(u.EventType.TOUCH_END,this.onBtnOk,this),this.ButtonCancel.on(u.EventType.TOUCH_END,this.onBtnCancel,this)},l.onDestroy=function(){this._win=null},l.init=function(t,e){this._win=t,this._oriFilter=e[0],this._filter=h.deepCopy(this._oriFilter),e.length>1&&(this._okfunc=e[1]),this.refresh(!0)},l.refresh=function(t){void 0===t&&(t=!1);for(var e,i=o(this.ToggleType);!(e=i()).done;){var n=e.value,r=parseInt(n.name.substring(10));n.isChecked=-1!=this._filter.type.indexOf(r)}for(var l,a=o(this.ToggleStar);!(l=a()).done;){var s=l.value,u=parseInt(s.name.substring(10));s.isChecked=-1!=this._filter.star.indexOf(u)}for(var c,h=o(this.ToggleAttr);!(c=h()).done;){var f=c.value,g=parseInt(f.name.substring(10));t&&f.node.getComponentInChildren(p).init(g,this._win),f.isChecked=-1!=this._filter.attr.indexOf(g)}},l.onBtnClearAll=function(){this._filter.type=[],this._filter.star=[],this._filter.attr=[],this.refresh()},l.onBtnOk=function(){var t,e;this._filter.type=[];for(var i,n=o(this.ToggleType);!(i=n()).done;){var r=i.value,l=parseInt(r.name.substring(10));r.isChecked&&this._filter.type.push(l)}this._filter.star=[];for(var a,s=o(this.ToggleStar);!(a=s()).done;){var u=a.value,c=parseInt(u.name.substring(10));u.isChecked&&this._filter.star.push(c)}this._filter.attr=[];for(var h,p=o(this.ToggleAttr);!(h=p()).done;){var g=h.value,v=parseInt(g.name.substring(10));g.isChecked&&this._filter.attr.push(v)}null==(t=this._okfunc)||t.call(this,this._filter),f.emit(f.UI_Weapon_FilterChange),null==(e=this._win)||e.close()},l.onBtnCancel=function(){var t;null==(t=this._win)||t.close()},e}(c)).prototype,"ToggleType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=e(k.prototype,"ToggleStar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(k.prototype,"ToggleAttr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(k.prototype,"ButtonClearAll",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(k.prototype,"ButtonOk",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(k.prototype,"ButtonCancel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=k))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/uiWeaponIcon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resManager.ts","./gameDef.ts","./uiAttr.ts"],(function(t){"use strict";var i,e,n,o,r,a,u,l,s,c,p,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Sprite,l=t.Label,s=t.Component},function(t){c=t.resManager},function(t){p=t.gameDef},function(t){h=t.uiAttr}],execute:function(){var b,w,g,f,m,d,v,y,_,I,C,S,z,D,A;r._RF.push({},"ea439LjmLZPq6x4gYv9rBDr","uiWeaponIcon",void 0);var F=a.ccclass,L=a.property;t("uiWeaponIconData",(function(t,i,e){void 0===i&&(i=0),void 0===e&&(e=void 0),this.weapon=void 0,this.showCount=void 0,this.attr=void 0,this.weapon=t,this.showCount=i,this.attr=e})),t("uiWeaponIcon",(b=F("uiWeaponIcon"),w=L(u),g=L(u),f=L(u),m=L(l),d=L(l),v=L(h),b((I=i((_=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"imgFrame",I,o(i)),n(i,"imgIcon",C,o(i)),n(i,"imgType",S,o(i)),n(i,"labStar",z,o(i)),n(i,"labCount",D,o(i)),n(i,"uiAttr",A,o(i)),i._data=void 0,i._win=void 0,i}e(i,t);var r=i.prototype;return r.onDestroy=function(){this._win=null},r.init=function(t,i){var e=this._data=t;this._win=i,null!=this._data?(this.node.active=!0,c.setSprite(this.imgIcon,p.bundleIcon,"weapon/"+e.weapon.weapon_id,this._win),c.setSprite(this.imgFrame,p.bundleUI,"common/img/clickable"+(e.weapon.release?2:1),this._win),c.setSprite(this.imgType,p.bundleIcon,"weapontype"+e.weapon.weapon_type,this._win),this.labStar.string=e.weapon.weapon_rarity.toString(),e.showCount>0?(this.labCount.node.active=!0,this.labCount.string="*"+e.showCount):this.labCount.node.active=!1,this.uiAttr.init(this._win,e.attr)):this.node.active=!1},i}(s)).prototype,"imgFrame",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(_.prototype,"imgIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(_.prototype,"imgType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(_.prototype,"labStar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(_.prototype,"labCount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(_.prototype,"uiAttr",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=_))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiWeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiWeaponIcon.ts","./ComponentListItem.ts","./ComponentList.ts"],(function(t){"use strict";var n,i,e,o,r,a,u,s,c,l,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.EditBox,s=t.math},function(t){c=t.uiWeaponIcon,l=t.uiWeaponIconData},function(t){p=t.ComponentListItem},function(t){f=t.ComponentList}],execute:function(){var m,d,h,I,w,g,v,y,_;r._RF.push({},"9aaf9w8mAJLF5knfKjOCnv3","uiWeaponItem",void 0);var b=a.ccclass,N=a.property;t("uiWeaponItem",(m=b("uiWeaponItem"),d=N(u),h=N(c),I=N(f),m((v=n((g=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,e(n,"editBoxNum",v,o(n)),e(n,"weaponIcon",y,o(n)),e(n,"listAttr",_,o(n)),n._data=void 0,n}i(n,t);var r=n.prototype;return r.onLoad=function(){this.editBoxNum.node.on(u.EventType.EDITING_DID_ENDED,this.onEditEnd,this)},r.refresh=function(){var t=this._data;this.weaponIcon.init(new l(t.weapon),this._win),this.listAttr.init(this._win,t.weapon.status),this.editBoxNum.string=t.totalCount.toString()},r.onEditEnd=function(t){var n=this.editBoxNum.string,i=parseInt(n);NaN!==i&&null!=i||(i=0),i=s.clamp(i,0,999),this._data.totalCount=i,this.editBoxNum.string=i.toString()},n}(p)).prototype,"editBoxNum",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(g.prototype,"weaponIcon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(g.prototype,"listAttr",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=g))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(e){"use strict";var t,n,o,i,r,c,a;return{setters:[function(e){t=e.cclegacy,n=e._decorator,o=e.sys,i=e.Touch,r=e.EventTouch,c=e.Input,a=e.Vec2}],execute:function(){t._RF.push({},"fbb6aAbxUNASI25u0gAwYAP","utils",void 0);n.ccclass,n.property,e("Utils",function(){function e(){}return e.formatStr=function(e,t){if(void 0===t&&(t=[]),"number"==typeof e&&(e=e.toString()),0==t.length)return e;for(var n=0;n<t.length;++n)e=e.replace("{"+n+"}",t[n]);return e},e.copyToClipboard=function(e){if(o.isMobile||o.isBrowser)if(window.clipboardData)window.clipboardData.setData("Text",e);else{var t=function(e){var t=document.createElement("div");return t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.textContent=e,document.body.appendChild(t),t.contentEditable="true",t}(e);!function(e){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}(t);try{window.netscape&&window.netscape.security&&window.netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),document.execCommand("copy",!1,null)}catch(e){!1}document.body.removeChild(t)}else!o.isNative||o.os!=o.OS.ANDROID&&o.os!=o.OS.IOS||jsb.copyTextToClipboard(e)},e.simulateTouch=function(e,t,n){var o=new i(n.x,n.y,0),c=[o],a=new r(c,!1,t,c);a.touch=o,a.simulate=!0,e.dispatchEvent(a)},e.simulateClick=function(t,n){var o=t.getWorldPosition(),i=n.worldToScreen(o);e.simulateTouch(t,c.EventType.TOUCH_START,new a(i.x,i.y)),e.simulateTouch(t,c.EventType.TOUCH_END,new a(i.x,i.y)),e.simulateTouch(t,c.EventType.TOUCH_CANCEL,new a(i.x,i.y))},e.ping=function(e){function t(t,n,o,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,o){var i=new Image,r=(new Date).getTime();i.src=/^(http)/.test(e)?e+"?t="+r:"http://"+e+"?t="+r,console.log("ping "+i.src);var c=!1;i.onload=function(){c=!0;var e=(new Date).getTime();n(Math.abs(e-r))},i.onerror=function(){c=!0;var e=(new Date).getTime();n(Math.abs(e-r))};setTimeout((function(){c||(c=!1,o())}),t)})),e.replaceAll=function(e,t,n){for(;-1!=e.indexOf(t);)e=e.replace(t,n);return e},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Weapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameDef.ts","./utils.ts"],(function(t){"use strict";var e,s,a,n,i;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy},function(t){a=t.AttrKV,n=t.eAttrType},function(t){i=t.Utils}],execute:function(){s._RF.push({},"f1d79lHritBk7ZnXill5h7c","Weapon",void 0);t("Weapon",function(){function t(t){var e=this;for(var s in this.weapon_id=void 0,this.release=void 0,this.weapon_name=void 0,this.weapon_type=void 0,this.weapon_rarity=void 0,this.status=[],this.sell_cost=void 0,this.num=void 0,this.weapon_id=t.weapon_id,this.release=2==t.release,this.weapon_name=t.weapon_name,this.weapon_type=t.weapon_type,this.weapon_rarity=t.weapon_rarity,t.status)switch(s){case"hp":this.status.push(new a(n.HP,t.status[s]));break;case"mp":this.status.push(new a(n.MP,t.status[s]));break;case"atk":this.status.push(new a(n.ATK,t.status[s]));break;case"def":this.status.push(new a(n.DEF,t.status[s]));break;default:throw new Error("!parse json.status["+s+"]")}var r=t.skill_note;r=i.replaceAll(r,"特殊効果 ",""),r=i.replaceAll(r,"なし",""),r=i.replaceAll(r,"\n",""),(r=i.replaceAll(r,"、"," ")).split(" ").forEach((function(t){var s,i;if("暗闇無効"==t?i=new a(n.Invalid_state_Blind,1):"麻痺無効"==t?i=new a(n.Invalid_state_Palalysis,1):"毒無効"==t?i=new a(n.Invalid_state_Poison,1):"沈黙無効"==t?i=new a(n.Invalid_state_Silence,1):"呪い無効"==t?i=new a(n.Invalid_state_Curse,1):-1!=(s=t.indexOf("%"))?t.startsWith("HP+")?i=new a(n.HPPrecent,Math.round(100*parseFloat(t.substring(3,s)))):t.startsWith("MP+")?i=new a(n.MPPrecent,Math.round(100*parseFloat(t.substring(3,s)))):t.startsWith("攻撃力+")?i=new a(n.ATKPrecent,Math.round(100*parseFloat(t.substring(4,s)))):t.startsWith("防御力+")&&(i=new a(n.DEFPrecent,Math.round(100*parseFloat(t.substring(4,s))))):t.startsWith("通常攻撃HIT数+")?i=new a(n.NormalHit,parseInt(t.substring(9))):t.startsWith("FCドロップ数+")&&(i=new a(n.FC,parseInt(t.substring(8,t.length-1)))),i)e.status.push(i);else if(""!=t)throw new Error("!status of ["+t+"]")})),this.sell_cost=t.sell_cost}return t.GenericConfig=function(e,s){for(var a in s.weapon_list){var n=new t(s.weapon_list[a]);e.set(a,n)}console.log("weapon size:"+e.size)},e(t,[{key:"fullId",get:function(){return""+this.weapon_id+(this.release?2:1)}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/weaponData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Configs.ts","./resManager.ts","./gameDef.ts","./ObjectUtil.ts","./dataBase.ts","./gameData.ts","./playerData.ts"],(function(e){"use strict";var t,a,n,r,o,i,s,u,p,l,f,c,d,w,h,v;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose,n=e.asyncToGenerator},function(e){r=e.cclegacy,o=e._decorator,i=e.JsonAsset},function(e){s=e.Configs},function(e){u=e.resManager},function(e){p=e.eWeaponSortType,l=e.eSortOrder,f=e.eAttrType,c=e.gameDef},function(e){d=e.default},function(e){w=e.dataBase},function(e){h=e.gameData},function(e){v=e.DataType}],execute:function(){var g;r._RF.push({},"145a1SqjodBkLoyHAWhszuf","weaponData",void 0);var y=o.ccclass,_=(o.property,e("playerWeapon",(function(){this.weapon=void 0,this.totalCount=0,this.equipedHero=new Map,this._freeCount=0}))),A=e("weaponSortKV",(function(){this.type=void 0,this.order=void 0})),m=e("weaponFilter",(function(){this.type=[],this.star=[],this.attr=[],this.sort=[]}));e("weaponData",y("weaponData")(g=function(e){function r(){var t;return(t=e.call(this)||this).weapons=new Map,t.filter=void 0,t.addListener(),t.init(),t}t(r,e);var o=r.prototype;return o.addListener=function(){},o.init=function(){for(var e,t=a(s.WeaponCfg.values());!(e=t()).done;){var n=e.value,r=new _;r.weapon=n,this.weapons.set(n.fullId,r)}},o.savedata=function(){for(var e,t={},n=a(this.weapons.values());!(e=n()).done;){var r=e.value;t[r.weapon.fullId]={},t[r.weapon.fullId].num=r.totalCount}t.filter=this.filter,localStorage.setItem(v.weaponData,JSON.stringify(t))},o.loaddata=function(){var e=n(regeneratorRuntime.mark((function e(){var t,a,n,r,o,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(v.weaponData)){e.next=17;break}return e.next=4,u.asyncloadAsset(c.bundleCfg,c.weapon_list_json,i);case 4:a=e.sent.json,e.t0=regeneratorRuntime.keys(a.weapon_list);case 6:if((e.t1=e.t0()).done){e.next=15;break}if(n=e.t1.value,r=this.weapons.get(n)){e.next=12;break}return console.error("!weapon_id:"+n),e.abrupt("continue",6);case 12:r.totalCount=a.weapon_list[n].num,e.next=6;break;case 15:return this.filter=new m,e.abrupt("return");case 17:o=JSON.parse(t),e.t2=regeneratorRuntime.keys(o);case 19:if((e.t3=e.t2()).done){e.next=28;break}if(s=e.t3.value,p=this.weapons.get(s)){e.next=25;break}return console.warn("!weapon data:"+s),e.abrupt("continue",19);case 25:p.totalCount=o[s].num,e.next=19;break;case 28:o.filter?this.filter=o.filter:this.filter=new m;case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.deleteData=function(){localStorage.removeItem(v.weaponData)},o.clearEquipData=function(){for(var e,t=a(this.weapons.values());!(e=t()).done;){var n=e.value;n.equipedHero.clear(),n._freeCount=n.totalCount}},o.updateByHero=function(e,t,a){if(void 0===t&&(t=void 0),void 0===a&&(a=!0),e.teamHero){var n,r;null==t?(n=0,r=e.teamHero.weapons.length):(n=t,r=t+1);for(var o=n;o<r;++o){var i=e.teamHero.weapons[o];if(i){var s=this.weapons.get(i.weapon_id);if(s){var u=s.equipedHero.get(e.hero.id);if(u)if(a)u.push(o);else{var p=u.indexOf(o);if(-1==p){console.error("!unequip weapon where is not equiped");continue}u.splice(p,1),0==u.length&&s.equipedHero.delete(e.hero.id)}else{if(!a){console.error("!chara_id weapon_id:"+s.weapon.fullId+" ->equipedHero.get(chara_id:"+e.hero.id+")");continue}s.equipedHero.set(e.hero.id,[o])}a?--s._freeCount:++s._freeCount}else console.error("!weapon of ["+i.weapon_id+"]")}}}},o.getList=function(){for(var e,t=this.filter,n=[],r=a(this.weapons.values());!(e=r()).done;){var o=e.value;if(!(t.type.length>0&&-1==t.type.indexOf(o.weapon.weapon_type))&&!(t.star.length>0&&-1==t.star.indexOf(o.weapon.weapon_rarity))){if(t.attr.length>0){for(var i,s=!1,u=a(t.attr);!(i=u()).done;){var p=i.value;if(0==h.getAttrValue(o.weapon.status,p)){s=!0;break}}if(s)continue}n.push(o)}}return n},o.getSortedList=function(){var e=this.getList(),t=d.deepCopy(this.filter.sort);if(0==t.length){var a=new A;a.type=p.Default,a.order=l.ASCE,t.push(a)}for(var n=function(a){var n=t[a].order==l.ASCE?1:-1;switch(t[a].type){case p.Default:e.sort((function(e,t){return(h.getAttrValue(t.weapon.status,f.ATK)+h.getAttrValue(t.weapon.status,f.ATKPrecent)*c.WeaponAtkPrecentBase-h.getAttrValue(e.weapon.status,f.ATK)-h.getAttrValue(e.weapon.status,f.ATKPrecent)*c.WeaponAtkPrecentBase)*n}));break;case p.HP:case p.MP:case p.ATK:case p.DEF:e.sort((function(e,r){return(h.getAttrValue(r.weapon.status,t[a].type)-h.getAttrValue(e.weapon.status,t[a].type))*n}));break;case p.STAR:e.sort((function(e,t){return(t.weapon.weapon_rarity-e.weapon.weapon_rarity)*n}));break;default:throw new Error("!eWeaponSortType :"+t[a].type)}},r=t.length-1;r>=0;--r)n(r);return e},r}(w))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/weaponFilterWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiWeaponFilter.ts"],(function(t){"use strict";var i,e,n,o,r,a;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){o=t.uiBase,r=t.eUILayer},function(t){a=t.uiWeaponFilter}],execute:function(){var s;e._RF.push({},"c7f0cQUgtBI27PxQfNWSBMi","weaponFilterWin",void 0);var u=n.ccclass;n.property,t("weaponFilterWin",u("weaponFilterWin")(s=function(t){function e(){var i;return(i=t.call(this)||this)._uiInfo.prefabPath="filter/prefabs/weaponFilterWin",i._uiInfo.uiLayer=r.eUIL_Dialog,i}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.nodeRoot.getComponent(a).init(this,this.m_args)},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/weaponWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiBase.ts","./uiWeapon.ts"],(function(n){"use strict";var i,t,e,o,r,u;return{setters:[function(n){i=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator},function(n){o=n.uiBase,r=n.eUILayer},function(n){u=n.uiWeapon}],execute:function(){var a;t._RF.push({},"c8012LX9mFI04CWCzYIzJVO","weaponWin",void 0);var s=e.ccclass;e.property,n("weaponWin",s("weaponWin")(a=function(n){function t(){var i;return(i=n.call(this)||this)._uiInfo.prefabPath="weapon/prefabs/weaponWin",i._uiInfo.uiLayer=r.eUIL_Win,i._uiInfo.isAlphaBg=!1,i._uiInfo.isAnim=!1,i}return i(t,n),t.prototype.init=function(){n.prototype.init.call(this),this.nodeRoot.getComponent(u).init(this)},t}(o))||a);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});